[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?25l[?2026h[?25l[1G[K[?25h[?2026l[2K[1G[?25hThinking...
The[?25l[?25h user[?25l[?25h wants[?25l[?25h an[?25l[?25h Arduino[?25l[?25h project[?25l[?25h to[?25l[?25h generate[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h Middle[?25l[?25h C[?25l[?25h ([?25l[?25h26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h Hz[?25l[?25h)[?25l[?25h and[?25l[?25h send[?25l[?25h it[?25l[?25h to[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h.[?25l[?25h

Key[?25l[?25h requirements[?25l[?25h:[?25l[?25h
1[?25l[?25h.[?25l[?25h  **[?25l[?25hTarget[?25l[?25h Platform[?25l[?25h:**[?25l[?25h Arduino[?25l[?25h ([?25l[?25him[?25l[?25hplied[?25l[?25h,[?25l[?25h likely[?25l[?25h AVR[?25l[?25h-based[?25l[?25h like[?25l[?25h Uno[?25l[?25h,[?25l[?25h Nano[?25l[?25h,[?25l[?25h Mega[?25l[?25h,[?25l[?25h or[?25l[?25h an[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h but[?25l[?25h standard[?25l[?25h Arduino[?25l[?25h API[?25l[?25h usually[?25l[?25h implies[?25l[?25h Uno[?25l[?25h/N[?25l[?25hano[?25l[?25h/M[?25l[?25hega[?25l[?25h unless[?25l[?25h specified[?25l[?25h.[?25l[?25h However[?25l[?25h,[?25l[?25h ESP[?25l[?25h32[?25l[?25h is[?25l[?25h very[?25l[?25h popular[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h audio[?25l[?25h.[?25l[?25h I[?25l[?25h'll[?25l[?25h stick[?25l[?25h to[?25l[?25h the[?25l[?25h standard[?25l[?25h AVR[?25l[?25h Arduino[?25l[?25h core[?25l[?25h as[?25l[?25h it[?25l[?25h's[?25l[?25h the[?25l[?25h most[?25l[?25h "[?25l[?25hgeneric[?25l[?25h"[?25l[?25h request[?25l[?25h,[?25l[?25h but[?25l[?25h I[?25l[?25h should[?25l[?25h probably[?25l[?25h mention[?25l[?25h ESP[?25l[?25h32[?25l[?25h if[?25l[?25h I[?25l[?25h want[?25l[?25h to[?25l[?25h be[?25l[?25h helpful[?25l[?25h.[?25l[?25h Actually[?25l[?25h,[?25l[?25h generating[?25l[?25h high[?25l[?25h-quality[?25l[?25h audio[?25l[?25h on[?25l[?25h an[?25l[?25h AVR[?25l[?25h is[?25l[?25h tricky[?25l[?25h due[?25l[?25h to[?25l[?25h CPU[?25l[?25h speed[?25l[?25h,[?25l[?25h but[?25l[?25h it[?25l[?25h's[?25l[?25h possible[?25l[?25h.[?25l[?25h ESP[?25l[?25h32[?25l[?25h is[?25l[?25h *[?25l[?25hmuch[?25l[?25h*[?25l[?25h better[?25l[?25h.[?25l[?25h Let[?25l[?25h's[?25l[?25h assume[?25l[?25h standard[?25l[?25h AVR[?25l[?25h ([?25l[?25hUno[?25l[?25h/N[?25l[?25hano[?25l[?25h)[?25l[?25h first[?25l[?25h,[?25l[?25h but[?25l[?25h write[?25l[?25h the[?25l[?25h code[?25l[?25h in[?25l[?25h a[?25l[?25h way[?25l[?25h that[?25l[?25h's[?25l[?25h mostly[?25l[?25h portable[?25l[?25h.[?25l[?25h Wait[?25l[?25h,[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h on[?25l[?25h AVR[?25l[?25h Uno[?25l[?25h requires[?25l[?25h specific[?25l[?25h libraries[?25l[?25h or[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h because[?25l[?25h the[?25l[?25h hardware[?25l[?25h doesn[?25l[?25h't[?25l[?25h have[?25l[?25h native[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h On[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h hardware[?25l[?25h-ac[?25l[?25hcel[?25l[?25her[?25l[?25hated[?25l[?25h.[?25l[?25h The[?25l[?25h prompt[?25l[?25h asks[?25l[?25h for[?25l[?25h an[?25l[?25h "[?25l[?25hArduino[?25l[?25h project[?25l[?25h".[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h a[?25l[?25h solution[?25l[?25h using[?25l[?25h a[?25l[?25h standard[?25l[?25h library[?25l[?25h like[?25l[?25h `[?25l[?25hT[?25l[?25hone[?25l[?25h2[?25l[?25h`[?25l[?25h or[?25l[?25h a[?25l[?25h custom[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h implementation[?25l[?25h.[?25l[?25h
    *[?25l[?25h   *[?25l[?25hSelf[?25l[?25h-cor[?25l[?25hrection[?25l[?25h:*[?25l[?25h Writing[?25l[?25h a[?25l[?25h custom[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h routine[?25l[?25h for[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h DAC[?25l[?25h on[?25l[?25h an[?25l[?25h Uno[?25l[?25h in[?25l[?25h C[?25l[?25h++[?25l[?25h is[?25l[?25h complex[?25l[?25h and[?25l[?25h error[?25l[?25h-pr[?25l[?25hone[?25l[?25h for[?25l[?25h a[?25l[?25h single[?25l[?25h prompt[?25l[?25h response[?25l[?25h.[?25l[?25h
    *[?25l[?25h   *[?25l[?25hBetter[?25l[?25h approach[?25l[?25h:*[?25l[?25h Use[?25l[?25h a[?25l[?25h library[?25l[?25h.[?25l[?25h `[?25l[?25hAudio[?25l[?25hLib[?25l[?25hs[?25l[?25h`[?25l[?25h or[?25l[?25h `[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25hClass[?25l[?25h`[?25l[?25h or[?25l[?25h just[?25l[?25h standard[?25l[?25h Arduino[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h libraries[?25l[?25h.[?25l[?25h
    *[?25l[?25h   *[?25l[?25hHardware[?25l[?25h assumption[?25l[?25h:*[?25l[?25h The[?25l[?25h user[?25l[?25h didn[?25l[?25h't[?25l[?25h specify[?25l[?25h the[?25l[?25h DAC[?25l[?25h chip[?25l[?25h ([?25l[?25hMAX[?25l[?25h98[?25l[?25h3[?25l[?25h57[?25l[?25hA[?25l[?25h,[?25l[?25h PCM[?25l[?25h5[?25l[?25h10[?25l[?25h2[?25l[?25h,[?25l[?25h ES[?25l[?25h8[?25l[?25h38[?25l[?25h8[?25l[?25h,[?25l[?25h etc[?25l[?25h.),[?25l[?25h just[?25l[?25h that[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h.[?25l[?25h
    *[?25l[?25h   *[?25l[?25hPin[?25l[?25h definition[?25l[?25h:*[?25l[?25h The[?25l[?25h user[?25l[?25h explicitly[?25l[?25h requested[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h be[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h`[?25l[?25h statements[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h look[?25l[?25h at[?25l[?25h the[?25l[?25h constraints[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h on[?25l[?25h an[?25l[?25h AVR[?25l[?25h ([?25l[?25hUno[?25l[?25h/N[?25l[?25hano[?25l[?25h).[?25l[?25h
*[?25l[?25h   Frequency[?25l[?25h:[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h Hz[?25l[?25h.[?25l[?25h
*[?25l[?25h   Resolution[?25l[?25h:[?25l[?25h 24[?25l[?25h-bit[?25l[?25h.[?25l[?25h
*[?25l[?25h   Sample[?25l[?25h Rate[?25l[?25h:[?25l[?25h Standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h is[?25l[?25h usually[?25l[?25h 44[?25l[?25h.[?25l[?25h1[?25l[?25hkHz[?25l[?25h or[?25l[?25h 48[?25l[?25hkHz[?25l[?25h.[?25l[?25h
*[?25l[?25h   CPU[?25l[?25h Limit[?25l[?25h:[?25l[?25h 16[?25l[?25hMHz[?25l[?25h.[?25l[?25h Generating[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h requires[?25l[?25h calculating[?25l[?25h samples[?25l[?25h and[?25l[?25h sending[?25l[?25h them[?25l[?25h via[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h SPI[?25l[?25h/I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h 24[?25l[?25h-bit[?25l[?25h data[?25l[?25h is[?25l[?25h huge[?25l[?25h.[?25l[?25h Transmit[?25l[?25hting[?25l[?25h 24[?25l[?25h bits[?25l[?25h +[?25l[?25h 32[?25l[?25h bits[?25l[?25h frame[?25l[?25h ([?25l[?25h1[?25l[?25h bit[?25l[?25h WS[?25l[?25h,[?25l[?25h 32[?25l[?25h bits[?25l[?25h clock[?25l[?25h)[?25l[?25h =[?25l[?25h 56[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h.[?25l[?25h At[?25l[?25h 48[?25l[?25hkHz[?25l[?25h,[?25l[?25h that[?25l[?25h's[?25l[?25h ~[?25l[?25h2[?25l[?25h.[?25l[?25h7[?25l[?25h M[?25l[?25hbit[?25l[?25h/s[?25l[?25h.[?25l[?25h The[?25l[?25h Uno[?25l[?25h *[?25l[?25hcan[?25l[?25h*[?25l[?25h just[?25l[?25h barely[?25l[?25h handle[?25l[?25h this[?25l[?25h with[?25l[?25h efficient[?25l[?25h code[?25l[?25h,[?25l[?25h but[?25l[?25h it[?25l[?25h might[?25l[?25h be[?25l[?25h chop[?25l[?25hpy[?25l[?25h or[?25l[?25h require[?25l[?25h interrupts[?25l[?25h.[?25l[?25h

However[?25l[?25h,[?25l[?25h if[?25l[?25h I[?25l[?25h use[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h native[?25l[?25h hardware[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h much[?25l[?25h easier[?25l[?25h and[?25l[?25h sounds[?25l[?25h better[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h a[?25l[?25h solution[?25l[?25h that[?25l[?25h works[?25l[?25h well[?25l[?25h.[?25l[?25h Since[?25l[?25h the[?25l[?25h user[?25l[?25h didn[?25l[?25h't[?25l[?25h specify[?25l[?25h the[?25l[?25h Arduino[?25l[?25h board[?25l[?25h,[?25l[?25h I[?25l[?25h will[?25l[?25h write[?25l[?25h the[?25l[?25h code[?25l[?25h for[?25l[?25h a[?25l[?25h standard[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h/N[?25l[?25hano[?25l[?25h but[?25l[?25h using[?25l[?25h a[?25l[?25h lightweight[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h implementation[?25l[?25h ([?25l[?25hoften[?25l[?25h used[?25l[?25h with[?25l[?25h the[?25l[?25h MAX[?25l[?25h98[?25l[?25h3[?25l[?25h57[?25l[?25hA[?25l[?25h or[?25l[?25h similar[?25l[?25h).[?25l[?25h *[?25l[?25hActually[?25l[?25h*,[?25l[?25h generating[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h on[?25l[?25h a[?25l[?25h bare[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h is[?25l[?25h really[?25l[?25h hard[?25l[?25h without[?25l[?25h overflow[?25l[?25h or[?25l[?25h massive[?25l[?25h lag[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h look[?25l[?25h at[?25l[?25h the[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h"[?25l[?25h requirement[?25l[?25h.[?25l[?25h Most[?25l[?25h hobby[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25hs[?25l[?25h are[?25l[?25h 16[?25l[?25h-bit[?25l[?25h or[?25l[?25h 24[?25l[?25h-bit[?25l[?25h.[?25l[?25h If[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h DAC[?25l[?25h,[?25l[?25h the[?25l[?25h micro[?25l[?25hcontroller[?25l[?25h needs[?25l[?25h to[?25l[?25h output[?25l[?25h 24[?25l[?25h bits[?25l[?25h of[?25l[?25h data[?25l[?25h.[?25l[?25h
Let[?25l[?25h's[?25l[?25h assume[?25l[?25h the[?25l[?25h standard[?25l[?25h `[?25l[?25hT[?25l[?25hone[?25l[?25h`[?25l[?25h library[?25l[?25h approach[?25l[?25h won[?25l[?25h't[?25l[?25h work[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h
I[?25l[?25h need[?25l[?25h to[?25l[?25h write[?25l[?25h an[?25l[?25h interrupt[?25l[?25h-driven[?25l[?25h routine[?25l[?25h.[?25l[?25h

**[?25l[?25hPlan[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  Define[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h pins[?25l[?25h ([?25l[?25hData[?25l[?25h,[?25l[?25h Clock[?25l[?25h,[?25l[?25h WS[?25l[?25h/[?25l[?25hLS[?25l[?25h).[?25l[?25h These[?25l[?25h must[?25l[?25h be[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h`[?25l[?25hed[?25l[?25h.[?25l[?25h
2[?25l[?25h.[?25l[?25h  Define[?25l[?25h the[?25l[?25h S[?25l[?25hine[?25l[?25h wave[?25l[?25h lookup[?25l[?25h table[?25l[?25h ([?25l[?25hs[?25l[?25hufficient[?25l[?25h resolution[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h).[?25l[?25h
3[?25l[?25h.[?25l[?25h  Setup[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h pins[?25l[?25h as[?25l[?25h outputs[?25l[?25h.[?25l[?25h
4[?25l[?25h.[?25l[?25h  Use[?25l[?25h Timer[?25l[?25h2[?25l[?25h interrupt[?25l[?25h to[?25l[?25h generate[?25l[?25h the[?25l[?25h samples[?25l[?25h.[?25l[?25h
5[?25l[?25h.[?25l[?25h  Inside[?25l[?25h the[?25l[?25h ISR[?25l[?25h:[?25l[?25h
    *[?25l[?25h   Update[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h index[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Fetch[?25l[?25h the[?25l[?25h 24[?25l[?25h-bit[?25l[?25h sample[?25l[?25h from[?25l[?25h the[?25l[?25h table[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Shift[?25l[?25h out[?25l[?25h the[?25l[?25h bits[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h ([?25l[?25hStart[?25l[?25h bit[?25l[?25h,[?25l[?25h 24[?25l[?25h data[?25l[?25h bits[?25l[?25h,[?25l[?25h Stop[?25l[?25h bit[?25l[?25h).[?25l[?25h Note[?25l[?25h:[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h usually[?25l[?25h sends[?25l[?25h data[?25l[?25h on[?25l[?25h the[?25l[?25h falling[?25l[?25h edge[?25l[?25h of[?25l[?25h the[?25l[?25h clock[?25l[?25h or[?25l[?25h rising[?25l[?25h edge[?25l[?25h depending[?25l[?25h on[?25l[?25h configuration[?25l[?25h.[?25l[?25h Standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h:[?25l[?25h Data[?25l[?25h starts[?25l[?25h on[?25l[?25h falling[?25l[?25h edge[?25l[?25h of[?25l[?25h WS[?25l[?25h ([?25l[?25hWord[?25l[?25h Select[?25l[?25h)[?25l[?25h while[?25l[?25h Clock[?25l[?25h is[?25l[?25h high[?25l[?25h ([?25l[?25husually[?25l[?25h),[?25l[?25h or[?25l[?25h similar[?25l[?25h.[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h be[?25l[?25h careful[?25l[?25h with[?25l[?25h the[?25l[?25h bit[?25l[?25h timing[?25l[?25h.[?25l[?25h
    *[?25l[?25h   *[?25l[?25hS[?25l[?25himpl[?25l[?25hification[?25l[?25h:*[?25l[?25h I[?25l[?25h will[?25l[?25h implement[?25l[?25h a[?25l[?25h standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h frame[?25l[?25h transmission[?25l[?25h.[?25l[?25h

**[?25l[?25hCode[?25l[?25h Structure[?25l[?25h:[?25l[?25h**[?25l[?25h
*[?25l[?25h   **[?25l[?25hConstants[?25l[?25h:**[?25l[?25h `[?25l[?25hSAMPLE[?25l[?25h_RATE[?25l[?25h`[?25l[?25h ([?25l[?25h44[?25l[?25h1[?25l[?25h00[?25l[?25h),[?25l[?25h `[?25l[?25hF[?25l[?25hREQ[?25l[?25h`[?25l[?25h ([?25l[?25h26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h),[?25l[?25h `[?25l[?25hBIT[?25l[?25h_DEPTH[?25l[?25h`[?25l[?25h ([?25l[?25h24[?25l[?25h).[?25l[?25h
*[?25l[?25h   **[?25l[?25hTable[?25l[?25h:**[?25l[?25h Generate[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h table[?25l[?25h ([?25l[?25h0[?25l[?25h-[?25l[?25h255[?25l[?25h mapped[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h range[?25l[?25h).[?25l[?25h
*[?25l[?25h   **[?25l[?25hP[?25l[?25hins[?25l[?25h:**[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_D[?25l[?25hOUT[?25l[?25h`,[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_B[?25l[?25hCLK[?25l[?25h`,[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_LR[?25l[?25hCLK[?25l[?25h`.[?25l[?25h
*[?25l[?25h   **[?25l[?25hVariables[?25l[?25h:**[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_index[?25l[?25h`,[?25l[?25h `[?25l[?25hbit[?25l[?25h_index[?25l[?25h`.[?25l[?25h
*[?25l[?25h   **[?25l[?25hISR[?25l[?25h:**[?25l[?25h `[?25l[?25htimer[?25l[?25h2[?25l[?25h_isr[?25l[?25h()`[?25l[?25h.[?25l[?25h

**[?25l[?25hRef[?25l[?25hining[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h implementation[?25l[?25h for[?25l[?25h AVR[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h2[?25l[?25hS[?25l[?25h consists[?25l[?25h of[?25l[?25h:[?25l[?25h
*[?25l[?25h   Bit[?25l[?25h Clock[?25l[?25h ([?25l[?25hB[?25l[?25hCLK[?25l[?25h):[?25l[?25h Usually[?25l[?25h 32[?25l[?25hx[?25l[?25h sample[?25l[?25h rate[?25l[?25h.[?25l[?25h
*[?25l[?25h   Word[?25l[?25h Select[?25l[?25h ([?25l[?25hLR[?25l[?25hCLK[?25l[?25h/[?25l[?25hWS[?25l[?25h):[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h channel[?25l[?25h,[?25l[?25h togg[?25l[?25hles[?25l[?25h every[?25l[?25h sample[?25l[?25h.[?25l[?25h
*[?25l[?25h   Data[?25l[?25h:[?25l[?25h 24[?25l[?25h bits[?25l[?25h per[?25l[?25h channel[?25l[?25h.[?25l[?25h

The[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h data[?25l[?25h format[?25l[?25h typically[?25l[?25h starts[?25l[?25h with[?25l[?25h a[?25l[?25h "[?25l[?25h1[?25l[?25h"[?25l[?25h ([?25l[?25hhigh[?25l[?25h),[?25l[?25h then[?25l[?25h the[?25l[?25h 24[?25l[?25h bits[?25l[?25h ([?25l[?25husually[?25l[?25h LSB[?25l[?25h first[?25l[?25h,[?25l[?25h though[?25l[?25h some[?25l[?25h D[?25l[?25h/A[?25l[?25h accepts[?25l[?25h MS[?25l[?25hB[?25l[?25h first[?25l[?25h with[?25l[?25h padding[?25l[?25h,[?25l[?25h I[?25l[?25h'll[?25l[?25h stick[?25l[?25h to[?25l[?25h LSB[?25l[?25h first[?25l[?25h which[?25l[?25h is[?25l[?25h standard[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h),[?25l[?25h then[?25l[?25h a[?25l[?25h "[?25l[?25h0[?25l[?25h"[?25l[?25h ([?25l[?25hlow[?25l[?25h)[?25l[?25h to[?25l[?25h indicate[?25l[?25h the[?25l[?25h end[?25l[?25h of[?25l[?25h the[?25l[?25h frame[?25l[?25h.[?25l[?25h
The[?25l[?25h transmission[?25l[?25h usually[?25l[?25h happens[?25l[?25h while[?25l[?25h the[?25l[?25h Clock[?25l[?25h is[?25l[?25h High[?25l[?25h or[?25l[?25h Low[?25l[?25h,[?25l[?25h and[?25l[?25h WS[?25l[?25h is[?25l[?25h Low[?25l[?25h or[?25l[?25h High[?25l[?25h.[?25l[?25h This[?25l[?25h depends[?25l[?25h on[?25l[?25h the[?25l[?25h specific[?25l[?25h DAC[?25l[?25h.[?25l[?25h
*[?25l[?25hGeneral[?25l[?25h Rule[?25l[?25h:*[?25l[?25h On[?25l[?25h the[?25l[?25h falling[?25l[?25h edge[?25l[?25h of[?25l[?25h the[?25l[?25h B[?25l[?25hCLK[?25l[?25h,[?25l[?25h the[?25l[?25h bit[?25l[?25h is[?25l[?25h sampled[?25l[?25h.[?25l[?25h This[?25l[?25h implies[?25l[?25h that[?25l[?25h the[?25l[?25h data[?25l[?25h line[?25l[?25h must[?25l[?25h be[?25l[?25h valid[?25l[?25h for[?25l[?25h a[?25l[?25h specific[?25l[?25h duration[?25l[?25h.[?25l[?25h

*[?25l[?25hLet[?25l[?25h's[?25l[?25h try[?25l[?25h a[?25l[?25h simplified[?25l[?25h approach[?25l[?25h using[?25l[?25h a[?25l[?25h library[?25l[?25h?[?25l[?25h*[?25l[?25h The[?25l[?25h user[?25l[?25h wants[?25l[?25h *[?25l[?25hme[?25l[?25h*[?25l[?25h to[?25l[?25h create[?25l[?25h the[?25l[?25h program[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h write[?25l[?25h a[?25l[?25h custom[?25l[?25h ISR[?25l[?25h.[?25l[?25h This[?25l[?25h is[?25l[?25h the[?25l[?25h most[?25l[?25h robust[?25l[?25h way[?25l[?25h to[?25l[?25h show[?25l[?25h "[?25l[?25hhow[?25l[?25h it[?25l[?25h's[?25l[?25h done[?25l[?25h"[?25l[?25h without[?25l[?25h relying[?25l[?25h on[?25l[?25h obscure[?25l[?25h libraries[?25l[?25h that[?25l[?25h might[?25l[?25h not[?25l[?25h be[?25l[?25h installed[?25l[?25h.[?25l[?25h

**[?25l[?25hCalc[?25l[?25hulation[?25l[?25h for[?25l[?25h ISR[?25l[?25h timing[?25l[?25h:[?25l[?25h**[?25l[?25h
*[?25l[?25h   Sample[?25l[?25h Rate[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h Hz[?25l[?25h.[?25l[?25h
*[?25l[?25h   B[?25l[?25hCLK[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h *[?25l[?25h 32[?25l[?25h =[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25h2[?25l[?25h MHz[?25l[?25h.[?25l[?25h
*[?25l[?25h   Timer[?25l[?25h pres[?25l[?25hcaler[?25l[?25h:[?25l[?25h For[?25l[?25h Uno[?25l[?25h ([?25l[?25h16[?25l[?25hMHz[?25l[?25h),[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h generate[?25l[?25h ~[?25l[?25h1[?25l[?25h.[?25l[?25h4[?25l[?25h MHz[?25l[?25h.[?25l[?25h 16[?25l[?25h/[?25l[?25h1[?25l[?25h =[?25l[?25h 16[?25l[?25hMHz[?25l[?25h ([?25l[?25htoo[?25l[?25h fast[?25l[?25h),[?25l[?25h 16[?25l[?25h/[?25l[?25h8[?25l[?25h =[?25l[?25h 2[?25l[?25hMHz[?25l[?25h ([?25l[?25hgood[?25l[?25h),[?25l[?25h 16[?25l[?25h/[?25l[?25h64[?25l[?25h =[?25l[?25h 250[?25l[?25hkHz[?25l[?25h ([?25l[?25htoo[?25l[?25h slow[?25l[?25h).[?25l[?25h
*[?25l[?25h   So[?25l[?25h,[?25l[?25h pres[?25l[?25hcaler[?25l[?25h 8[?25l[?25h.[?25l[?25h
*[?25l[?25h   Period[?25l[?25h =[?25l[?25h 1[?25l[?25h /[?25l[?25h ([?25l[?25h44[?25l[?25h1[?25l[?25h00[?25l[?25h *[?25l[?25h 32[?25l[?25h /[?25l[?25h 8[?25l[?25h)[?25l[?25h =[?25l[?25h 1[?25l[?25h /[?25l[?25h 110[?25l[?25h250[?25l[?25h =[?25l[?25h 9[?25l[?25h.[?25l[?25h07[?25l[?25h us[?25l[?25h.[?25l[?25h
*[?25l[?25h   This[?25l[?25h is[?25l[?25h do[?25l[?25hable[?25l[?25h on[?25l[?25h a[?25l[?25h Uno[?25l[?25h.[?25l[?25h

**[?25l[?25hThe[?25l[?25h Code[?25l[?25h Details[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  **[?25l[?25hP[?25l[?25hins[?25l[?25h:[?25l[?25h**[?25l[?25h
    *[?25l[?25h   `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_DATA[?25l[?25h 11[?25l[?25h`[?25l[?25h ([?25l[?25hM[?25l[?25hOS[?25l[?25hI[?25l[?25h)[?25l[?25h
    *[?25l[?25h   `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_CLK[?25l[?25h 13[?25l[?25h`[?25l[?25h ([?25l[?25hS[?25l[?25hCK[?25l[?25h)[?25l[?25h
    *[?25l[?25h   `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_WS[?25l[?25h 12[?25l[?25h`[?25l[?25h ([?25l[?25hSS[?25l[?25h/L[?25l[?25hR[?25l[?25hCK[?25l[?25h)[?25l[?25h
    *[?25l[?25h   *[?25l[?25hSelf[?25l[?25h-C[?25l[?25hor[?25l[?25hrection[?25l[?25h:*[?25l[?25h The[?25l[?25h prompt[?25l[?25h asks[?25l[?25h to[?25l[?25h give[?25l[?25h them[?25l[?25h as[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h`[?25l[?25h statements[?25l[?25h.[?25l[?25h I[?25l[?25h'll[?25l[?25h use[?25l[?25h logical[?25l[?25h names[?25l[?25h.[?25l[?25h

2[?25l[?25h.[?25l[?25h  **[?25l[?25hS[?25l[?25hine[?25l[?25h Table[?25l[?25h:**[?25l[?25h I[?25l[?25h need[?25l[?25h a[?25l[?25h table[?25l[?25h of[?25l[?25h 256[?25l[?25h entries[?25l[?25h ([?25l[?25hs[?25l[?25hine[?25l[?25h wave[?25l[?25h 0[?25l[?25h-[?25l[?25h255[?25l[?25h).[?25l[?25h
3[?25l[?25h.[?25l[?25h  **[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h Logic[?25l[?25h:[?25l[?25h**[?25l[?25h
    *[?25l[?25h   Standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h format[?25l[?25h:[?25l[?25h Start[?25l[?25h bit[?25l[?25h ([?25l[?25h1[?25l[?25h),[?25l[?25h Data[?25l[?25h ([?25l[?25h24[?25l[?25h bits[?25l[?25h),[?25l[?25h Stop[?25l[?25h bit[?25l[?25h ([?25l[?25h0[?25l[?25h).[?25l[?25h
    *[?25l[?25h   Usually[?25l[?25h,[?25l[?25h the[?25l[?25h data[?25l[?25h is[?25l[?25h sent[?25l[?25h LSB[?25l[?25h first[?25l[?25h.[?25l[?25h
    *[?25l[?25h   The[?25l[?25h clock[?25l[?25h cycle[?25l[?25h duration[?25l[?25h needs[?25l[?25h to[?25l[?25h be[?25l[?25h exact[?25l[?25h.[?25l[?25h
    *[?25l[?25h   I[?25l[?25h will[?25l[?25h use[?25l[?25h `[?25l[?25hT[?25l[?25hCCR[?25l[?25h2[?25l[?25hA[?25l[?25h`[?25l[?25h and[?25l[?25h `[?25l[?25hT[?25l[?25hCCR[?25l[?25h2[?25l[?25hB[?25l[?25h`[?25l[?25h for[?25l[?25h Timer[?25l[?25h 2[?25l[?25h.[?25l[?25h

**[?25l[?25hWait[?25l[?25h,[?25l[?25h is[?25l[?25h this[?25l[?25h too[?25l[?25h complex[?25l[?25h for[?25l[?25h an[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h?[?25l[?25h**[?25l[?25h
On[?25l[?25h an[?25l[?25h Uno[?25l[?25h,[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h generation[?25l[?25h requires[?25l[?25h a[?25l[?25h lot[?25l[?25h of[?25l[?25h bit[?25l[?25h-sh[?25l[?25hifting[?25l[?25h and[?25l[?25h careful[?25l[?25h timing[?25l[?25h.[?25l[?25h The[?25l[?25h ISR[?25l[?25h takes[?25l[?25h time[?25l[?25h.[?25l[?25h 24[?25l[?25h bits[?25l[?25h *[?25l[?25h 8[?25l[?25h ([?25l[?25hbyte[?25l[?25h)[?25l[?25h =[?25l[?25h 192[?25l[?25h bits[?25l[?25h of[?25l[?25h data[?25l[?25h +[?25l[?25h control[?25l[?25h bits[?25l[?25h.[?25l[?25h
If[?25l[?25h the[?25l[?25h ISR[?25l[?25h takes[?25l[?25h longer[?25l[?25h than[?25l[?25h the[?25l[?25h bit[?25l[?25h period[?25l[?25h ([?25l[?25h1[?25l[?25h/[?25l[?25h1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25hMHz[?25l[?25h â‰ˆ[?25l[?25h 0[?25l[?25h.[?25l[?25h7[?25l[?25hus[?25l[?25h),[?25l[?25h the[?25l[?25h signal[?25l[?25h will[?25l[?25h distort[?25l[?25h.[?25l[?25h
On[?25l[?25h a[?25l[?25h Uno[?25l[?25h,[?25l[?25h an[?25l[?25h ISR[?25l[?25h is[?25l[?25h relatively[?25l[?25h slow[?25l[?25h.[?25l[?25h Doing[?25l[?25h 8[?25l[?25h-bit[?25l[?25h shifting[?25l[?25h is[?25l[?25h fine[?25l[?25h,[?25l[?25h but[?25l[?25h doing[?25l[?25h 24[?25l[?25h-bit[?25l[?25h shifting[?25l[?25h might[?25l[?25h push[?25l[?25h it[?25l[?25h.[?25l[?25h
However[?25l[?25h,[?25l[?25h it[?25l[?25h is[?25l[?25h a[?25l[?25h classic[?25l[?25h Arduino[?25l[?25h project[?25l[?25h ([?25l[?25hoften[?25l[?25h done[?25l[?25h with[?25l[?25h the[?25l[?25h MAX[?25l[?25h98[?25l[?25h3[?25l[?25h57[?25l[?25hA[?25l[?25h or[?25l[?25h similar[?25l[?25h).[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h code[?25l[?25h with[?25l[?25h the[?25l[?25h assumption[?25l[?25h of[?25l[?25h an[?25l[?25h AVR[?25l[?25h board[?25l[?25h ([?25l[?25hUno[?25l[?25h/N[?25l[?25hano[?25l[?25h).[?25l[?25h

*[?25l[?25hAlternative[?25l[?25h:*[?25l[?25h ESP[?25l[?25h32[?25l[?25h is[?25l[?25h the[?25l[?25h "[?25l[?25hcorrect[?25l[?25h"[?25l[?25h answer[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h,[?25l[?25h but[?25l[?25h "[?25l[?25hArduino[?25l[?25h"[?25l[?25h usually[?25l[?25h implies[?25l[?25h the[?25l[?25h Uno[?25l[?25h/N[?25l[?25hano[?25l[?25h context[?25l[?25h in[?25l[?25h homework[?25l[?25h/int[?25l[?25herview[?25l[?25h questions[?25l[?25h unless[?25l[?25h specified[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h Uno[?25l[?25h solution[?25l[?25h but[?25l[?25h add[?25l[?25h a[?25l[?25h note[?25l[?25h that[?25l[?25h ESP[?25l[?25h32[?25l[?25h is[?25l[?25h better[?25l[?25h.[?25l[?25h Actually[?25l[?25h,[?25l[?25h sticking[?25l[?25h to[?25l[?25h the[?25l[?25h Uno[?25l[?25h solution[?25l[?25h demonstrates[?25l[?25h the[?25l[?25h logic[?25l[?25h better[?25l[?25h.[?25l[?25h

**[?25l[?25hLet[?25l[?25h's[?25l[?25h refine[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h logic[?25l[?25h.[?25l[?25h**[?25l[?25h
Standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h ([?25l[?25hSony[?25l[?25h/[?25l[?25hPhil[?25l[?25hips[?25l[?25h):[?25l[?25h
B[?25l[?25hCLK[?25l[?25h =[?25l[?25h 32[?25l[?25h *[?25l[?25h Fs[?25l[?25h.[?25l[?25h
WS[?25l[?25h =[?25l[?25h Fs[?25l[?25h /[?25l[?25h 2[?25l[?25h.[?25l[?25h
Data[?25l[?25h comes[?25l[?25h in[?25l[?25h on[?25l[?25h the[?25l[?25h falling[?25l[?25h edge[?25l[?25h of[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h

The[?25l[?25h "[?25l[?25hframe[?25l[?25h"[?25l[?25h usually[?25l[?25h looks[?25l[?25h like[?25l[?25h this[?25l[?25h ([?25l[?25hper[?25l[?25h sample[?25l[?25h):[?25l[?25h
1[?25l[?25h.[?25l[?25h Start[?25l[?25h Bit[?25l[?25h ([?25l[?25hHigh[?25l[?25h)[?25l[?25h
2[?25l[?25h.[?25l[?25h 24[?25l[?25h Data[?25l[?25h Bits[?25l[?25h ([?25l[?25hLS[?25l[?25hB[?25l[?25h first[?25l[?25h)[?25l[?25h
3[?25l[?25h.[?25l[?25h Stop[?25l[?25h Bit[?25l[?25h ([?25l[?25hLow[?25l[?25h)[?25l[?25h

The[?25l[?25h sequence[?25l[?25h:[?25l[?25h
1[?25l[?25h.[?25l[?25h Set[?25l[?25h data[?25l[?25h line[?25l[?25h.[?25l[?25h
2[?25l[?25h.[?25l[?25h Toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
3[?25l[?25h.[?25l[?25h Repeat[?25l[?25h 24[?25l[?25h times[?25l[?25h.[?25l[?25h
4[?25l[?25h.[?25l[?25h Toggle[?25l[?25h WS[?25l[?25h.[?25l[?25h
5[?25l[?25h.[?25l[?25h Repeat[?25l[?25h for[?25l[?25h left[?25l[?25h/right[?25l[?25h channel[?25l[?25h.[?25l[?25h

**[?25l[?25hCode[?25l[?25h Draft[?25l[?25h ([?25l[?25hM[?25l[?25hental[?25l[?25h):[?25l[?25h**[?25l[?25h
```[?25l[?25hcpp[?25l[?25h
volatile[?25l[?25h uint[?25l[?25h16[?25l[?25h_t[?25l[?25h sample[?25l[?25h_index[?25l[?25h;[?25l[?25h
volatile[?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h bit[?25l[?25h_index[?25l[?25h;[?25l[?25h
volatile[?25l[?25h uint[?25l[?25h32[?25l[?25h_t[?25l[?25h sample[?25l[?25h_buffer[?25l[?25h;[?25l[?25h //[?25l[?25h 24[?25l[?25h-bit[?25l[?25h value[?25l[?25h
volatile[?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h lr[?25l[?25hclk[?25l[?25h_state[?25l[?25h =[?25l[?25h 0[?25l[?25h;[?25l[?25h //[?25l[?25h 0[?25l[?25h =[?25l[?25h Left[?25l[?25h,[?25l[?25h 1[?25l[?25h =[?25l[?25h Right[?25l[?25h

ISR[?25l[?25h(T[?25l[?25hIMER[?25l[?25h2[?25l[?25h_COM[?25l[?25hPA[?25l[?25h_vect[?25l[?25h)[?25l[?25h {[?25l[?25h
    //[?25l[?25h Calculate[?25l[?25h next[?25l[?25h sample[?25l[?25h
    //[?25l[?25h Shift[?25l[?25h out[?25l[?25h bits[?25l[?25h
    //[?25l[?25h Toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h
    //[?25l[?25h Handle[?25l[?25h WS[?25l[?25h
}[?25l[?25h
``[?25l[?25h`[?25l[?25h
This[?25l[?25h is[?25l[?25h complex[?25l[?25h to[?25l[?25h write[?25l[?25h from[?25l[?25h scratch[?25l[?25h without[?25l[?25h an[?25l[?25h osc[?25l[?25hillos[?25l[?25hcope[?25l[?25h to[?25l[?25h tune[?25l[?25h the[?25l[?25h delays[?25l[?25h,[?25l[?25h but[?25l[?25h I[?25l[?25h can[?25l[?25h approximate[?25l[?25h the[?25l[?25h timing[?25l[?25h.[?25l[?25h
Using[?25l[?25h `[?25l[?25hdigital[?25l[?25hWrite[?25l[?25h`[?25l[?25h inside[?25l[?25h an[?25l[?25h ISR[?25l[?25h is[?25l[?25h slow[?25l[?25h.[?25l[?25h I[?25l[?25h should[?25l[?25h use[?25l[?25h direct[?25l[?25h port[?25l[?25h manipulation[?25l[?25h (`[?25l[?25hPORT[?25l[?25hB[?25l[?25h`,[?25l[?25h etc[?25l[?25h.)[?25l[?25h for[?25l[?25h speed[?25l[?25h.[?25l[?25h
Arduino[?25l[?25h Uno[?25l[?25h pins[?25l[?25h:[?25l[?25h
B[?25l[?25hCLK[?25l[?25h ([?25l[?25h13[?25l[?25h)[?25l[?25h ->[?25l[?25h PORT[?25l[?25hB[?25l[?25h bit[?25l[?25h 5[?25l[?25h
WS[?25l[?25h ([?25l[?25h12[?25l[?25h)[?25l[?25h ->[?25l[?25h PORT[?25l[?25hB[?25l[?25h bit[?25l[?25h 4[?25l[?25h
DATA[?25l[?25h ([?25l[?25h11[?25l[?25h)[?25l[?25h ->[?25l[?25h PORT[?25l[?25hB[?25l[?25h bit[?25l[?25h 3[?25l[?25h

Wait[?25l[?25h,[?25l[?25h pin[?25l[?25h 11[?25l[?25h,[?25l[?25h 12[?25l[?25h,[?25l[?25h 13[?25l[?25h are[?25l[?25h on[?25l[?25h Port[?25l[?25h B[?25l[?25h.[?25l[?25h
Pin[?25l[?25h 13[?25l[?25h is[?25l[?25h B[?25l[?25h5[?25l[?25h.[?25l[?25h Pin[?25l[?25h 12[?25l[?25h is[?25l[?25h B[?25l[?25h4[?25l[?25h.[?25l[?25h Pin[?25l[?25h 11[?25l[?25h is[?25l[?25h B[?25l[?25h3[?25l[?25h.[?25l[?25h
B[?25l[?25h0[?25l[?25h and[?25l[?25h B[?25l[?25h1[?25l[?25h are[?25l[?25h interrupts[?25l[?25h,[?25l[?25h B[?25l[?25h2[?25l[?25h is[?25l[?25h T[?25l[?25h0[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h configure[?25l[?25h Timer[?25l[?25h 2[?25l[?25h to[?25l[?25h interrupt[?25l[?25h at[?25l[?25h 1[?25l[?25h/[?25l[?25h8[?25l[?25hth[?25l[?25h of[?25l[?25h the[?25l[?25h B[?25l[?25hCLK[?25l[?25h rate[?25l[?25h?[?25l[?25h No[?25l[?25h,[?25l[?25h I[?25l[?25h need[?25l[?25h the[?25l[?25h interrupt[?25l[?25h to[?25l[?25h fire[?25l[?25h often[?25l[?25h enough[?25l[?25h to[?25l[?25h handle[?25l[?25h the[?25l[?25h bit[?25l[?25h timing[?25l[?25h.[?25l[?25h
Actually[?25l[?25h,[?25l[?25h if[?25l[?25h I[?25l[?25h set[?25l[?25h the[?25l[?25h timer[?25l[?25h to[?25l[?25h the[?25l[?25h exact[?25l[?25h B[?25l[?25hCLK[?25l[?25h frequency[?25l[?25h ([?25l[?25h1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25hMHz[?25l[?25h),[?25l[?25h I[?25l[?25h can[?25l[?25h't[?25l[?25h do[?25l[?25h it[?25l[?25h because[?25l[?25h the[?25l[?25h ISR[?25l[?25h overhead[?25l[?25h takes[?25l[?25h longer[?25l[?25h than[?25l[?25h 0[?25l[?25h.[?25l[?25h7[?25l[?25hus[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h use[?25l[?25h the[?25l[?25h "[?25l[?25hTimer[?25l[?25h Interrupt[?25l[?25h for[?25l[?25h Audio[?25l[?25h"[?25l[?25h technique[?25l[?25h.[?25l[?25h
Pres[?25l[?25hcaler[?25l[?25h 8[?25l[?25h gives[?25l[?25h 2[?25l[?25hMHz[?25l[?25h.[?25l[?25h
Interrupt[?25l[?25h every[?25l[?25h 1[?25l[?25h/[?25l[?25h2[?25l[?25hM[?25l[?25h =[?25l[?25h 0[?25l[?25h.[?25l[?25h5[?25l[?25hus[?25l[?25h.[?25l[?25h
This[?25l[?25h allows[?25l[?25h the[?25l[?25h ISR[?25l[?25h to[?25l[?25h toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h and[?25l[?25h maybe[?25l[?25h do[?25l[?25h some[?25l[?25h data[?25l[?25h shifting[?25l[?25h.[?25l[?25h
Actually[?25l[?25h,[?25l[?25h standard[?25l[?25h technique[?25l[?25h:[?25l[?25h B[?25l[?25hCLK[?25l[?25h is[?25l[?25h generated[?25l[?25h by[?25l[?25h hardware[?25l[?25h or[?25l[?25h a[?25l[?25h slower[?25l[?25h ISR[?25l[?25h.[?25l[?25h
Let[?25l[?25h's[?25l[?25h use[?25l[?25h the[?25l[?25h standard[?25l[?25h "[?25l[?25hTimer[?25l[?25h 2[?25l[?25h overflow[?25l[?25h"[?25l[?25h method[?25l[?25h.[?25l[?25h
If[?25l[?25h I[?25l[?25h set[?25l[?25h Timer[?25l[?25h 2[?25l[?25h for[?25l[?25h 2[?25l[?25hMHz[?25l[?25h ([?25l[?25hpres[?25l[?25hcaler[?25l[?25h 8[?25l[?25h),[?25l[?25h I[?25l[?25h can[?25l[?25h toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h and[?25l[?25h shift[?25l[?25h data[?25l[?25h in[?25l[?25h the[?25l[?25h ISR[?25l[?25h.[?25l[?25h

**[?25l[?25hLet[?25l[?25h's[?25l[?25h try[?25l[?25h a[?25l[?25h slightly[?25l[?25h easier[?25l[?25h path[?25l[?25h for[?25l[?25h the[?25l[?25h user[?25l[?25h:[?25l[?25h**[?25l[?25h
The[?25l[?25h `[?25l[?25hT[?25l[?25hone[?25l[?25h2[?25l[?25h`[?25l[?25h library[?25l[?25h is[?25l[?25h popular[?25l[?25h,[?25l[?25h but[?25l[?25h it[?25l[?25h doesn[?25l[?25h't[?25l[?25h output[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h
There[?25l[?25h is[?25l[?25h a[?25l[?25h library[?25l[?25h called[?25l[?25h `[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h`[?25l[?25h on[?25l[?25h Arduino[?25l[?25h Playground[?25l[?25h ([?25l[?25hPaul[?25l[?25h Stoff[?25l[?25hreg[?25l[?25hen[?25l[?25h).[?25l[?25h
However[?25l[?25h,[?25l[?25h writing[?25l[?25h raw[?25l[?25h C[?25l[?25h++[?25l[?25h is[?25l[?25h better[?25l[?25h.[?25l[?25h

**[?25l[?25hRe[?25l[?25hvised[?25l[?25h Plan[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h a[?25l[?25h solution[?25l[?25h optimized[?25l[?25h for[?25l[?25h an[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h ([?25l[?25hor[?25l[?25h Nano[?25l[?25h)[?25l[?25h using[?25l[?25h direct[?25l[?25h port[?25l[?25h manipulation[?25l[?25h in[?25l[?25h an[?25l[?25h ISR[?25l[?25h.[?25l[?25h This[?25l[?25h is[?25l[?25h the[?25l[?25h "[?25l[?25hhard[?25l[?25hcore[?25l[?25h"[?25l[?25h way[?25l[?25h but[?25l[?25h fits[?25l[?25h the[?25l[?25h "[?25l[?25hcreate[?25l[?25h a[?25l[?25h program[?25l[?25h"[?25l[?25h request[?25l[?25h best[?25l[?25h.[?25l[?25h

**[?25l[?25hPin[?25l[?25h Definitions[?25l[?25h:[?25l[?25h**[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_DATA[?25l[?25h 11[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 13[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_WS[?25l[?25h 12[?25l[?25h`[?25l[?25h

**[?25l[?25hThe[?25l[?25h Code[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  Setup[?25l[?25h:[?25l[?25h Set[?25l[?25h pins[?25l[?25h as[?25l[?25h output[?25l[?25h.[?25l[?25h
2[?25l[?25h.[?25l[?25h  Timer[?25l[?25h 2[?25l[?25h:[?25l[?25h C[?25l[?25hTC[?25l[?25h mode[?25l[?25h.[?25l[?25h Frequency[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25hHz[?25l[?25h ([?25l[?25happrox[?25l[?25h).[?25l[?25h
3[?25l[?25h.[?25l[?25h  ISR[?25l[?25h:[?25l[?25h Handle[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h frame[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Since[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h requires[?25l[?25h precise[?25l[?25h timing[?25l[?25h,[?25l[?25h and[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25h MHz[?25l[?25h is[?25l[?25h very[?25l[?25h fast[?25l[?25h for[?25l[?25h a[?25l[?25h bare[?25l[?25h AVR[?25l[?25h to[?25l[?25h generate[?25l[?25h bit[?25l[?25h-by[?25l[?25h-bit[?25l[?25h in[?25l[?25h software[?25l[?25h without[?25l[?25h overflow[?25l[?25h,[?25l[?25h I[?25l[?25h will[?25l[?25h assume[?25l[?25h a[?25l[?25h slightly[?25l[?25h lower[?25l[?25h sample[?25l[?25h rate[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25hHz[?25l[?25h is[?25l[?25h standard[?25l[?25h,[?25l[?25h but[?25l[?25h maybe[?25l[?25h 44[?25l[?25h.[?25l[?25h1[?25l[?25hk[?25l[?25h is[?25l[?25h hard[?25l[?25h).[?25l[?25h
    *[?25l[?25h   Actually[?25l[?25h,[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25hMHz[?25l[?25h is[?25l[?25h do[?25l[?25hable[?25l[?25h if[?25l[?25h we[?25l[?25h use[?25l[?25h `[?25l[?25hPORT[?25l[?25hB[?25l[?25h`[?25l[?25h writes[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Logic[?25l[?25h:[?25l[?25h We[?25l[?25h need[?25l[?25h to[?25l[?25h shift[?25l[?25h out[?25l[?25h 24[?25l[?25h bits[?25l[?25h +[?25l[?25h 1[?25l[?25h start[?25l[?25h +[?25l[?25h 1[?25l[?25h stop[?25l[?25h =[?25l[?25h 26[?25l[?25h bits[?25l[?25h total[?25l[?25h.[?25l[?25h
    *[?25l[?25h   26[?25l[?25h /[?25l[?25h ([?25l[?25h1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25hMHz[?25l[?25h /[?25l[?25h 8[?25l[?25h)[?25l[?25h =[?25l[?25h ~[?25l[?25h150[?25l[?25h ticks[?25l[?25h.[?25l[?25h
    *[?25l[?25h   It[?25l[?25h might[?25l[?25h be[?25l[?25h tight[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h look[?25l[?25h at[?25l[?25h the[?25l[?25h specific[?25l[?25h requirement[?25l[?25h:[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h".[?25l[?25h
The[?25l[?25h DAC[?25l[?25h expects[?25l[?25h 24[?25l[?25h bits[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h implement[?25l[?25h a[?25l[?25h "[?25l[?25hpseudo[?25l[?25h-code[?25l[?25h"[?25l[?25h logic[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h shift[?25l[?25h in[?25l[?25h the[?25l[?25h ISR[?25l[?25h.[?25l[?25h

**[?25l[?25hWait[?25l[?25h,[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h on[?25l[?25h 8[?25l[?25h-bit[?25l[?25h micro[?25l[?25hcontroller[?25l[?25h is[?25l[?25h notoriously[?25l[?25h difficult[?25l[?25h.[?25l[?25h**[?25l[?25h
The[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h is[?25l[?25h an[?25l[?25h 8[?25l[?25h-bit[?25l[?25h processor[?25l[?25h.[?25l[?25h 24[?25l[?25h-bit[?25l[?25h shifts[?25l[?25h require[?25l[?25h multiple[?25l[?25h registers[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h a[?25l[?25h solution[?25l[?25h that[?25l[?25h uses[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h because[?25l[?25h it[?25l[?25h handles[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h n[?25l[?25hatively[?25l[?25h and[?25l[?25h is[?25l[?25h still[?25l[?25h an[?25l[?25h Arduino[?25l[?25h board[?25l[?25h.[?25l[?25h The[?25l[?25h code[?25l[?25h for[?25l[?25h ESP[?25l[?25h32[?25l[?25h is[?25l[?25h cleaner[?25l[?25h and[?25l[?25h the[?25l[?25h audio[?25l[?25h quality[?25l[?25h is[?25l[?25h actual[?25l[?25h 24[?25l[?25h-bit[?25l[?25h ([?25l[?25hnot[?25l[?25h truncated[?25l[?25h 8[?25l[?25h-bit[?25l[?25h).[?25l[?25h
However[?25l[?25h,[?25l[?25h if[?25l[?25h I[?25l[?25h use[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h the[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h`[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h are[?25l[?25h usually[?25l[?25h `[?25l[?25hGPIO[?25l[?25h_NUM[?25l[?25h_[?25l[?25h26[?25l[?25h`[?25l[?25h etc[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h valid[?25l[?25h.[?25l[?25h
B[?25l[?25hUT[?25l[?25h,[?25l[?25h if[?25l[?25h the[?25l[?25h user[?25l[?25h specifically[?25l[?25h asked[?25l[?25h for[?25l[?25h an[?25l[?25h Arduino[?25l[?25h project[?25l[?25h ([?25l[?25hgeneric[?25l[?25h),[?25l[?25h and[?25l[?25h didn[?25l[?25h't[?25l[?25h specify[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h they[?25l[?25h might[?25l[?25h have[?25l[?25h an[?25l[?25h Uno[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h **[?25l[?25hUno[?25l[?25h solution[?25l[?25h**[?25l[?25h because[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h common[?25l[?25h homework[?25l[?25h/project[?25l[?25h challenge[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h assume[?25l[?25h the[?25l[?25h user[?25l[?25h has[?25l[?25h the[?25l[?25h hardware[?25l[?25h ([?25l[?25hDAC[?25l[?25h).[?25l[?25h
I[?25l[?25h will[?25l[?25h make[?25l[?25h the[?25l[?25h code[?25l[?25h efficient[?25l[?25h.[?25l[?25h

**[?25l[?25hCode[?25l[?25h Logic[?25l[?25h for[?25l[?25h Uno[?25l[?25h:[?25l[?25h**[?25l[?25h
*[?25l[?25h   Use[?25l[?25h Timer[?25l[?25h 2[?25l[?25h to[?25l[?25h drive[?25l[?25h the[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
*[?25l[?25h   Set[?25l[?25h Timer[?25l[?25h 2[?25l[?25h pres[?25l[?25hcaler[?25l[?25h to[?25l[?25h 8[?25l[?25h.[?25l[?25h
*[?25l[?25h   Set[?25l[?25h Compare[?25l[?25h Match[?25l[?25h to[?25l[?25h half[?25l[?25h the[?25l[?25h B[?25l[?25hCLK[?25l[?25h frequency[?25l[?25h?[?25l[?25h No[?25l[?25h.[?25l[?25h
*[?25l[?25h   Set[?25l[?25h Compare[?25l[?25h Match[?25l[?25h to[?25l[?25h generate[?25l[?25h an[?25l[?25h interrupt[?25l[?25h every[?25l[?25h ~[?25l[?25h0[?25l[?25h.[?25l[?25h4[?25l[?25hus[?25l[?25h.[?25l[?25h
*[?25l[?25h   Inside[?25l[?25h ISR[?25l[?25h:[?25l[?25h
    *[?25l[?25h   Toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Shift[?25l[?25h out[?25l[?25h a[?25l[?25h bit[?25l[?25h from[?25l[?25h the[?25l[?25h current[?25l[?25h sample[?25l[?25h.[?25l[?25h
    *[?25l[?25h   Keep[?25l[?25h track[?25l[?25h of[?25l[?25h which[?25l[?25h bit[?25l[?25h ([?25l[?25h0[?25l[?25h-[?25l[?25h24[?25l[?25h).[?25l[?25h
    *[?25l[?25h   Handle[?25l[?25h WS[?25l[?25h togg[?25l[?25hling[?25l[?25h at[?25l[?25h the[?25l[?25h end[?25l[?25h of[?25l[?25h the[?25l[?25h frame[?25l[?25h.[?25l[?25h

**[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h Format[?25l[?25h ([?25l[?25hLS[?25l[?25hB[?25l[?25h First[?25l[?25h):[?25l[?25h**[?25l[?25h
Frame[?25l[?25h:[?25l[?25h
1[?25l[?25h ([?25l[?25hStart[?25l[?25h)[?25l[?25h ->[?25l[?25h 24[?25l[?25h bits[?25l[?25h data[?25l[?25h ->[?25l[?25h 0[?25l[?25h ([?25l[?25hStop[?25l[?25h)[?25l[?25h
Data[?25l[?25h starts[?25l[?25h when[?25l[?25h WS[?25l[?25h=[?25l[?25h0[?25l[?25h ([?25l[?25hLeft[?25l[?25h channel[?25l[?25h).[?25l[?25h
WS[?25l[?25h togg[?25l[?25hles[?25l[?25h every[?25l[?25h 32[?25l[?25h B[?25l[?25hCLK[?25l[?25h cycles[?25l[?25h.[?25l[?25h

**[?25l[?25hSample[?25l[?25h Generation[?25l[?25h:[?25l[?25h**[?25l[?25h
Use[?25l[?25h a[?25l[?25h sine[?25l[?25h lookup[?25l[?25h table[?25l[?25h.[?25l[?25h
`[?25l[?25huint[?25l[?25h16[?25l[?25h_t[?25l[?25h sine[?25l[?25h_table[?25l[?25h[[?25l[?25h256[?25l[?25h][?25l[?25h =[?25l[?25h {[?25l[?25h ...[?25l[?25h };[?25l[?25h`[?25l[?25h

**[?25l[?25hOpt[?25l[?25himization[?25l[?25h:[?25l[?25h**[?25l[?25h
To[?25l[?25h ensure[?25l[?25h the[?25l[?25h code[?25l[?25h works[?25l[?25h,[?25l[?25h I[?25l[?25h will[?25l[?25h use[?25l[?25h a[?25l[?25h slightly[?25l[?25h lower[?25l[?25h sample[?25l[?25h rate[?25l[?25h if[?25l[?25h needed[?25l[?25h,[?25l[?25h or[?25l[?25h just[?25l[?25h try[?25l[?25h to[?25l[?25h hit[?25l[?25h 44[?25l[?25h.[?25l[?25h1[?25l[?25hkHz[?25l[?25h.[?25l[?25h
44[?25l[?25h1[?25l[?25h00[?25l[?25h *[?25l[?25h 32[?25l[?25h =[?25l[?25h 1[?25l[?25h,[?25l[?25h4[?25l[?25h11[?25l[?25h,[?25l[?25h200[?25l[?25h Hz[?25l[?25h.[?25l[?25h
16[?25l[?25hMHz[?25l[?25h /[?25l[?25h 8[?25l[?25h =[?25l[?25h 2[?25l[?25hMHz[?25l[?25h.[?25l[?25h 2[?25l[?25hMHz[?25l[?25h /[?25l[?25h 1[?25l[?25h,[?25l[?25h4[?25l[?25h11[?25l[?25h,[?25l[?25h200[?25l[?25h â‰ˆ[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h ticks[?25l[?25h per[?25l[?25h bit[?25l[?25h.[?25l[?25h This[?25l[?25h is[?25l[?25h risky[?25l[?25h.[?25l[?25h
Maybe[?25l[?25h pres[?25l[?25hcaler[?25l[?25h 64[?25l[?25h?[?25l[?25h 16[?25l[?25hMHz[?25l[?25h /[?25l[?25h 64[?25l[?25h =[?25l[?25h 250[?25l[?25hkHz[?25l[?25h.[?25l[?25h 250[?25l[?25hkHz[?25l[?25h /[?25l[?25h 1[?25l[?25h.[?25l[?25h41[?25l[?25hMHz[?25l[?25h =[?25l[?25h ~[?25l[?25h4[?25l[?25h ticks[?25l[?25h per[?25l[?25h bit[?25l[?25h.[?25l[?25h Sa[?25l[?25hfer[?25l[?25h.[?25l[?25h

**[?25l[?25hThe[?25l[?25h Output[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h will[?25l[?25h write[?25l[?25h the[?25l[?25h complete[?25l[?25h `.[?25l[?25hino[?25l[?25h`[?25l[?25h file[?25l[?25h content[?25l[?25h.[?25l[?25h
I[?25l[?25h need[?25l[?25h to[?25l[?25h include[?25l[?25h a[?25l[?25h sine[?25l[?25h table[?25l[?25h.[?25l[?25h

**[?25l[?25hS[?25l[?25hine[?25l[?25h Table[?25l[?25h Generation[?25l[?25h:[?25l[?25h**[?25l[?25h
Middle[?25l[?25h C[?25l[?25h =[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h Hz[?25l[?25h.[?25l[?25h
Table[?25l[?25h size[?25l[?25h?[?25l[?25h 256[?25l[?25h entries[?25l[?25h is[?25l[?25h enough[?25l[?25h for[?25l[?25h 4[?25l[?25h cycles[?25l[?25h.[?25l[?25h
Period[?25l[?25h of[?25l[?25h 26[?25l[?25h1[?25l[?25hHz[?25l[?25h in[?25l[?25h 44[?25l[?25h.[?25l[?25h1[?25l[?25hkHz[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h /[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h â‰ˆ[?25l[?25h 168[?25l[?25h.[?25l[?25h4[?25l[?25h samples[?25l[?25h.[?25l[?25h
If[?25l[?25h I[?25l[?25h have[?25l[?25h 256[?25l[?25h entries[?25l[?25h in[?25l[?25h the[?25l[?25h table[?25l[?25h,[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h increment[?25l[?25h the[?25l[?25h index[?25l[?25h by[?25l[?25h `[?25l[?25h256[?25l[?25h /[?25l[?25h 168[?25l[?25h.[?25l[?25h4[?25l[?25h â‰ˆ[?25l[?25h 1[?25l[?25h.[?25l[?25h52[?25l[?25h`.[?25l[?25h
Floating[?25l[?25h point[?25l[?25h math[?25l[?25h in[?25l[?25h ISR[?25l[?25h is[?25l[?25h bad[?25l[?25h.[?25l[?25h
I[?25l[?25h should[?25l[?25h just[?25l[?25h use[?25l[?25h a[?25l[?25h fixed[?25l[?25h size[?25l[?25h table[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h 512[?25l[?25h or[?25l[?25h 102[?25l[?25h4[?25l[?25h)[?25l[?25h and[?25l[?25h step[?25l[?25h by[?25l[?25h `[?25l[?25hTable[?25l[?25hSize[?25l[?25h /[?25l[?25h ([?25l[?25hSample[?25l[?25hRate[?25l[?25h /[?25l[?25h F[?25l[?25hreq[?25l[?25h)[?25l[?25h`.[?25l[?25h
Or[?25l[?25h,[?25l[?25h simpler[?25l[?25h:[?25l[?25h Just[?25l[?25h use[?25l[?25h the[?25l[?25h table[?25l[?25h for[?25l[?25h a[?25l[?25h waveform[?25l[?25h and[?25l[?25h loop[?25l[?25h through[?25l[?25h it[?25l[?25h.[?25l[?25h
`[?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h phase[?25l[?25h =[?25l[?25h 0[?25l[?25h;[?25l[?25h`[?25l[?25h
`[?25l[?25hvalue[?25l[?25h =[?25l[?25h sine[?25l[?25h[[?25l[?25hphase[?25l[?25h];[?25l[?25h`[?25l[?25h
`[?25l[?25hphase[?25l[?25h +=[?25l[?25h ([?25l[?25h256[?25l[?25h *[?25l[?25h 26[?25l[?25h1[?25l[?25h)[?25l[?25h /[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h;[?25l[?25h`[?25l[?25h
To[?25l[?25h keep[?25l[?25h it[?25l[?25h simple[?25l[?25h for[?25l[?25h the[?25l[?25h user[?25l[?25h,[?25l[?25h I[?25l[?25h will[?25l[?25h generate[?25l[?25h a[?25l[?25h fixed[?25l[?25h 256[?25l[?25h-entry[?25l[?25h sine[?25l[?25h wave[?25l[?25h and[?25l[?25h step[?25l[?25h through[?25l[?25h it[?25l[?25h.[?25l[?25h

**[?25l[?25hAddress[?25l[?25hing[?25l[?25h the[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h"[?25l[?25h requirement[?25l[?25h:[?25l[?25h**[?25l[?25h
The[?25l[?25h DAC[?25l[?25h expects[?25l[?25h 24[?25l[?25h bits[?25l[?25h.[?25l[?25h
On[?25l[?25h an[?25l[?25h Uno[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h't[?25l[?25h output[?25l[?25h 24[?25l[?25h bits[?25l[?25h in[?25l[?25h one[?25l[?25h write[?25l[?25h.[?25l[?25h We[?25l[?25h have[?25l[?25h to[?25l[?25h shift[?25l[?25h them[?25l[?25h out[?25l[?25h.[?25l[?25h
The[?25l[?25h `[?25l[?25hsample[?25l[?25h_buffer[?25l[?25h`[?25l[?25h must[?25l[?25h be[?25l[?25h 24[?25l[?25h bits[?25l[?25h.[?25l[?25h

**[?25l[?25hRef[?25l[?25hining[?25l[?25h the[?25l[?25h Pin[?25l[?25h Definitions[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h'll[?25l[?25h use[?25l[?25h standard[?25l[?25h pin[?25l[?25h numbers[?25l[?25h:[?25l[?25h 11[?25l[?25h,[?25l[?25h 12[?25l[?25h,[?25l[?25h 13[?25l[?25h.[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_DATA[?25l[?25h 11[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_WS[?25l[?25h 12[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 13[?25l[?25h`[?25l[?25h

**[?25l[?25hFinal[?25l[?25h Code[?25l[?25h Structure[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  Includes[?25l[?25h.[?25l[?25h
2[?25l[?25h.[?25l[?25h  Definitions[?25l[?25h ([?25l[?25hP[?25l[?25hins[?25l[?25h,[?25l[?25h Sample[?25l[?25hRate[?25l[?25h,[?25l[?25h Wave[?25l[?25h F[?25l[?25hreq[?25l[?25h).[?25l[?25h
3[?25l[?25h.[?25l[?25h  Global[?25l[?25h variables[?25l[?25h ([?25l[?25hTimer[?25l[?25h registers[?25l[?25h,[?25l[?25h S[?25l[?25hine[?25l[?25h table[?25l[?25h,[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h state[?25l[?25h).[?25l[?25h
4[?25l[?25h.[?25l[?25h  `[?25l[?25hsetup[?25l[?25h()[?25l[?25h`:[?25l[?25h Init[?25l[?25h pins[?25l[?25h,[?25l[?25h init[?25l[?25h Timer[?25l[?25h.[?25l[?25h
5[?25l[?25h.[?25l[?25h  `[?25l[?25hloop[?25l[?25h()[?25l[?25h`:[?25l[?25h Nothing[?25l[?25h needed[?25l[?25h.[?25l[?25h
6[?25l[?25h.[?25l[?25h  `[?25l[?25hISR[?25l[?25h`:[?25l[?25h The[?25l[?25h audio[?25l[?25h core[?25l[?25h.[?25l[?25h

**[?25l[?25hOne[?25l[?25h critical[?25l[?25h detail[?25l[?25h:[?25l[?25h**[?25l[?25h
Standard[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h has[?25l[?25h a[?25l[?25h "[?25l[?25hpre[?25l[?25h-[?25l[?25hemption[?25l[?25h"[?25l[?25h or[?25l[?25h "[?25l[?25hpre[?25l[?25h-fill[?25l[?25h"[?25l[?25h issue[?25l[?25h.[?25l[?25h The[?25l[?25h ISR[?25l[?25h needs[?25l[?25h to[?25l[?25h fill[?25l[?25h a[?25l[?25h buffer[?25l[?25h before[?25l[?25h audio[?25l[?25h starts[?25l[?25h.[?25l[?25h I[?25l[?25h'll[?25l[?25h skip[?25l[?25h the[?25l[?25h complex[?25l[?25h buffer[?25l[?25h management[?25l[?25h for[?25l[?25h simplicity[?25l[?25h and[?25l[?25h start[?25l[?25h immediately[?25l[?25h ([?25l[?25hmight[?25l[?25h pop[?25l[?25h),[?25l[?25h or[?25l[?25h assume[?25l[?25h a[?25l[?25h hardware[?25l[?25h buffer[?25l[?25h.[?25l[?25h
Given[?25l[?25h the[?25l[?25h prompt[?25l[?25h is[?25l[?25h for[?25l[?25h a[?25l[?25h "[?25l[?25hprogram[?25l[?25h to[?25l[?25h build[?25l[?25h",[?25l[?25h I[?25l[?25h will[?25l[?25h keep[?25l[?25h it[?25l[?25h simple[?25l[?25h but[?25l[?25h functional[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h write[?25l[?25h the[?25l[?25h code[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h use[?25l[?25h a[?25l[?25h table[?25l[?25h of[?25l[?25h 256[?25l[?25h bytes[?25l[?25h for[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h use[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h sample[?25l[?25h value[?25l[?25h `[?25l[?25huint[?25l[?25h32[?25l[?25h_t[?25l[?25h`.[?25l[?25h
I[?25l[?25h'll[?25l[?25h use[?25l[?25h `[?25l[?25hPORT[?25l[?25hB[?25l[?25h`[?25l[?25h for[?25l[?25h speed[?25l[?25h.[?25l[?25h

**[?25l[?25hPin[?25l[?25h Mapping[?25l[?25h for[?25l[?25h Port[?25l[?25h B[?25l[?25h ([?25l[?25hUno[?25l[?25h):[?25l[?25h**[?25l[?25h
B[?25l[?25h0[?25l[?25h:[?25l[?25h 8[?25l[?25h
B[?25l[?25h1[?25l[?25h:[?25l[?25h 9[?25l[?25h
B[?25l[?25h2[?25l[?25h:[?25l[?25h 10[?25l[?25h
B[?25l[?25h3[?25l[?25h:[?25l[?25h 11[?25l[?25h ([?25l[?25hData[?25l[?25h)[?25l[?25h
B[?25l[?25h4[?25l[?25h:[?25l[?25h 12[?25l[?25h ([?25l[?25hWS[?25l[?25h)[?25l[?25h
B[?25l[?25h5[?25l[?25h:[?25l[?25h 13[?25l[?25h ([?25l[?25hB[?25l[?25hCLK[?25l[?25h)[?25l[?25h

**[?25l[?25hLogic[?25l[?25h:[?25l[?25h**[?25l[?25h
The[?25l[?25h ISR[?25l[?25h togg[?25l[?25hles[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
Every[?25l[?25h 32[?25l[?25h togg[?25l[?25hles[?25l[?25h,[?25l[?25h we[?25l[?25h handle[?25l[?25h WS[?25l[?25h.[?25l[?25h
We[?25l[?25h shift[?25l[?25h out[?25l[?25h bits[?25l[?25h.[?25l[?25h
Format[?25l[?25h:[?25l[?25h Start[?25l[?25h ([?25l[?25h1[?25l[?25h),[?25l[?25h Data[?25l[?25h ([?25l[?25h24[?25l[?25h),[?25l[?25h Stop[?25l[?25h ([?25l[?25h0[?25l[?25h).[?25l[?25h
Total[?25l[?25h bits[?25l[?25h per[?25l[?25h channel[?25l[?25h:[?25l[?25h 26[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h use[?25l[?25h a[?25l[?25h simple[?25l[?25h state[?25l[?25h machine[?25l[?25h in[?25l[?25h the[?25l[?25h ISR[?25l[?25h.[?25l[?25h
State[?25l[?25h 0[?25l[?25h-[?25l[?25h31[?25l[?25h:[?25l[?25h B[?25l[?25hCLK[?25l[?25h togg[?25l[?25hles[?25l[?25h,[?25l[?25h bit[?25l[?25h shifting[?25l[?25h happens[?25l[?25h.[?25l[?25h
At[?25l[?25h the[?25l[?25h end[?25l[?25h of[?25l[?25h the[?25l[?25h frame[?25l[?25h,[?25l[?25h toggle[?25l[?25h WS[?25l[?25h.[?25l[?25h

Actually[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h easier[?25l[?25h to[?25l[?25h have[?25l[?25h the[?25l[?25h ISR[?25l[?25h run[?25l[?25h at[?25l[?25h B[?25l[?25hCLK[?25l[?25h speed[?25l[?25h ([?25l[?25hor[?25l[?25h close[?25l[?25h to[?25l[?25h it[?25l[?25h)[?25l[?25h to[?25l[?25h handle[?25l[?25h the[?25l[?25h shifting[?25l[?25h.[?25l[?25h
If[?25l[?25h ISR[?25l[?25h runs[?25l[?25h at[?25l[?25h B[?25l[?25hCLK[?25l[?25h ([?25l[?25h1[?25l[?25h.[?25l[?25h4[?25l[?25hM[?25l[?25h),[?25l[?25h it[?25l[?25h's[?25l[?25h hard[?25l[?25h.[?25l[?25h
If[?25l[?25h ISR[?25l[?25h runs[?25l[?25h slower[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h use[?25l[?25h a[?25l[?25h timer[?25l[?25h interrupt[?25l[?25h to[?25l[?25h pulse[?25l[?25h B[?25l[?25hCLK[?25l[?25h manually[?25l[?25h ([?25l[?25hpulse[?25l[?25h mode[?25l[?25h)[?25l[?25h while[?25l[?25h the[?25l[?25h main[?25l[?25h ISR[?25l[?25h handles[?25l[?25h the[?25l[?25h shifting[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h use[?25l[?25h the[?25l[?25h `[?25l[?25hTC[?25l[?25hNT[?25l[?25h2[?25l[?25h`[?25l[?25h in[?25l[?25h compare[?25l[?25h match[?25l[?25h to[?25l[?25h toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h in[?25l[?25h hardware[?25l[?25h?[?25l[?25h
No[?25l[?25h,[?25l[?25h hardware[?25l[?25h togg[?25l[?25hling[?25l[?25h ([?25l[?25hFast[?25l[?25h PWM[?25l[?25h)[?25l[?25h is[?25l[?25h best[?25l[?25h for[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
If[?25l[?25h B[?25l[?25hCLK[?25l[?25h is[?25l[?25h driven[?25l[?25h by[?25l[?25h Timer[?25l[?25h 2[?25l[?25h in[?25l[?25h C[?25l[?25hTC[?25l[?25h mode[?25l[?25h,[?25l[?25h the[?25l[?25h ISR[?25l[?25h happens[?25l[?25h at[?25l[?25h the[?25l[?25h end[?25l[?25h of[?25l[?25h the[?25l[?25h half[?25l[?25h-period[?25l[?25h.[?25l[?25h
This[?25l[?25h is[?25l[?25h getting[?25l[?25h too[?25l[?25h complex[?25l[?25h to[?25l[?25h explain[?25l[?25h in[?25l[?25h a[?25l[?25h single[?25l[?25h prompt[?25l[?25h response[?25l[?25h.[?25l[?25h

**[?25l[?25hAlternative[?25l[?25h:[?25l[?25h Use[?25l[?25h a[?25l[?25h library[?25l[?25h approach[?25l[?25h?[?25l[?25h**[?25l[?25h
No[?25l[?25h,[?25l[?25h the[?25l[?25h user[?25l[?25h asked[?25l[?25h to[?25l[?25h "[?25l[?25hcreate[?25l[?25h a[?25l[?25h program[?25l[?25h",[?25l[?25h implying[?25l[?25h logic[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h use[?25l[?25h a[?25l[?25h simple[?25l[?25h ISR[?25l[?25h that[?25l[?25h togg[?25l[?25hles[?25l[?25h B[?25l[?25hCLK[?25l[?25h and[?25l[?25h handles[?25l[?25h data[?25l[?25h.[?25l[?25h I[?25l[?25h'll[?25l[?25h set[?25l[?25h the[?25l[?25h timer[?25l[?25h to[?25l[?25h trigger[?25l[?25h very[?25l[?25h frequently[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.[?25l[?25h every[?25l[?25h 2[?25l[?25hus[?25l[?25h).[?25l[?25h
Inside[?25l[?25h the[?25l[?25h ISR[?25l[?25h:[?25l[?25h
1[?25l[?25h.[?25l[?25h `[?25l[?25hPORT[?25l[?25hB[?25l[?25h ^=[?25l[?25h ([?25l[?25h1[?25l[?25h <[?25l[?25h< B[?25l[?25hCLK[?25l[?25h_PIN[?25l[?25h);[?25l[?25h`[?25l[?25h
2[?25l[?25h.[?25l[?25h `[?25l[?25hdata[?25l[?25h =[?25l[?25h ([?25l[?25hsample[?25l[?25h >>[?25l[?25h bit[?25l[?25h_count[?25l[?25h)[?25l[?25h &[?25l[?25h 1[?25l[?25h;[?25l[?25h`[?25l[?25h
3[?25l[?25h.[?25l[?25h `[?25l[?25hPORT[?25l[?25hB[?25l[?25h |=[?25l[?25h ([?25l[?25hdata[?25l[?25h <[?25l[?25h< DATA[?25l[?25h_PIN[?25l[?25h);[?25l[?25h`[?25l[?25h ([?25l[?25hSet[?25l[?25h data[?25l[?25h)[?25l[?25h
4[?25l[?25h.[?25l[?25h `[?25l[?25hbit[?25l[?25h_count[?25l[?25h++;[?25l[?25h`[?25l[?25h
5[?25l[?25h.[?25l[?25h Manage[?25l[?25h WS[?25l[?25h.[?25l[?25h

Wait[?25l[?25h,[?25l[?25h setting[?25l[?25h data[?25l[?25h line[?25l[?25h *[?25l[?25hbefore[?25l[?25h*[?25l[?25h B[?25l[?25hCLK[?25l[?25h toggle[?25l[?25h?[?25l[?25h
I[?25l[?25h2[?25l[?25hS[?25l[?25h data[?25l[?25h is[?25l[?25h valid[?25l[?25h on[?25l[?25h the[?25l[?25h falling[?25l[?25h edge[?25l[?25h of[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
So[?25l[?25h:[?25l[?25h Set[?25l[?25h Data[?25l[?25h ->[?25l[?25h Toggle[?25l[?25h B[?25l[?25hCLK[?25l[?25h.[?25l[?25h
Repeat[?25l[?25h.[?25l[?25h
At[?25l[?25h the[?25l[?25h end[?25l[?25h of[?25l[?25h the[?25l[?25h frame[?25l[?25h ([?25l[?25hafter[?25l[?25h 32[?25l[?25h togg[?25l[?25hles[?25l[?25h),[?25l[?25h toggle[?25l[?25h WS[?25l[?25h.[?25l[?25h

This[?25l[?25h logic[?25l[?25h works[?25l[?25h.[?25l[?25h
I[?25l[?25h need[?25l[?25h to[?25l[?25h make[?25l[?25h sure[?25l[?25h the[?25l[?25h ISR[?25l[?25h doesn[?25l[?25h't[?25l[?25h take[?25l[?25h longer[?25l[?25h than[?25l[?25h the[?25l[?25h bit[?25l[?25h period[?25l[?25h.[?25l[?25h
1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25h MHz[?25l[?25h /[?25l[?25h 8[?25l[?25h =[?25l[?25h 176[?25l[?25hk[?25l[?25h ticks[?25l[?25h.[?25l[?25h
The[?25l[?25h Uno[?25l[?25h can[?25l[?25h easily[?25l[?25h handle[?25l[?25h 176[?25l[?25hk[?25l[?25h interrupts[?25l[?25h/sec[?25l[?25h.[?25l[?25h

**[?25l[?25hCalcul[?25l[?25hations[?25l[?25h:[?25l[?25h**[?25l[?25h
Sample[?25l[?25h Rate[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h.[?25l[?25h
B[?25l[?25hCLK[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h *[?25l[?25h 32[?25l[?25h =[?25l[?25h 1[?25l[?25h,[?25l[?25h4[?25l[?25h11[?25l[?25h,[?25l[?25h200[?25l[?25h.[?25l[?25h
Timer[?25l[?25h 2[?25l[?25h:[?25l[?25h 16[?25l[?25hMHz[?25l[?25h.[?25l[?25h
Pres[?25l[?25hcaler[?25l[?25h 8[?25l[?25h ->[?25l[?25h 2[?25l[?25hMHz[?25l[?25h.[?25l[?25h
Compare[?25l[?25h Value[?25l[?25h =[?25l[?25h 16[?25l[?25h /[?25l[?25h 8[?25l[?25h /[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25h2[?25l[?25h =[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h ticks[?25l[?25h.[?25l[?25h
This[?25l[?25h is[?25l[?25h very[?25l[?25h tight[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h set[?25l[?25h Compare[?25l[?25h to[?25l[?25h 1[?25l[?25h or[?25l[?25h 2[?25l[?25h.[?25l[?25h
If[?25l[?25h Compare[?25l[?25h =[?25l[?25h 2[?25l[?25h:[?25l[?25h Period[?25l[?25h =[?25l[?25h 16[?25l[?25hus[?25l[?25h.[?25l[?25h Frequency[?25l[?25h =[?25l[?25h 62[?25l[?25h.[?25l[?25h5[?25l[?25h kHz[?25l[?25h.[?25l[?25h
This[?25l[?25h is[?25l[?25h too[?25l[?25h slow[?25l[?25h for[?25l[?25h B[?25l[?25hCLK[?25l[?25h ([?25l[?25hneeds[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h MHz[?25l[?25h).[?25l[?25h
I[?25l[?25h need[?25l[?25h to[?25l[?25h run[?25l[?25h the[?25l[?25h ISR[?25l[?25h faster[?25l[?25h.[?25l[?25h
Let[?25l[?25h's[?25l[?25h use[?25l[?25h Pres[?25l[?25hcaler[?25l[?25h 1[?25l[?25h?[?25l[?25h 16[?25l[?25hMHz[?25l[?25h.[?25l[?25h
Compare[?25l[?25h =[?25l[?25h 16[?25l[?25h /[?25l[?25h 1[?25l[?25h.[?25l[?25h4[?25l[?25h11[?25l[?25h2[?25l[?25h =[?25l[?25h 11[?25l[?25h ticks[?25l[?25h.[?25l[?25h
Period[?25l[?25h =[?25l[?25h 6[?25l[?25h.[?25l[?25h9[?25l[?25hus[?25l[?25h.[?25l[?25h
Interrupt[?25l[?25h every[?25l[?25h 6[?25l[?25h.[?25l[?25h9[?25l[?25hus[?25l[?25h.[?25l[?25h
This[?25l[?25h is[?25l[?25h do[?25l[?25hable[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h use[?25l[?25h `[?25l[?25hT[?25l[?25hCCR[?25l[?25h2[?25l[?25hA[?25l[?25h`[?25l[?25h for[?25l[?25h C[?25l[?25hTC[?25l[?25h and[?25l[?25h set[?25l[?25h `[?25l[?25hOCR[?25l[?25h2[?25l[?25hA[?25l[?25h`[?25l[?25h to[?25l[?25h ~[?25l[?25h11[?25l[?25h.[?25l[?25h

**[?25l[?25hWait[?25l[?25h,[?25l[?25h shifting[?25l[?25h 24[?25l[?25h bits[?25l[?25h takes[?25l[?25h time[?25l[?25h.[?25l[?25h**[?25l[?25h
At[?25l[?25h 62[?25l[?25h.[?25l[?25h5[?25l[?25hkHz[?25l[?25h,[?25l[?25h that[?25l[?25h's[?25l[?25h 16[?25l[?25hus[?25l[?25h.[?25l[?25h
The[?25l[?25h ISR[?25l[?25h will[?25l[?25h take[?25l[?25h longer[?25l[?25h than[?25l[?25h the[?25l[?25h period[?25l[?25h ([?25l[?25h6[?25l[?25h.[?25l[?25h9[?25l[?25hus[?25l[?25h).[?25l[?25h This[?25l[?25h will[?25l[?25h result[?25l[?25h in[?25l[?25h audio[?25l[?25h drop[?25l[?25houts[?25l[?25h ([?25l[?25hgl[?25l[?25hitches[?25l[?25h).[?25l[?25h
This[?25l[?25h is[?25l[?25h a[?25l[?25h known[?25l[?25h issue[?25l[?25h with[?25l[?25h Arduino[?25l[?25h Uno[?25l[?25h audio[?25l[?25h.[?25l[?25h
To[?25l[?25h make[?25l[?25h it[?25l[?25h work[?25l[?25h,[?25l[?25h I[?25l[?25h usually[?25l[?25h need[?25l[?25h an[?25l[?25h ESP[?25l[?25h32[?25l[?25h.[?25l[?25h
Since[?25l[?25h the[?25l[?25h user[?25l[?25h asked[?25l[?25h for[?25l[?25h an[?25l[?25h "[?25l[?25hArduino[?25l[?25h project[?25l[?25h"[?25l[?25h without[?25l[?25h specifying[?25l[?25h the[?25l[?25h board[?25l[?25h,[?25l[?25h and[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h is[?25l[?25h a[?25l[?25h very[?25l[?25h high[?25l[?25h bar[?25l[?25h for[?25l[?25h AVR[?25l[?25h,[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h solution[?25l[?25h using[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h an[?25l[?25h Arduino[?25l[?25h board[?25l[?25h,[?25l[?25h it[?25l[?25h supports[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h n[?25l[?25hatively[?25l[?25h,[?25l[?25h and[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h works[?25l[?25h perfectly[?25l[?25h.[?25l[?25h The[?25l[?25h code[?25l[?25h is[?25l[?25h much[?25l[?25h cleaner[?25l[?25h and[?25l[?25h actually[?25l[?25h works[?25l[?25h reliably[?25l[?25h.[?25l[?25h

**[?25l[?25hDecision[?25l[?25h:**[?25l[?25h I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h solution[?25l[?25h for[?25l[?25h an[?25l[?25h ESP[?25l[?25h32[?25l[?25h ([?25l[?25hor[?25l[?25h generic[?25l[?25h Arduino[?25l[?25h board[?25l[?25h with[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h hardware[?25l[?25h support[?25l[?25h)[?25l[?25h because[?25l[?25h it[?25l[?25h's[?25l[?25h the[?25l[?25h practical[?25l[?25h solution[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h explicitly[?25l[?25h state[?25l[?25h this[?25l[?25h assumption[?25l[?25h.[?25l[?25h Writing[?25l[?25h a[?25l[?25h software[?25l[?25h bit[?25l[?25h-b[?25l[?25hang[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h engine[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h on[?25l[?25h an[?25l[?25h AVR[?25l[?25h Uno[?25l[?25h is[?25l[?25h extremely[?25l[?25h prone[?25l[?25h to[?25l[?25h noise[?25l[?25h and[?25l[?25h buffer[?25l[?25h und[?25l[?25herr[?25l[?25huns[?25l[?25h,[?25l[?25h which[?25l[?25h might[?25l[?25h frustr[?25l[?25hate[?25l[?25h the[?25l[?25h user[?25l[?25h.[?25l[?25h

**[?25l[?25hESP[?25l[?25h32[?25l[?25h Code[?25l[?25h Structure[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  Include[?25l[?25h `[?25l[?25hdriver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h`.[?25l[?25h
2[?25l[?25h.[?25l[?25h  Define[?25l[?25h Pins[?25l[?25h.[?25l[?25h
3[?25l[?25h.[?25l[?25h  Initialize[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h
4[?25l[?25h.[?25l[?25h  Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h ([?25l[?25hbuffer[?25l[?25h).[?25l[?25h
5[?25l[?25h.[?25l[?25h  Loop[?25l[?25h:[?25l[?25h Write[?25l[?25h to[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h

**[?25l[?25hWait[?25l[?25h,[?25l[?25h the[?25l[?25h prompt[?25l[?25h says[?25l[?25h "[?25l[?25hThe[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h must[?25l[?25h be[?25l[?25h given[?25l[?25h as[?25l[?25h #[?25l[?25hdefine[?25l[?25h statements[?25l[?25h."[?25l[?25h**[?25l[?25h
This[?25l[?25h is[?25l[?25h true[?25l[?25h for[?25l[?25h both[?25l[?25h.[?25l[?25h

**[?25l[?25hLet[?25l[?25h's[?25l[?25h reconsider[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h vs[?25l[?25h Uno[?25l[?25h dilemma[?25l[?25h.[?25l[?25h**[?25l[?25h
If[?25l[?25h I[?25l[?25h give[?25l[?25h ESP[?25l[?25h32[?25l[?25h code[?25l[?25h,[?25l[?25h and[?25l[?25h they[?25l[?25h have[?25l[?25h an[?25l[?25h Uno[?25l[?25h,[?25l[?25h it[?25l[?25h won[?25l[?25h't[?25l[?25h compile[?25l[?25h.[?25l[?25h
If[?25l[?25h I[?25l[?25h give[?25l[?25h Uno[?25l[?25h code[?25l[?25h,[?25l[?25h and[?25l[?25h they[?25l[?25h have[?25l[?25h an[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h they[?25l[?25h might[?25l[?25h still[?25l[?25h use[?25l[?25h it[?25l[?25h ([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h API[?25l[?25h differs[?25l[?25h).[?25l[?25h
The[?25l[?25h most[?25l[?25h helpful[?25l[?25h answer[?25l[?25h provides[?25l[?25h the[?25l[?25h *[?25l[?25hlogic[?25l[?25h*[?25l[?25h.[?25l[?25h
However[?25l[?25h,[?25l[?25h "[?25l[?25hArduino[?25l[?25h"[?25l[?25h usually[?25l[?25h implies[?25l[?25h the[?25l[?25h AVR[?25l[?25h IDE[?25l[?25h in[?25l[?25h many[?25l[?25h contexts[?25l[?25h.[?25l[?25h
But[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h"[?25l[?25h implies[?25l[?25h high[?25l[?25h fidelity[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h stick[?25l[?25h to[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h approach[?25l[?25h as[?25l[?25h it[?25l[?25h's[?25l[?25h the[?25l[?25h only[?25l[?25h way[?25l[?25h to[?25l[?25h reliably[?25l[?25h generate[?25l[?25h *[?25l[?25hcontinuous[?25l[?25h*[?25l[?25h 24[?25l[?25h-bit[?25l[?25h sine[?25l[?25h wave[?25l[?25h without[?25l[?25h glitch[?25l[?25hing[?25l[?25h on[?25l[?25h an[?25l[?25h Arduino[?25l[?25h platform[?25l[?25h.[?25l[?25h Software[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h on[?25l[?25h AVR[?25l[?25h is[?25l[?25h just[?25l[?25h for[?25l[?25h demonstration[?25l[?25h or[?25l[?25h very[?25l[?25h low[?25l[?25h sample[?25l[?25h rates[?25l[?25h.[?25l[?25h
Actually[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h look[?25l[?25h at[?25l[?25h the[?25l[?25h `[?25l[?25hT[?25l[?25hone[?25l[?25h`[?25l[?25h library[?25l[?25h again[?25l[?25h?[?25l[?25h No[?25l[?25h,[?25l[?25h that[?25l[?25h's[?25l[?25h PWM[?25l[?25h.[?25l[?25h
There[?25l[?25h is[?25l[?25h a[?25l[?25h library[?25l[?25h `[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_S[?25l[?25hampler[?25l[?25h`[?25l[?25h or[?25l[?25h similar[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h write[?25l[?25h the[?25l[?25h code[?25l[?25h for[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h but[?25l[?25h add[?25l[?25h a[?25l[?25h disclaimer[?25l[?25h that[?25l[?25h it[?25l[?25h's[?25l[?25h optimized[?25l[?25h for[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h because[?25l[?25h of[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h hardware[?25l[?25h,[?25l[?25h which[?25l[?25h is[?25l[?25h standard[?25l[?25h for[?25l[?25h "[?25l[?25hArduino[?25l[?25h"[?25l[?25h projects[?25l[?25h involving[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h now[?25l[?25h.[?25l[?25h

*[?25l[?25hSelf[?25l[?25h-C[?25l[?25hor[?25l[?25hrection[?25l[?25h:*[?25l[?25h What[?25l[?25h if[?25l[?25h I[?25l[?25h provide[?25l[?25h the[?25l[?25h standard[?25l[?25h AVR[?25l[?25h code[?25l[?25h but[?25l[?25h with[?25l[?25h the[?25l[?25h note[?25l[?25h "[?25l[?25hThis[?25l[?25h is[?25l[?25h optimized[?25l[?25h for[?25l[?25h ESP[?25l[?25h32[?25l[?25h..."[?25l[?25h?[?25l[?25h No[?25l[?25h,[?25l[?25h that[?25l[?25h's[?25l[?25h confusing[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h provide[?25l[?25h the[?25l[?25h code[?25l[?25h for[?25l[?25h the[?25l[?25h **[?25l[?25hArduino[?25l[?25h Uno[?25l[?25h**[?25l[?25h but[?25l[?25h using[?25l[?25h a[?25l[?25h specific[?25l[?25h library[?25l[?25h ([?25l[?25hlike[?25l[?25h `[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h`[?25l[?25h by[?25l[?25h Ada[?25l[?25hfruit[?25l[?25h or[?25l[?25h similar[?25l[?25h)[?25l[?25h is[?25l[?25h risky[?25l[?25h because[?25l[?25h I[?25l[?25h don[?25l[?25h't[?25l[?25h know[?25l[?25h if[?25l[?25h they[?25l[?25h have[?25l[?25h the[?25l[?25h library[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h write[?25l[?25h the[?25l[?25h **[?25l[?25hArduino[?25l[?25h Uno[?25l[?25h**[?25l[?25h code[?25l[?25h using[?25l[?25h a[?25l[?25h custom[?25l[?25h ISR[?25l[?25h,[?25l[?25h as[?25l[?25h it[?25l[?25h's[?25l[?25h the[?25l[?25h most[?25l[?25h "[?25l[?25htext[?25l[?25hbook[?25l[?25h"[?25l[?25h answer[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h use[?25l[?25h a[?25l[?25h smaller[?25l[?25h sample[?25l[?25h rate[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.[?25l[?25h 32[?25l[?25hkHz[?25l[?25h)[?25l[?25h to[?25l[?25h ensure[?25l[?25h the[?25l[?25h ISR[?25l[?25h fits[?25l[?25h the[?25l[?25h timing[?25l[?25h,[?25l[?25h or[?25l[?25h simply[?25l[?25h warn[?25l[?25h about[?25l[?25h the[?25l[?25h limitations[?25l[?25h.[?25l[?25h
Actually[?25l[?25h,[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h on[?25l[?25h Uno[?25l[?25h is[?25l[?25h possible[?25l[?25h with[?25l[?25h `[?25l[?25hT[?25l[?25hone[?25l[?25h2[?25l[?25h`[?25l[?25h and[?25l[?25h some[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h libraries[?25l[?25h,[?25l[?25h but[?25l[?25h the[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h is[?25l[?25h the[?25l[?25h main[?25l[?25h task[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h solution[?25l[?25h.[?25l[?25h It[?25l[?25h is[?25l[?25h the[?25l[?25h modern[?25l[?25h standard[?25l[?25h for[?25l[?25h Arduino[?25l[?25h audio[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h define[?25l[?25h the[?25l[?25h pins[?25l[?25h.[?25l[?25h

**[?25l[?25hCode[?25l[?25h Logic[?25l[?25h for[?25l[?25h ESP[?25l[?25h32[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hinclude[?25l[?25h <driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>`[?25l[?25h
2[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_D[?25l[?25hOUT[?25l[?25h 26[?25l[?25h`[?25l[?25h ([?25l[?25hExample[?25l[?25h)[?25l[?25h
3[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 22[?25l[?25h`[?25l[?25h
4[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_WS[?25l[?25h 25[?25l[?25h`[?25l[?25h
5[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hdefine[?25l[?25h SAMPLE[?25l[?25h_RATE[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h`[?25l[?25h
6[?25l[?25h.[?25l[?25h  `[?25l[?25h#[?25l[?25hdefine[?25l[?25h M[?25l[?25hIDDLE[?25l[?25h_C[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h`[?25l[?25h
7[?25l[?25h.[?25l[?25h  Create[?25l[?25h a[?25l[?25h buffer[?25l[?25h of[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_port[?25l[?25h_t[?25l[?25h`.[?25l[?25h
8[?25l[?25h.[?25l[?25h  `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h`[?25l[?25h to[?25l[?25h set[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h mode[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h,[?25l[?25h stereo[?25l[?25h,[?25l[?25h etc[?25l[?25h.[?25l[?25h
9[?25l[?25h.[?25l[?25h  Generate[?25l[?25h the[?25l[?25h wave[?25l[?25h array[?25l[?25h ([?25l[?25hs[?25l[?25hine[?25l[?25h table[?25l[?25h).[?25l[?25h
10[?25l[?25h.[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h in[?25l[?25h a[?25l[?25h loop[?25l[?25h.[?25l[?25h

This[?25l[?25h is[?25l[?25h robust[?25l[?25h and[?25l[?25h answers[?25l[?25h the[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h"[?25l[?25h requirement[?25l[?25h perfectly[?25l[?25h.[?25l[?25h

**[?25l[?25hRef[?25l[?25hining[?25l[?25h the[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h generation[?25l[?25h:[?25l[?25h**[?25l[?25h
Middle[?25l[?25h C[?25l[?25h is[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h Hz[?25l[?25h.[?25l[?25h
Table[?25l[?25h size[?25l[?25h:[?25l[?25h Let[?25l[?25h's[?25l[?25h say[?25l[?25h 512[?25l[?25h entries[?25l[?25h ([?25l[?25hdouble[?25l[?25h resolution[?25l[?25h).[?25l[?25h
Sample[?25l[?25h Rate[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h.[?25l[?25h
We[?25l[?25h need[?25l[?25h to[?25l[?25h step[?25l[?25h through[?25l[?25h the[?25l[?25h table[?25l[?25h.[?25l[?25h
`[?25l[?25hstep[?25l[?25h =[?25l[?25h ([?25l[?25htable[?25l[?25h_size[?25l[?25h *[?25l[?25h Middle[?25l[?25h_C[?25l[?25h)[?25l[?25h /[?25l[?25h Sample[?25l[?25hRate[?25l[?25h`.[?25l[?25h
`[?25l[?25huint[?25l[?25h16[?25l[?25h_t[?25l[?25h phase[?25l[?25h =[?25l[?25h 0[?25l[?25h;[?25l[?25h`[?25l[?25h
`[?25l[?25hvalue[?25l[?25h =[?25l[?25h ([?25l[?25hs[?25l[?25hine[?25l[?25h[[?25l[?25hphase[?25l[?25h][?25l[?25h <[?25l[?25h<[?25l[?25h 8[?25l[?25h)[?25l[?25h |[?25l[?25h ([?25l[?25hs[?25l[?25hine[?25l[?25h[[?25l[?25hphase[?25l[?25h][?25l[?25h >>[?25l[?25h 8[?25l[?25h);[?25l[?25h`[?25l[?25h //[?25l[?25h Convert[?25l[?25h 8[?25l[?25h-bit[?25l[?25h to[?25l[?25h 16[?25l[?25h-bit[?25l[?25h for[?25l[?25h simplicity[?25l[?25h ([?25l[?25hor[?25l[?25h scale[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h).[?25l[?25h
Since[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h DAC[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h 24[?25l[?25h-bit[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h generate[?25l[?25h a[?25l[?25h 16[?25l[?25h-bit[?25l[?25h sine[?25l[?25h wave[?25l[?25h and[?25l[?25h left[?25l[?25h-shift[?25l[?25h it[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h,[?25l[?25h or[?25l[?25h generate[?25l[?25h a[?25l[?25h 24[?25l[?25h-bit[?25l[?25h array[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h stick[?25l[?25h to[?25l[?25h a[?25l[?25h simpler[?25l[?25h 8[?25l[?25h-bit[?25l[?25h sine[?25l[?25h wave[?25l[?25h stored[?25l[?25h in[?25l[?25h a[?25l[?25h table[?25l[?25h,[?25l[?25h then[?25l[?25h convert[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h in[?25l[?25h the[?25l[?25h buffer[?25l[?25h.[?25l[?25h
`[?25l[?25hint[?25l[?25h16[?25l[?25h_t[?25l[?25h sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h16[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h_val[?25l[?25h *[?25l[?25h 0[?25l[?25hx[?25l[?25h7[?25l[?25hFFF[?25l[?25h);[?25l[?25h`[?25l[?25h
`[?25l[?25huint[?25l[?25h32[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_sample[?25l[?25h =[?25l[?25h (([?25l[?25huint[?25l[?25h32[?25l[?25h_t[?25l[?25h)[?25l[?25hsample[?25l[?25h)[?25l[?25h <[?25l[?25h<[?25l[?25h 8[?25l[?25h;[?25l[?25h`[?25l[?25h //[?25l[?25h Pad[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h.[?25l[?25h

**[?25l[?25hFinal[?25l[?25h check[?25l[?25h on[?25l[?25h pins[?25l[?25h:[?25l[?25h**[?25l[?25h
The[?25l[?25h user[?25l[?25h wants[?25l[?25h `[?25l[?25h#[?25l[?25hdefine[?25l[?25h`[?25l[?25h statements[?25l[?25h.[?25l[?25h
I[?25l[?25h'll[?25l[?25h use[?25l[?25h standard[?25l[?25h ESP[?25l[?25h32[?25l[?25h pins[?25l[?25h:[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_D[?25l[?25hOUT[?25l[?25h 26[?25l[?25h`[?25l[?25h ([?25l[?25hor[?25l[?25h similar[?25l[?25h)[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 22[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h DAC[?25l[?25h_WS[?25l[?25h 25[?25l[?25h`[?25l[?25h

**[?25l[?25hWait[?25l[?25h**,[?25l[?25h what[?25l[?25h if[?25l[?25h the[?25l[?25h user[?25l[?25h strictly[?25l[?25h needs[?25l[?25h Uno[?25l[?25h code[?25l[?25h?[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h the[?25l[?25h Uno[?25l[?25h code[?25l[?25h but[?25l[?25h explain[?25l[?25h the[?25l[?25h constraints[?25l[?25h.[?25l[?25h
Actually[?25l[?25h,[?25l[?25h looking[?25l[?25h at[?25l[?25h the[?25l[?25h prompt[?25l[?25h "[?25l[?25h24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h",[?25l[?25h this[?25l[?25h is[?25l[?25h almost[?25l[?25h certainly[?25l[?25h a[?25l[?25h modern[?25l[?25h project[?25l[?25h.[?25l[?25h I[?25l[?25h'll[?25l[?25h provide[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h code[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h the[?25l[?25h best[?25l[?25h way[?25l[?25h to[?25l[?25h ensure[?25l[?25h the[?25l[?25h "[?25l[?25hContinuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h"[?25l[?25h works[?25l[?25h without[?25l[?25h buffer[?25l[?25h und[?25l[?25herr[?25l[?25huns[?25l[?25h.[?25l[?25h

**[?25l[?25hRe[?25l[?25hvised[?25l[?25h Plan[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h will[?25l[?25h provide[?25l[?25h a[?25l[?25h solution[?25l[?25h for[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h because[?25l[?25h it[?25l[?25h is[?25l[?25h the[?25l[?25h only[?25l[?25h Arduino[?25l[?25h board[?25l[?25h capable[?25l[?25h of[?25l[?25h real[?25l[?25h-time[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h generation[?25l[?25h reliably[?25l[?25h without[?25l[?25h external[?25l[?25h hardware[?25l[?25h buffers[?25l[?25h or[?25l[?25h jitter[?25l[?25hy[?25l[?25h interrupts[?25l[?25h.[?25l[?25h The[?25l[?25h code[?25l[?25h will[?25l[?25h be[?25l[?25h clean[?25l[?25h,[?25l[?25h using[?25l[?25h the[?25l[?25h Arduino[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h library[?25l[?25h.[?25l[?25h

**[?25l[?25hComponents[?25l[?25h:[?25l[?25h**[?25l[?25h
-[?25l[?25h ESP[?25l[?25h32[?25l[?25h board[?25l[?25h.[?25l[?25h
-[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h module[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h MAX[?25l[?25h98[?25l[?25h3[?25l[?25h57[?25l[?25hA[?25l[?25h or[?25l[?25h similar[?25l[?25h).[?25l[?25h
-[?25l[?25h S[?25l[?25hine[?25l[?25h wave[?25l[?25h generation[?25l[?25h logic[?25l[?25h.[?25l[?25h
-[?25l[?25h 24[?25l[?25h-bit[?25l[?25h data[?25l[?25h formatting[?25l[?25h.[?25l[?25h

**[?25l[?25hCode[?25l[?25h Steps[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h  Setup[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h ([?25l[?25h24[?25l[?25h-bit[?25l[?25h,[?25l[?25h 44[?25l[?25h.[?25l[?25h1[?25l[?25hkHz[?25l[?25h,[?25l[?25h 16[?25l[?25h-bit[?25l[?25h words[?25l[?25h ->[?25l[?25h wait[?25l[?25h,[?25l[?25h if[?25l[?25h DAC[?25l[?25h is[?25l[?25h 24[?25l[?25h-bit[?25l[?25h,[?25l[?25h we[?25l[?25h usually[?25l[?25h send[?25l[?25h 24[?25l[?25h bits[?25l[?25h).[?25l[?25h
    -[?25l[?25h Driver[?25l[?25h config[?25l[?25h:[?25l[?25h `[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BITS[?25l[?25h_PER[?25l[?25h_SAMPLE[?25l[?25h_[?25l[?25h24[?25l[?25hBIT[?25l[?25h`.[?25l[?25h
2[?25l[?25h.[?25l[?25h  Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h.[?25l[?25h
3[?25l[?25h.[?25l[?25h  Continuous[?25l[?25h transmission[?25l[?25h.[?25l[?25h

**[?25l[?25hCorrection[?25l[?25h:**[?25l[?25h I[?25l[?25h will[?25l[?25h assume[?25l[?25h the[?25l[?25h user[?25l[?25h has[?25l[?25h a[?25l[?25h generic[?25l[?25h Arduino[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h.[?25l[?25h I[?25l[?25h will[?25l[?25h define[?25l[?25h the[?25l[?25h pins[?25l[?25h as[?25l[?25h requested[?25l[?25h.[?25l[?25h

**[?25l[?25hPin[?25l[?25h Definitions[?25l[?25h:[?25l[?25h**[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_WS[?25l[?25h 25[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 22[?25l[?25h`[?25l[?25h
`[?25l[?25h#[?25l[?25hdefine[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_D[?25l[?25hOUT[?25l[?25h 26[?25l[?25h`[?25l[?25h

Let[?25l[?25h's[?25l[?25h write[?25l[?25h the[?25l[?25h code[?25l[?25h.[?25l[?25h

**[?25l[?25hOne[?25l[?25h detail[?25l[?25h:**[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h`[?25l[?25h takes[?25l[?25h a[?25l[?25h buffer[?25l[?25h size[?25l[?25h.[?25l[?25h For[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h just[?25l[?25h push[?25l[?25h data[?25l[?25h as[?25l[?25h fast[?25l[?25h as[?25l[?25h possible[?25l[?25h.[?25l[?25h ESP[?25l[?25h32[?25l[?25h's[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h handles[?25l[?25h buffering[?25l[?25h internally[?25l[?25h.[?25l[?25h

**[?25l[?25hS[?25l[?25hine[?25l[?25h Math[?25l[?25h:[?25l[?25h**[?25l[?25h
To[?25l[?25h get[?25l[?25h exactly[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h Hz[?25l[?25h at[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h Hz[?25l[?25h.[?25l[?25h
Index[?25l[?25h increment[?25l[?25h:[?25l[?25h `[?25l[?25hceil[?25l[?25h(([?25l[?25h256[?25l[?25h *[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h)[?25l[?25h /[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h)[?25l[?25h`.[?25l[?25h
`[?25l[?25hceil[?25l[?25h([?25l[?25h1[?25l[?25h.[?25l[?25h5[?25l[?25h15[?25l[?25h...)[?25l[?25h`[?25l[?25h ->[?25l[?25h 1[?25l[?25h.[?25l[?25h5[?25l[?25h15[?25l[?25h steps[?25l[?25h per[?25l[?25h sample[?25l[?25h.[?25l[?25h
Better[?25l[?25h:[?25l[?25h Use[?25l[?25h floating[?25l[?25h point[?25l[?25h or[?25l[?25h fixed[?25l[?25h point[?25l[?25h.[?25l[?25h
`[?25l[?25hfloat[?25l[?25h phase[?25l[?25h =[?25l[?25h 0[?25l[?25h;[?25l[?25h`[?25l[?25h
`[?25l[?25hfloat[?25l[?25h step[?25l[?25h =[?25l[?25h ([?25l[?25hfloat[?25l[?25h)([?25l[?25h44[?25l[?25h1[?25l[?25h00[?25l[?25h /[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h);[?25l[?25h`[?25l[?25h
`[?25l[?25hval[?25l[?25h =[?25l[?25h sine[?25l[?25h[[?25l[?25hphase[?25l[?25h];[?25l[?25h`[?25l[?25h
`[?25l[?25hphase[?25l[?25h +=[?25l[?25h 256[?25l[?25h.[?25l[?25h0[?25l[?25h /[?25l[?25h step[?25l[?25h;[?25l[?25h`[?25l[?25h
This[?25l[?25h is[?25l[?25h easier[?25l[?25h in[?25l[?25h a[?25l[?25h loop[?25l[?25h than[?25l[?25h an[?25l[?25h ISR[?25l[?25h.[?25l[?25h

**[?25l[?25hAlternative[?25l[?25h:[?25l[?25h**[?25l[?25h
Use[?25l[?25h a[?25l[?25h pre[?25l[?25h-cal[?25l[?25hculated[?25l[?25h array[?25l[?25h of[?25l[?25h the[?25l[?25h wave[?25l[?25h at[?25l[?25h the[?25l[?25h target[?25l[?25h frequency[?25l[?25h.[?25l[?25h
Size[?25l[?25h:[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h samples[?25l[?25h?[?25l[?25h No[?25l[?25h,[?25l[?25h that[?25l[?25h's[?25l[?25h huge[?25l[?25h.[?25l[?25h
Size[?25l[?25h:[?25l[?25h 26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h samples[?25l[?25h?[?25l[?25h No[?25l[?25h.[?25l[?25h
Just[?25l[?25h use[?25l[?25h the[?25l[?25h table[?25l[?25h stepping[?25l[?25h method[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h standard[?25l[?25h.[?25l[?25h

Let[?25l[?25h's[?25l[?25h go[?25l[?25h.[?25l[?25h

**[?25l[?25hConstraint[?25l[?25h Checklist[?25l[?25h &[?25l[?25h Confidence[?25l[?25h Score[?25l[?25h:[?25l[?25h**[?25l[?25h
1[?25l[?25h.[?25l[?25h Create[?25l[?25h Arduino[?25l[?25h project[?25l[?25h?[?25l[?25h Yes[?25l[?25h.[?25l[?25h
2[?25l[?25h.[?25l[?25h Continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h?[?25l[?25h Yes[?25l[?25h.[?25l[?25h
3[?25l[?25h.[?25l[?25h Middle[?25l[?25h C[?25l[?25h?[?25l[?25h Yes[?25l[?25h.[?25l[?25h
4[?25l[?25h.[?25l[?25h 24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h?[?25l[?25h Yes[?25l[?25h.[?25l[?25h
5[?25l[?25h.[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h as[?25l[?25h #[?25l[?25hdefine[?25l[?25h?[?25l[?25h Yes[?25l[?25h.[?25l[?25h

Conf[?25l[?25hidence[?25l[?25h Score[?25l[?25h:[?25l[?25h 5[?25l[?25h/[?25l[?25h5[?25l[?25h.[?25l[?25h

**[?25l[?25hM[?25l[?25hental[?25l[?25h Sandbox[?25l[?25h Simulation[?25l[?25h:[?25l[?25h**[?25l[?25h
-[?25l[?25h ESP[?25l[?25h32[?25l[?25h code[?25l[?25h comp[?25l[?25hiles[?25l[?25h with[?25l[?25h `[?25l[?25hdriver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h`.[?25l[?25h
-[?25l[?25h Pins[?25l[?25h defined[?25l[?25h.[?25l[?25h
-[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_zero[?25l[?25h_dma[?25l[?25h_buffer[?25l[?25h`[?25l[?25h?[?25l[?25h Not[?25l[?25h needed[?25l[?25h if[?25l[?25h we[?25l[?25h constantly[?25l[?25h write[?25l[?25h.[?25l[?25h
-[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h returns[?25l[?25h bytes[?25l[?25h written[?25l[?25h.[?25l[?25h
-[?25l[?25h The[?25l[?25h sine[?25l[?25h wave[?25l[?25h should[?25l[?25h be[?25l[?25h audible[?25l[?25h.[?25l[?25h

**[?25l[?25hRef[?25l[?25hining[?25l[?25h the[?25l[?25h Output[?25l[?25h:[?25l[?25h**[?25l[?25h
I[?25l[?25h will[?25l[?25h add[?25l[?25h comments[?25l[?25h explaining[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h configuration[?25l[?25h.[?25l[?25h
I[?25l[?25h will[?25l[?25h make[?25l[?25h the[?25l[?25h output[?25l[?25h clean[?25l[?25h and[?25l[?25h copy[?25l[?25h-p[?25l[?25haste[?25l[?25hable[?25l[?25h.[?25l[?25h

**[?25l[?25hNote[?25l[?25h on[?25l[?25h "[?25l[?25hArduino[?25l[?25h":[?25l[?25h**[?25l[?25h
I[?25l[?25h will[?25l[?25h add[?25l[?25h a[?25l[?25h note[?25l[?25h:[?25l[?25h "[?25l[?25hThis[?25l[?25h code[?25l[?25h is[?25l[?25h optimized[?25l[?25h for[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h,[?25l[?25h as[?25l[?25h it[?25l[?25h has[?25l[?25h dedicated[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h hardware[?25l[?25h support[?25l[?25h required[?25l[?25h for[?25l[?25h stable[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h generation[?25l[?25h.[?25l[?25h It[?25l[?25h will[?25l[?25h not[?25l[?25h work[?25l[?25h on[?25l[?25h standard[?25l[?25h AVR[?25l[?25h boards[?25l[?25h ([?25l[?25hUno[?25l[?25h/N[?25l[?25hano[?25l[?25h)[?25l[?25h without[?25l[?25h significant[?25l[?25h bit[?25l[?25h-b[?25l[?25hanging[?25l[?25h delays[?25l[?25h."[?25l[?25h

Let[?25l[?25h's[?25l[?25h create[?25l[?25h the[?25l[?25h code[?25l[?25h.[?25l[?25h
...done thinking.

This[?25l[?25h program[?25l[?25h is[?25l[?25h designed[?25l[?25h for[?25l[?25h the[?25l[?25h **[?25l[?25hESP[?25l[?25h32[?25l[?25h**[?25l[?25h micro[?25l[?25hcontroller[?25l[?25h.[?25l[?25h Standard[?25l[?25h Arduino[?25l[?25h boards[?25l[?25h ([?25l[?25hlike[?25l[?25h the[?25l[?25h Uno[?25l[?25h or[?25l[?25h Nano[?25l[?25h)[?25l[?25h lack[?25l[?25h dedicated[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h hardware[?25l[?25h,[?25l[?25h making[?25l[?25h real[?25l[?25h-time[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h generation[?25l[?25h extremely[?25l[?25h difficult[?25l[?25h and[?25l[?25h jitter[?25l[?25hy[?25l[?25h.[?25l[?25h The[?25l[?25h ESP[?25l[?25h32[?25l[?25h handles[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h n[?25l[?25hatively[?25l[?25h via[?25l[?25h its[?25l[?25h hardware[?25l[?25h drivers[?25l[?25h.[?25l[?25h

###[?25l[?25h Pr[?25l[?25herequisites[?25l[?25h
*[?25l[?25h   **[?25l[?25hHardware[?25l[?25h:**[?25l[?25h ESP[?25l[?25h32[?25l[?25h development[?25l[?25h board[?25l[?25h.[?25l[?25h
*[?25l[?25h   **[?25l[?25hDAC[?25l[?25h:**[?25l[?25h A[?25l[?25h 24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h module[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h MAX[?25l[?25h98[?25l[?25h3[?25l[?25h57[?25l[?25hA[?25l[?25h,[?25l[?25h PCM[?25l[?25h5[?25l[?25h10[?25l[?25h2[?25l[?25hA[?25l[?25h,[?25l[?25h or[?25l[?25h similar[?25l[?25h).[?25l[?25h

###[?25l[?25h The[?25l[?25h Arduino[?25l[?25h Code[?25l[?25h

```[?25l[?25hcpp[?25l[?25h
#include[?25l[?25h <driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>[?25l[?25h

//[?25l[?25h ---[?25l[?25h PIN[?25l[?25h DEFIN[?25l[?25hITIONS[?25l[?25h ---[?25l[?25h
//[?25l[?25h Define[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h.[?25l[?25h
//[?25l[?25h These[?25l[?25h pin[?25l[?25houts[?25l[?25h are[?25l[?25h standard[?25l[?25h for[?25l[?25h many[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h modules[?25l[?25h connected[?25l[?25h to[?25l[?25h the[?25l[?25h ESP[?25l[?25h32[?25l[?25h.[?25l[?25h
#define[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_B[?25l[?25hCLK[?25l[?25h 22[?25l[?25h  //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h
#define[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_WS[?25l[?25h   25[?25l[?25h  //[?25l[?25h Word[?25l[?25h Select[?25l[?25h ([?25l[?25hLeft[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h)[?25l[?25h
#define[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_D[?25l[?25hOUT[?25l[?25h 26[?25l[?25h  //[?25l[?25h Data[?25l[?25h Out[?25l[?25h

//[?25l[?25h ---[?25l[?25h AUDIO[?25l[?25h PARAMETERS[?25l[?25h ---[?25l[?25h
#define[?25l[?25h SAMPLE[?25l[?25h_RATE[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25h    //[?25l[?25h Standard[?25l[?25h CD[?25l[?25h Quality[?25l[?25h
#define[?25l[?25h F[?25l[?25hREQ[?25l[?25h_M[?25l[?25hID[?25l[?25h_C[?25l[?25h  26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25h   //[?25l[?25h Frequency[?25l[?25h of[?25l[?25h Middle[?25l[?25h C[?25l[?25h ([?25l[?25hHz[?25l[?25h)[?25l[?25h
#define[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_MON[?25l[?25hO[?25l[?25h //[?25l[?25h We[?25l[?25h are[?25l[?25h sending[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h usually[?25l[?25h mono[?25l[?25h

//[?25l[?25h ---[?25l[?25h S[?25l[?25hINE[?25l[?25h W[?25l[?25hAVE[?25l[?25h LOOK[?25l[?25hUP[?25l[?25h TABLE[?25l[?25h ---[?25l[?25h
//[?25l[?25h Generates[?25l[?25h a[?25l[?25h 512[?25l[?25h-entry[?25l[?25h sine[?25l[?25h wave[?25l[?25h for[?25l[?25h high[?25l[?25h resolution[?25l[?25h.[?25l[?25h
const[?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h sine[?25l[?25h_table[?25l[?25h[][?25l[?25h =[?25l[?25h {[?25l[?25h
  0[?25l[?25h,[?25l[?25h  3[?25l[?25h,[?25l[?25h  6[?25l[?25h,[?25l[?25h  9[?25l[?25h,[?25l[?25h  12[?25l[?25h,[?25l[?25h 15[?25l[?25h,[?25l[?25h 18[?25l[?25h,[?25l[?25h 21[?25l[?25h,[?25l[?25h 24[?25l[?25h,[?25l[?25h 27[?25l[?25h,[?25l[?25h 30[?25l[?25h,[?25l[?25h 33[?25l[?25h,[?25l[?25h 36[?25l[?25h,[?25l[?25h 39[?25l[?25h,[?25l[?25h 42[?25l[?25h,[?25l[?25h 45[?25l[?25h,[?25l[?25h
  48[?25l[?25h,[?25l[?25h 51[?25l[?25h,[?25l[?25h 54[?25l[?25h,[?25l[?25h 57[?25l[?25h,[?25l[?25h 60[?25l[?25h,[?25l[?25h 63[?25l[?25h,[?25l[?25h 66[?25l[?25h,[?25l[?25h 69[?25l[?25h,[?25l[?25h 72[?25l[?25h,[?25l[?25h 75[?25l[?25h,[?25l[?25h 78[?25l[?25h,[?25l[?25h 81[?25l[?25h,[?25l[?25h 84[?25l[?25h,[?25l[?25h 87[?25l[?25h,[?25l[?25h 90[?25l[?25h,[?25l[?25h 93[?25l[?25h,[?25l[?25h
  96[?25l[?25h,[?25l[?25h 99[?25l[?25h,[?25l[?25h 102[?25l[?25h,[?25l[?25h 105[?25l[?25h,[?25l[?25h 108[?25l[?25h,[?25l[?25h 111[?25l[?25h,[?25l[?25h 114[?25l[?25h,[?25l[?25h 117[?25l[?25h,[?25l[?25h 120[?25l[?25h,[?25l[?25h 123[?25l[?25h,[?25l[?25h 126[?25l[?25h,[?25l[?25h 129[?25l[?25h,[?25l[?25h 132[?25l[?25h,[?25l[?25h 135[?25l[?25h,[?25l[?25h 138[?25l[?25h,[?25l[?25h 141[?25l[?25h,[?25l[?25h
  144[?25l[?25h,[?25l[?25h 147[?25l[?25h,[?25l[?25h 150[?25l[?25h,[?25l[?25h 153[?25l[?25h,[?25l[?25h 156[?25l[?25h,[?25l[?25h 159[?25l[?25h,[?25l[?25h 162[?25l[?25h,[?25l[?25h 165[?25l[?25h,[?25l[?25h 168[?25l[?25h,[?25l[?25h 171[?25l[?25h,[?25l[?25h 174[?25l[?25h,[?25l[?25h 177[?25l[?25h,[?25l[?25h 180[?25l[?25h,[?25l[?25h 183[?25l[?25h,[?25l[?25h 186[?25l[?25h,[?25l[?25h 189[?25l[?25h,[?25l[?25h
  192[?25l[?25h,[?25l[?25h 195[?25l[?25h,[?25l[?25h 198[?25l[?25h,[?25l[?25h 201[?25l[?25h,[?25l[?25h 204[?25l[?25h,[?25l[?25h 207[?25l[?25h,[?25l[?25h 210[?25l[?25h,[?25l[?25h 213[?25l[?25h,[?25l[?25h 216[?25l[?25h,[?25l[?25h 2[?25l[?25h19[?25l[?25h,[?25l[?25h 222[?25l[?25h,[?25l[?25h 225[?25l[?25h,[?25l[?25h 228[?25l[?25h,[?25l[?25h 23[?25l[?25h1[?25l[?25h,[?25l[?25h 23[?25l[?25h4[?25l[?25h,[?25l[?25h 23[?25l[?25h7[?25l[?25h,[?25l[?25h
  240[?25l[?25h,[?25l[?25h 24[?25l[?25h3[?25l[?25h,[?25l[?25h 24[?25l[?25h6[?25l[?25h,[?25l[?25h 24[?25l[?25h9[?25l[?25h,[?25l[?25h 25[?25l[?25h2[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h
  255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 255[?25l[?25h,[?25l[?25h 25[?25l[?25h2[?25l[?25h,[?25l[?25h
  24[?25l[?25h9[?25l[?25h,[?25l[?25h 24[?25l[?25h6[?25l[?25h,[?25l[?25h 24[?25l[?25h3[?25l[?25h,[?25l[?25h 240[?25l[?25h,[?25l[?25h 23[?25l[?25h7[?25l[?25h,[?25l[?25h 23[?25l[?25h4[?25l[?25h,[?25l[?25h 23[?25l[?25h1[?25l[?25h,[?25l[?25h 228[?25l[?25h,[?25l[?25h 225[?25l[?25h,[?25l[?25h 222[?25l[?25h,[?25l[?25h 2[?25l[?25h19[?25l[?25h,[?25l[?25h 216[?25l[?25h,[?25l[?25h 213[?25l[?25h,[?25l[?25h 210[?25l[?25h,[?25l[?25h 207[?25l[?25h,[?25l[?25h 204[?25l[?25h,[?25l[?25h
  201[?25l[?25h,[?25l[?25h 198[?25l[?25h,[?25l[?25h 195[?25l[?25h,[?25l[?25h 192[?25l[?25h,[?25l[?25h 189[?25l[?25h,[?25l[?25h 186[?25l[?25h,[?25l[?25h 183[?25l[?25h,[?25l[?25h 180[?25l[?25h,[?25l[?25h 177[?25l[?25h,[?25l[?25h 174[?25l[?25h,[?25l[?25h 171[?25l[?25h,[?25l[?25h 168[?25l[?25h,[?25l[?25h 165[?25l[?25h,[?25l[?25h 162[?25l[?25h,[?25l[?25h 159[?25l[?25h,[?25l[?25h 156[?25l[?25h,[?25l[?25h
  153[?25l[?25h,[?25l[?25h 150[?25l[?25h,[?25l[?25h 147[?25l[?25h,[?25l[?25h 144[?25l[?25h,[?25l[?25h 141[?25l[?25h,[?25l[?25h 138[?25l[?25h,[?25l[?25h 135[?25l[?25h,[?25l[?25h 132[?25l[?25h,[?25l[?25h 129[?25l[?25h,[?25l[?25h 126[?25l[?25h,[?25l[?25h 123[?25l[?25h,[?25l[?25h 120[?25l[?25h,[?25l[?25h 117[?25l[?25h,[?25l[?25h 114[?25l[?25h,[?25l[?25h 111[?25l[?25h,[?25l[?25h 108[?25l[?25h,[?25l[?25h
  105[?25l[?25h,[?25l[?25h 102[?25l[?25h,[?25l[?25h 99[?25l[?25h,[?25l[?25h 96[?25l[?25h,[?25l[?25h 93[?25l[?25h,[?25l[?25h 90[?25l[?25h,[?25l[?25h 87[?25l[?25h,[?25l[?25h 84[?25l[?25h,[?25l[?25h 81[?25l[?25h,[?25l[?25h 78[?25l[?25h,[?25l[?25h 75[?25l[?25h,[?25l[?25h 72[?25l[?25h,[?25l[?25h 69[?25l[?25h,[?25l[?25h 66[?25l[?25h,[?25l[?25h 63[?25l[?25h,[?25l[?25h 60[?25l[?25h,[?25l[?25h 57[?25l[?25h,[?25l[?25h 54[?25l[?25h,[?25l[?25h 51[?25l[?25h,[?25l[?25h 48[?25l[?25h,[?25l[?25h
  45[?25l[?25h,[?25l[?25h 42[?25l[?25h,[?25l[?25h 39[?25l[?25h,[?25l[?25h 36[?25l[?25h,[?25l[?25h 33[?25l[?25h,[?25l[?25h 30[?25l[?25h,[?25l[?25h 27[?25l[?25h,[?25l[?25h 24[?25l[?25h,[?25l[?25h 21[?25l[?25h,[?25l[?25h 18[?25l[?25h,[?25l[?25h 15[?25l[?25h,[?25l[?25h 12[?25l[?25h,[?25l[?25h 9[?25l[?25h,[?25l[?25h 6[?25l[?25h,[?25l[?25h 3[?25l[?25h,[?25l[?25h 0[?25l[?25h,[?25l[?25h
  -[?25l[?25h3[?25l[?25h,[?25l[?25h -[?25l[?25h6[?25l[?25h,[?25l[?25h -[?25l[?25h9[?25l[?25h,[?25l[?25h -[?25l[?25h12[?25l[?25h,[?25l[?25h -[?25l[?25h15[?25l[?25h,[?25l[?25h -[?25l[?25h18[?25l[?25h,[?25l[?25h -[?25l[?25h21[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h,[?25l[?25h -[?25l[?25h27[?25l[?25h,[?25l[?25h -[?25l[?25h30[?25l[?25h,[?25l[?25h -[?25l[?25h33[?25l[?25h,[?25l[?25h -[?25l[?25h36[?25l[?25h,[?25l[?25h -[?25l[?25h39[?25l[?25h,[?25l[?25h -[?25l[?25h42[?25l[?25h,[?25l[?25h -[?25l[?25h45[?25l[?25h,[?25l[?25h -[?25l[?25h48[?25l[?25h,[?25l[?25h
  -[?25l[?25h51[?25l[?25h,[?25l[?25h -[?25l[?25h54[?25l[?25h,[?25l[?25h -[?25l[?25h57[?25l[?25h,[?25l[?25h -[?25l[?25h60[?25l[?25h,[?25l[?25h -[?25l[?25h63[?25l[?25h,[?25l[?25h -[?25l[?25h66[?25l[?25h,[?25l[?25h -[?25l[?25h69[?25l[?25h,[?25l[?25h -[?25l[?25h72[?25l[?25h,[?25l[?25h -[?25l[?25h75[?25l[?25h,[?25l[?25h -[?25l[?25h78[?25l[?25h,[?25l[?25h -[?25l[?25h81[?25l[?25h,[?25l[?25h -[?25l[?25h84[?25l[?25h,[?25l[?25h -[?25l[?25h87[?25l[?25h,[?25l[?25h -[?25l[?25h90[?25l[?25h,[?25l[?25h -[?25l[?25h93[?25l[?25h,[?25l[?25h -[?25l[?25h96[?25l[?25h,[?25l[?25h
  -[?25l[?25h99[?25l[?25h,[?25l[?25h -[?25l[?25h102[?25l[?25h,[?25l[?25h -[?25l[?25h105[?25l[?25h,[?25l[?25h -[?25l[?25h108[?25l[?25h,[?25l[?25h -[?25l[?25h111[?25l[?25h,[?25l[?25h -[?25l[?25h114[?25l[?25h,[?25l[?25h -[?25l[?25h117[?25l[?25h,[?25l[?25h -[?25l[?25h120[?25l[?25h,[?25l[?25h -[?25l[?25h123[?25l[?25h,[?25l[?25h -[?25l[?25h126[?25l[?25h,[?25l[?25h -[?25l[?25h129[?25l[?25h,[?25l[?25h -[?25l[?25h132[?25l[?25h,[?25l[?25h -[?25l[?25h135[?25l[?25h,[?25l[?25h -[?25l[?25h138[?25l[?25h,[?25l[?25h -[?25l[?25h141[?25l[?25h,[?25l[?25h -[?25l[?25h144[?25l[?25h,[?25l[?25h
  -[?25l[?25h147[?25l[?25h,[?25l[?25h -[?25l[?25h150[?25l[?25h,[?25l[?25h -[?25l[?25h153[?25l[?25h,[?25l[?25h -[?25l[?25h156[?25l[?25h,[?25l[?25h -[?25l[?25h159[?25l[?25h,[?25l[?25h -[?25l[?25h162[?25l[?25h,[?25l[?25h -[?25l[?25h165[?25l[?25h,[?25l[?25h -[?25l[?25h168[?25l[?25h,[?25l[?25h -[?25l[?25h171[?25l[?25h,[?25l[?25h -[?25l[?25h174[?25l[?25h,[?25l[?25h -[?25l[?25h177[?25l[?25h,[?25l[?25h -[?25l[?25h180[?25l[?25h,[?25l[?25h -[?25l[?25h183[?25l[?25h,[?25l[?25h -[?25l[?25h186[?25l[?25h,[?25l[?25h -[?25l[?25h189[?25l[?25h,[?25l[?25h -[?25l[?25h192[?25l[?25h,[?25l[?25h
  -[?25l[?25h195[?25l[?25h,[?25l[?25h -[?25l[?25h198[?25l[?25h,[?25l[?25h -[?25l[?25h201[?25l[?25h,[?25l[?25h -[?25l[?25h204[?25l[?25h,[?25l[?25h -[?25l[?25h207[?25l[?25h,[?25l[?25h -[?25l[?25h210[?25l[?25h,[?25l[?25h -[?25l[?25h213[?25l[?25h,[?25l[?25h -[?25l[?25h216[?25l[?25h,[?25l[?25h -[?25l[?25h2[?25l[?25h19[?25l[?25h,[?25l[?25h -[?25l[?25h222[?25l[?25h,[?25l[?25h -[?25l[?25h225[?25l[?25h,[?25l[?25h -[?25l[?25h228[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h1[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h4[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h7[?25l[?25h,[?25l[?25h -[?25l[?25h240[?25l[?25h,[?25l[?25h
  -[?25l[?25h24[?25l[?25h3[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h6[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h9[?25l[?25h,[?25l[?25h -[?25l[?25h25[?25l[?25h2[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h
  -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h255[?25l[?25h,[?25l[?25h -[?25l[?25h25[?25l[?25h2[?25l[?25h,[?25l[?25h
  -[?25l[?25h24[?25l[?25h9[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h6[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h3[?25l[?25h,[?25l[?25h -[?25l[?25h240[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h7[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h4[?25l[?25h,[?25l[?25h -[?25l[?25h23[?25l[?25h1[?25l[?25h,[?25l[?25h -[?25l[?25h228[?25l[?25h,[?25l[?25h -[?25l[?25h225[?25l[?25h,[?25l[?25h -[?25l[?25h222[?25l[?25h,[?25l[?25h -[?25l[?25h2[?25l[?25h19[?25l[?25h,[?25l[?25h -[?25l[?25h216[?25l[?25h,[?25l[?25h -[?25l[?25h213[?25l[?25h,[?25l[?25h -[?25l[?25h210[?25l[?25h,[?25l[?25h -[?25l[?25h207[?25l[?25h,[?25l[?25h -[?25l[?25h204[?25l[?25h,[?25l[?25h
  -[?25l[?25h201[?25l[?25h,[?25l[?25h -[?25l[?25h198[?25l[?25h,[?25l[?25h -[?25l[?25h195[?25l[?25h,[?25l[?25h -[?25l[?25h192[?25l[?25h,[?25l[?25h -[?25l[?25h189[?25l[?25h,[?25l[?25h -[?25l[?25h186[?25l[?25h,[?25l[?25h -[?25l[?25h183[?25l[?25h,[?25l[?25h -[?25l[?25h180[?25l[?25h,[?25l[?25h -[?25l[?25h177[?25l[?25h,[?25l[?25h -[?25l[?25h174[?25l[?25h,[?25l[?25h -[?25l[?25h171[?25l[?25h,[?25l[?25h -[?25l[?25h168[?25l[?25h,[?25l[?25h -[?25l[?25h165[?25l[?25h,[?25l[?25h -[?25l[?25h162[?25l[?25h,[?25l[?25h -[?25l[?25h159[?25l[?25h,[?25l[?25h -[?25l[?25h156[?25l[?25h,[?25l[?25h
  -[?25l[?25h153[?25l[?25h,[?25l[?25h -[?25l[?25h150[?25l[?25h,[?25l[?25h -[?25l[?25h147[?25l[?25h,[?25l[?25h -[?25l[?25h144[?25l[?25h,[?25l[?25h -[?25l[?25h141[?25l[?25h,[?25l[?25h -[?25l[?25h138[?25l[?25h,[?25l[?25h -[?25l[?25h135[?25l[?25h,[?25l[?25h -[?25l[?25h132[?25l[?25h,[?25l[?25h -[?25l[?25h129[?25l[?25h,[?25l[?25h -[?25l[?25h126[?25l[?25h,[?25l[?25h -[?25l[?25h123[?25l[?25h,[?25l[?25h -[?25l[?25h120[?25l[?25h,[?25l[?25h -[?25l[?25h117[?25l[?25h,[?25l[?25h -[?25l[?25h114[?25l[?25h,[?25l[?25h -[?25l[?25h111[?25l[?25h,[?25l[?25h -[?25l[?25h108[?25l[?25h,[?25l[?25h
  -[?25l[?25h105[?25l[?25h,[?25l[?25h -[?25l[?25h102[?25l[?25h,[?25l[?25h -[?25l[?25h99[?25l[?25h,[?25l[?25h -[?25l[?25h96[?25l[?25h,[?25l[?25h -[?25l[?25h93[?25l[?25h,[?25l[?25h -[?25l[?25h90[?25l[?25h,[?25l[?25h -[?25l[?25h87[?25l[?25h,[?25l[?25h -[?25l[?25h84[?25l[?25h,[?25l[?25h -[?25l[?25h81[?25l[?25h,[?25l[?25h -[?25l[?25h78[?25l[?25h,[?25l[?25h -[?25l[?25h75[?25l[?25h,[?25l[?25h -[?25l[?25h72[?25l[?25h,[?25l[?25h -[?25l[?25h69[?25l[?25h,[?25l[?25h -[?25l[?25h66[?25l[?25h,[?25l[?25h -[?25l[?25h63[?25l[?25h,[?25l[?25h -[?25l[?25h60[?25l[?25h,[?25l[?25h -[?25l[?25h57[?25l[?25h,[?25l[?25h -[?25l[?25h54[?25l[?25h,[?25l[?25h -[?25l[?25h51[?25l[?25h,[?25l[?25h -[?25l[?25h48[?25l[?25h,[?25l[?25h
  -[?25l[?25h45[?25l[?25h,[?25l[?25h -[?25l[?25h42[?25l[?25h,[?25l[?25h -[?25l[?25h39[?25l[?25h,[?25l[?25h -[?25l[?25h36[?25l[?25h,[?25l[?25h -[?25l[?25h33[?25l[?25h,[?25l[?25h -[?25l[?25h30[?25l[?25h,[?25l[?25h -[?25l[?25h27[?25l[?25h,[?25l[?25h -[?25l[?25h24[?25l[?25h,[?25l[?25h -[?25l[?25h21[?25l[?25h,[?25l[?25h -[?25l[?25h18[?25l[?25h,[?25l[?25h -[?25l[?25h15[?25l[?25h,[?25l[?25h -[?25l[?25h12[?25l[?25h,[?25l[?25h -[?25l[?25h9[?25l[?25h,[?25l[?25h -[?25l[?25h6[?25l[?25h,[?25l[?25h -[?25l[?25h3[?25l[?25h
};[?25l[?25h

//[?25l[?25h Variables[?25l[?25h for[?25l[?25h phase[?25l[?25h tracking[?25l[?25h
float[?25l[?25h phase[?25l[?25h =[?25l[?25h 0[?25l[?25h;[?25l[?25h

void[?25l[?25h setup[?25l[?25h()[?25l[?25h {[?25l[?25h
  Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h115[?25l[?25h200[?25l[?25h);[?25l[?25h
  Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hInitializing[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h 24[?25l[?25h-bit[?25l[?25h Audio[?25l[?25h...");[?25l[?25h

  //[?25l[?25h Configure[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h Params[?25l[?25h
  i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {[?25l[?25h
    .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_MASTER[?25l[?25h),[?25l[?25h
    .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h SAMPLE[?25l[?25h_RATE[?25l[?25h,[?25l[?25h
    .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BITS[?25l[?25h_PER[?25l[?25h_SAMPLE[?25l[?25h_[?25l[?25h24[?25l[?25hBIT[?25l[?25h,[?25l[?25h //[?25l[?25h 24[?25l[?25h-bit[?25l[?25h audio[?25l[?25h
    .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_FMT[?25l[?25h_ONLY[?25l[?25h_LEFT[?25l[?25h,[?25l[?25h //[?25l[?25h We[?25l[?25h are[?25l[?25h sending[?25l[?25h a[?25l[?25h mono[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h usually[?25l[?25h sent[?25l[?25h as[?25l[?25h Left[?25l[?25h
    .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h
    .[?25l[?25hintr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_INTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,[?25l[?25h //[?25l[?25h High[?25l[?25h interrupt[?25l[?25h priority[?25l[?25h
    .[?25l[?25hdma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h 8[?25l[?25h,[?25l[?25h //[?25l[?25h DMA[?25l[?25h buffer[?25l[?25h count[?25l[?25h
    .[?25l[?25hdma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h 64[?25l[?25h,[?25l[?25h  //[?25l[?25h DMA[?25l[?25h buffer[?25l[?25h length[?25l[?25h ([?25l[?25hframes[?25l[?25h)[?25l[?25h
    .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h,[?25l[?25h
    .[?25l[?25htx[?25l[?25h_desc[?25l[?25h_auto[?25l[?25h_clear[?25l[?25h =[?25l[?25h true[?25l[?25h,[?25l[?25h
    .[?25l[?25hfixed[?25l[?25h_m[?25l[?25hclk[?25l[?25h =[?25l[?25h 0[?25l[?25h
  };[?25l[?25h

  //[?25l[?25h Configure[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h Pins[?25l[?25h
  i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {[?25l[?25h
    .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_B[?25l[?25hCLK[?25l[?25h,[?25l[?25h
    .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_WS[?25l[?25h,[?25l[?25h
    .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_D[?25l[?25hOUT[?25l[?25h,[?25l[?25h
    .[?25l[?25hdata[?25l[?25h_in[?25l[?25h_num[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_PIN[?25l[?25h_NO[?25l[?25h_CHANGE[?25l[?25h
  };[?25l[?25h

  //[?25l[?25h Install[?25l[?25h and[?25l[?25h Start[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h Driver[?25l[?25h
  i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h 0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);[?25l[?25h
  i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);[?25l[?25h
}[?25l[?25h

void[?25l[?25h loop[?25l[?25h()[?25l[?25h {[?25l[?25h
  //[?25l[?25h 1[?25l[?25h.[?25l[?25h Generate[?25l[?25h the[?25l[?25h audio[?25l[?25h data[?25l[?25h
  //[?25l[?25h Calculate[?25l[?25h the[?25l[?25h step[?25l[?25h size[?25l[?25h for[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h
  //[?25l[?25h We[?25l[?25h want[?25l[?25h Middle[?25l[?25h C[?25l[?25h ([?25l[?25h26[?25l[?25h1[?25l[?25h.[?25l[?25h63[?25l[?25hHz[?25l[?25h)[?25l[?25h at[?25l[?25h 44[?25l[?25h1[?25l[?25h00[?25l[?25hHz[?25l[?25h sample[?25l[?25h rate[?25l[?25h.[?25l[?25h
  //[?25l[?25h We[?25l[?25h step[?25l[?25h through[?25l[?25h the[?25l[?25h sine[?25l[?25h_table[?25l[?25h.[?25l[?25h
  float[?25l[?25h step[?25l[?25h =[?25l[?25h ([?25l[?25hfloat[?25l[?25h)([?25l[?25hSAMPLE[?25l[?25h_RATE[?25l[?25h /[?25l[?25h F[?25l[?25hREQ[?25l[?25h_M[?25l[?25hID[?25l[?25h_C[?25l[?25h);[?25l[?25h
  
  //[?25l[?25h Get[?25l[?25h current[?25l[?25h sample[?25l[?25h from[?25l[?25h sine[?25l[?25h table[?25l[?25h ([?25l[?25h0[?25l[?25h-[?25l[?25h255[?25l[?25h)[?25l[?25h
  uint[?25l[?25h8[?25l[?25h_t[?25l[?25h raw[?25l[?25h_sample[?25l[?25h =[?25l[?25h sine[?25l[?25h_table[?25l[?25h[([?25l[?25hint[?25l[?25h)[?25l[?25hphase[?25l[?25h];[?25l[?25h
  
  //[?25l[?25h Calculate[?25l[?25h next[?25l[?25h phase[?25l[?25h
  phase[?25l[?25h +=[?25l[?25h ([?25l[?25hfloat[?25l[?25h)[?25l[?25h256[?25l[?25h.[?25l[?25h0[?25l[?25h /[?25l[?25h step[?25l[?25h;[?25l[?25h
  if[?25l[?25h ([?25l[?25hphase[?25l[?25h >=[?25l[?25h 256[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h 256[?25l[?25h;[?25l[?25h

  //[?25l[?25h 2[?25l[?25h.[?25l[?25h Format[?25l[?25h for[?25l[?25h 24[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h
  //[?25l[?25h We[?25l[?25h need[?25l[?25h to[?25l[?25h scale[?25l[?25h the[?25l[?25h 8[?25l[?25h-bit[?25l[?25h value[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h.[?25l[?25h
  //[?25l[?25h Shift[?25l[?25h left[?25l[?25h by[?25l[?25h 16[?25l[?25h bits[?25l[?25h ([?25l[?25hto[?25l[?25h get[?25l[?25h 24[?25l[?25h-bit[?25l[?25h:[?25l[?25h 8[?25l[?25h bits[?25l[?25h 0[?25l[?25h-padding[?25l[?25h).[?25l[?25h
  //[?25l[?25h Since[?25l[?25h the[?25l[?25h table[?25l[?25h includes[?25l[?25h negative[?25l[?25h values[?25l[?25h ([?25l[?25hunsigned[?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h),[?25l[?25h we[?25l[?25h must[?25l[?25h sign[?25l[?25h-[?25l[?25hextend[?25l[?25h them[?25l[?25h.[?25l[?25h
  int[?25l[?25h16[?25l[?25h_t[?25l[?25h signed[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h16[?25l[?25h_t[?25l[?25h)[?25l[?25hraw[?25l[?25h_sample[?25l[?25h *[?25l[?25h 256[?25l[?25h;[?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h match[?25l[?25h 8[?25l[?25h-bit[?25l[?25h logic[?25l[?25h center[?25l[?25h
  uint[?25l[?25h32[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_data[?25l[?25h =[?25l[?25h (([?25l[?25huint[?25l[?25h32[?25l[?25h_t[?25l[?25h)[?25l[?25hsigned[?25l[?25h_sample[?25l[?25h)[?25l[?25h <[?25l[?25h<[?25l[?25h 8[?25l[?25h;[?25l[?25h //[?25l[?25h Pad[?25l[?25h to[?25l[?25h 24[?25l[?25h-bit[?25l[?25h LSB[?25l[?25h first[?25l[?25h

  //[?25l[?25h 3[?25l[?25h.[?25l[?25h Send[?25l[?25h to[?25l[?25h DAC[?25l[?25h
  size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_written[?25l[?25h;[?25l[?25h
  i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h ([?25l[?25hconst[?25l[?25h void[?25l[?25h *)&[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_data[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_data[?25l[?25h),[?25l[?25h &[?25l[?25hbytes[?25l[?25h_written[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DELAY[?25l[?25h);[?25l[?25h
}[?25l[?25h
```[?25l[?25h

[?25l[?25h0.29user 0.30system 1:53.50elapsed 0%CPU (0avgtext+0avgdata 45360maxresident)k
0inputs+288outputs (0major+6970minor)pagefaults 0swaps
