[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ¼ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ  [K[?25h[?2026l[?2026h[?25l[1Gâ ™ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¹ [K[?25h[?2026l[?2026h[?25l[1Gâ ¸ [K[?25h[?2026l[?2026h[?25l[1Gâ ´ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ ¦ [K[?25h[?2026l[?2026h[?25l[1Gâ § [K[?25h[?2026l[?2026h[?25l[1Gâ ‡ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?2026h[?25l[1Gâ ‹ [K[?25h[?2026l[?25l[?2026h[?25l[1G[K[?25h[?2026l[2K[1G[?25h[?25l[?25h[?25l[?25h[?25l[?25hThinking...
Al[?25l[?25hright[?25l[?25h,[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h create[?25l[?25h an[?25l[?25h Arduino[?25l[?25h project[?25l[?25h that[?25l[?25h sends[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25hwhich[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h)[?25l[?25h to[?25l[?25h an[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h.[?25l[?25h First[?25l[?25h,[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h understand[?25l[?25h the[?25l[?25h requirements[?25l[?25h and[?25l[?25h components[?25l[?25h involved[?25l[?25h.

[?25l[?25h###[?25l[?25h Understanding[?25l[?25h the[?25l[?25h Requirements[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h **[?25l[?25hContinu[?25l[?25hous[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h**:[?25l[?25h The[?25l[?25h program[?25l[?25h should[?25l[?25h generate[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h continuously[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h **[?25l[?25hMiddle[?25l[?25h C[?25l[?25h Frequency[?25l[?25h**:[?25l[?25h Middle[?25l[?25h C[?25l[?25h has[?25l[?25h a[?25l[?25h frequency[?25l[?25h of[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h **[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h**:[?25l[?25h The[?25l[?25h output[?25l[?25h will[?25l[?25h be[?25l[?25h sent[?25l[?25h to[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h Digital[?25l[?25h-to[?25l[?25h-[?25l[?25hAnal[?25l[?25hog[?25l[?25h Con[?25l[?25hverter[?25l[?25h ([?25l[?25hD[?25l[?25hAC[?25l[?25h).[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h know[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h.

[?25l[?25h###[?25l[?25h Steps[?25l[?25h to[?25l[?25h Sol[?25l[?25hve[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h **[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h Pin[?25l[?25h Configuration[?25l[?25h**:[?25l[?25h For[?25l[?25h an[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h,[?25l[?25h we[?25l[?25h typically[?25l[?25h need[?25l[?25h three[?25l[?25h main[?25l[?25h signals[?25l[?25h:
[?25l[?25h  [?25l[?25h -[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h:[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h
[?25l[?25h  [?25l[?25h -[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h:[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h ([?25l[?25halso[?25l[?25h known[?25l[?25h as[?25l[?25h Word[?25l[?25h Select[?25l[?25h)
[?25l[?25h  [?25l[?25h -[?25l[?25h DATA[?25l[?25h:[?25l[?25h Serial[?25l[?25h Data[?25l[?25h Line[?25l[?25h

[?25l[?25h  [?25l[?25h The[?25l[?25h exact[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h will[?25l[?25h depend[?25l[?25h on[?25l[?25h the[?25l[?25h specific[?25l[?25h DAC[?25l[?25h and[?25l[?25h Arduino[?25l[?25h board[?25l[?25h being[?25l[?25h used[?25l[?25h.[?25l[?25h For[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h I[?25l[?25h'll[?25l[?25h assume[?25l[?25h common[?25l[?25h pin[?25l[?25h assignments[?25l[?25h for[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h or[?25l[?25h similar[?25l[?25h board[?25l[?25h with[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h capabilities[?25l[?25h.

[?25l[?25h2[?25l[?25h.[?25l[?25h **[?25l[?25hS[?25l[?25hine[?25l[?25h Wave[?25l[?25h Generation[?25l[?25h**:[?25l[?25h A[?25l[?25h sine[?25l[?25h wave[?25l[?25h can[?25l[?25h be[?25l[?25h generated[?25l[?25h using[?25l[?25h trig[?25l[?25hon[?25l[?25hometric[?25l[?25h functions[?25l[?25h.[?25l[?25h In[?25l[?25h Arduino[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h use[?25l[?25h the[?25l[?25h `[?25l[?25hsin[?25l[?25h()`[?25l[?25h function[?25l[?25h from[?25l[?25h the[?25l[?25h standard[?25l[?25h library[?25l[?25h.[?25l[?25h However[?25l[?25h,[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h dealing[?25l[?25h with[?25l[?25h audio[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h generate[?25l[?25h samples[?25l[?25h at[?25l[?25h a[?25l[?25h high[?25l[?25h frequency[?25l[?25h ([?25l[?25hsample[?25l[?25h rate[?25l[?25h)[?25l[?25h to[?25l[?25h ensure[?25l[?25h good[?25l[?25h quality[?25l[?25h.

[?25l[?25h  [?25l[?25h Common[?25l[?25h sample[?25l[?25h rates[?25l[?25h are[?25l[?25h [?25l[?25h8[?25l[?25h k[?25l[?25hHz[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h k[?25l[?25hHz[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h.[?25l[?25h1[?25l[?25h k[?25l[?25hHz[?25l[?25h,[?25l[?25h etc[?25l[?25h.[?25l[?25h For[?25l[?25h simplicity[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h use[?25l[?25h [?25l[?25h8[?25l[?25h k[?25l[?25hHz[?25l[?25h.[?25l[?25h This[?25l[?25h means[?25l[?25h we[?25l[?25h'll[?25l[?25h generate[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h samples[?25l[?25h per[?25l[?25h second[?25l[?25h.

[?25l[?25h3[?25l[?25h.[?25l[?25h **[?25l[?25hMiddle[?25l[?25h C[?25l[?25h Frequency[?25l[?25h**:[?25l[?25h The[?25l[?25h frequency[?25l[?25h of[?25l[?25h middle[?25l[?25h C[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h.[?25l[?25h To[?25l[?25h generate[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h this[?25l[?25h frequency[?25l[?25h with[?25l[?25h our[?25l[?25h sample[?25l[?25h rate[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h calculate[?25l[?25h the[?25l[?25h period[?25l[?25h in[?25l[?25h terms[?25l[?25h of[?25l[?25h samples[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h Period[?25l[?25h in[?25l[?25h seconds[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h /[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h â‰ˆ[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h0[?25l[?25h3[?25l[?25h8[?25l[?25h2[?25l[?25h3[?25l[?25h seconds[?25l[?25h
[?25l[?25h  [?25l[?25h -[?25l[?25h Number[?25l[?25h of[?25l[?25h samples[?25l[?25h per[?25l[?25h period[?25l[?25h =[?25l[?25h sample[?25l[?25h_rate[?25l[?25h *[?25l[?25h period[?25l[?25h_in[?25l[?25h_seconds[?25l[?25h â‰ˆ[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h *[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h0[?25l[?25h3[?25l[?25h8[?25l[?25h2[?25l[?25h3[?25l[?25h â‰ˆ[?25l[?25h [?25l[?25h3[?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h samples[?25l[?25h

[?25l[?25h  [?25l[?25h So[?25l[?25h,[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h will[?25l[?25h complete[?25l[?25h one[?25l[?25h full[?25l[?25h cycle[?25l[?25h every[?25l[?25h ~[?25l[?25h3[?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h samples[?25l[?25h.

[?25l[?25h4[?25l[?25h.[?25l[?25h **[?25l[?25hGener[?25l[?25hating[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h Samples[?25l[?25h**:[?25l[?25h For[?25l[?25h each[?25l[?25h sample[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h calculate[?25l[?25h the[?25l[?25h amplitude[?25l[?25h of[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h that[?25l[?25h point[?25l[?25h in[?25l[?25h time[?25l[?25h.[?25l[?25h The[?25l[?25h sine[?25l[?25h function[?25l[?25h takes[?25l[?25h an[?25l[?25h angle[?25l[?25h in[?25l[?25h radi[?25l[?25hans[?25l[?25h.[?25l[?25h Since[?25l[?25h one[?25l[?25h full[?25l[?25h cycle[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h radi[?25l[?25hans[?25l[?25h,[?25l[?25h and[?25l[?25h we[?25l[?25h have[?25l[?25h approximately[?25l[?25h [?25l[?25h3[?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h samples[?25l[?25h per[?25l[?25h cycle[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h compute[?25l[?25h the[?25l[?25h angle[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h as[?25l[?25h follows[?25l[?25h:
[?25l[?25h  [?25l[?25h -[?25l[?25h For[?25l[?25h sample[?25l[?25h number[?25l[?25h `[?25l[?25hn[?25l[?25h`,[?25l[?25h the[?25l[?25h phase[?25l[?25h ([?25l[?25hangle[?25l[?25h)[?25l[?25h is[?25l[?25h `([?25l[?25h2[?25l[?25h *[?25l[?25h Ï€[?25l[?25h *[?25l[?25h n[?25l[?25h)[?25l[?25h /[?25l[?25h ([?25l[?25hnumber[?25l[?25h of[?25l[?25h samples[?25l[?25h per[?25l[?25h period[?25l[?25h)`

[?25l[?25h5[?25l[?25h.[?25l[?25h **[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h Communication[?25l[?25h**:[?25l[?25h To[?25l[?25h send[?25l[?25h data[?25l[?25h to[?25l[?25h the[?25l[?25h DAC[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h configure[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h and[?25l[?25h send[?25l[?25h the[?25l[?25h generated[?25l[?25h sine[?25l[?25h wave[?25l[?25h data[?25l[?25h as[?25l[?25h a[?25l[?25h continuous[?25l[?25h stream[?25l[?25h.

[?25l[?25h  [?25l[?25h For[?25l[?25h the[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h,[?25l[?25h Arduino[?25l[?25h has[?25l[?25h built[?25l[?25h-in[?25l[?25h support[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h through[?25l[?25h the[?25l[?25h `[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h`[?25l[?25h library[?25l[?25h ([?25l[?25hpart[?25l[?25h of[?25l[?25h the[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h Arduino[?25l[?25h Core[?25l[?25h).[?25l[?25h However[?25l[?25h,[?25l[?25h since[?25l[?25h this[?25l[?25h is[?25l[?25h a[?25l[?25h general[?25l[?25h Arduino[?25l[?25h project[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h need[?25l[?25h to[?25l[?25h use[?25l[?25h a[?25l[?25h more[?25l[?25h generic[?25l[?25h approach[?25l[?25h if[?25l[?25h not[?25l[?25h using[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h.[?25l[?25h But[?25l[?25h given[?25l[?25h that[?25l[?25h many[?25l[?25h modern[?25l[?25h Ar[?25l[?25hdu[?25l[?25hinos[?25l[?25h with[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h capabilities[?25l[?25h ([?25l[?25hlike[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h)[?25l[?25h are[?25l[?25h common[?25l[?25h,[?25l[?25h I[?25l[?25h'll[?25l[?25h proceed[?25l[?25h with[?25l[?25h that[?25l[?25h.

[?25l[?25h  [?25l[?25h The[?25l[?25h basic[?25l[?25h steps[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmission[?25l[?25h would[?25l[?25h be[?25l[?25h:
[?25l[?25h  [?25l[?25h -[?25l[?25h Initialize[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h with[?25l[?25h the[?25l[?25h desired[?25l[?25h bit[?25l[?25h depth[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h),[?25l[?25h sample[?25l[?25h rate[?25l[?25h,[?25l[?25h and[?25l[?25h other[?25l[?25h parameters[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h Continu[?25l[?25hously[?25l[?25h generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h and[?25l[?25h send[?25l[?25h them[?25l[?25h through[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h.

[?25l[?25h6[?25l[?25h.[?25l[?25h **[?25l[?25hCode[?25l[?25h Structure[?25l[?25h**:
[?25l[?25h  [?25l[?25h -[?25l[?25h Define[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h ([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h,[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h,[?25l[?25h DATA[?25l[?25h).
[?25l[?25h  [?25l[?25h -[?25l[?25h Set[?25l[?25h up[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h In[?25l[?25h the[?25l[?25h main[?25l[?25h loop[?25l[?25h,[?25l[?25h continuously[?25l[?25h generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h and[?25l[?25h send[?25l[?25h them[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.

[?25l[?25h###[?25l[?25h Potential[?25l[?25h Libraries[?25l[?25h:
[?25l[?25hFor[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h use[?25l[?25h the[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h library[?25l[?25h.[?25l[?25h For[?25l[?25h other[?25l[?25h platforms[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h need[?25l[?25h to[?25l[?25h manually[?25l[?25h implement[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h or[?25l[?25h use[?25l[?25h a[?25l[?25h specific[?25l[?25h library[?25l[?25h for[?25l[?25h the[?25l[?25h DAC[?25l[?25h.

[?25l[?25hBut[?25l[?25h since[?25l[?25h the[?25l[?25h problem[?25l[?25h specifies[?25l[?25h an[?25l[?25h Arduino[?25l[?25h project[?25l[?25h with[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h and[?25l[?25h given[?25l[?25h that[?25l[?25h not[?25l[?25h all[?25l[?25h Ar[?25l[?25hdu[?25l[?25hinos[?25l[?25h have[?25l[?25h native[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h ([?25l[?25hlike[?25l[?25h AV[?25l[?25hR[?25l[?25h-based[?25l[?25h ones[?25l[?25h),[?25l[?25h it[?25l[?25h's[?25l[?25h likely[?25l[?25h targeting[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h or[?25l[?25h similar[?25l[?25h boards[?25l[?25h.[?25l[?25h For[?25l[?25h the[?25l[?25h sake[?25l[?25h of[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h I[?25l[?25h'll[?25l[?25h assume[?25l[?25h we[?25l[?25h're[?25l[?25h using[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h with[?25l[?25h Arduino[?25l[?25h Core[?25l[?25h.

[?25l[?25h###[?25l[?25h Implement[?25l[?25hing[?25l[?25h the[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h:
[?25l[?25hThe[?25l[?25h sine[?25l[?25h wave[?25l[?25h can[?25l[?25h be[?25l[?25h generated[?25l[?25h by[?25l[?25h iterating[?25l[?25h over[?25l[?25h time[?25l[?25h and[?25l[?25h calculating[?25l[?25h sin[?25l[?25h([?25l[?25h2[?25l[?25hÏ€[?25l[?25hft[?25l[?25h)[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h,[?25l[?25h where[?25l[?25h f[?25l[?25h is[?25l[?25h the[?25l[?25h frequency[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h),[?25l[?25h t[?25l[?25h is[?25l[?25h time[?25l[?25h in[?25l[?25h seconds[?25l[?25h,[?25l[?25h and[?25l[?25h the[?25l[?25h output[?25l[?25h is[?25l[?25h scaled[?25l[?25h to[?25l[?25h fit[?25l[?25h within[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h8[?25l[?25h to[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h).

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h generating[?25l[?25h samples[?25l[?25h at[?25l[?25h a[?25l[?25h fixed[?25l[?25h rate[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h just[?25l[?25h increment[?25l[?25h a[?25l[?25h phase[?25l[?25h accumulator[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h.

[?25l[?25hHere[?25l[?25h's[?25l[?25h how[?25l[?25h:
[?25l[?25h-[?25l[?25h Initialize[?25l[?25h a[?25l[?25h variable[?25l[?25h `[?25l[?25hphase[?25l[?25h`[?25l[?25h to[?25l[?25h [?25l[?25h0[?25l[?25h.
[?25l[?25h-[?25l[?25h For[?25l[?25h each[?25l[?25h sample[?25l[?25h:
[?25l[?25h [?25l[?25h -[?25l[?25h Compute[?25l[?25h the[?25l[?25h sine[?25l[?25h value[?25l[?25h:[?25l[?25h `[?25l[?25hsin[?25l[?25h([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h phase[?25l[?25h /[?25l[?25h ([?25l[?25hsample[?25l[?25h_rate[?25l[?25h /[?25l[?25h frequency[?25l[?25h))[?25l[?25h`
[?25l[?25h [?25l[?25h -[?25l[?25h Scale[?25l[?25h it[?25l[?25h to[?25l[?25h fit[?25l[?25h in[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h ([?25l[?25hassuming[?25l[?25h float[?25l[?25h output[?25l[?25h,[?25l[?25h but[?25l[?25h since[?25l[?25h DAC[?25l[?25h expects[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h convert[?25l[?25h float[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h).
[?25l[?25h [?25l[?25h -[?25l[?25h In[?25l[?25hcrement[?25l[?25h phase[?25l[?25h by[?25l[?25h [?25l[?25h1[?25l[?25h each[?25l[?25h sample[?25l[?25h.[?25l[?25h Since[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h completes[?25l[?25h a[?25l[?25h cycle[?25l[?25h every[?25l[?25h `[?25l[?25hsample[?25l[?25h_rate[?25l[?25h /[?25l[?25h frequency[?25l[?25h`[?25l[?25h samples[?25l[?25h,[?25l[?25h this[?25l[?25h will[?25l[?25h give[?25l[?25h us[?25l[?25h the[?25l[?25h correct[?25l[?25h period[?25l[?25hicity[?25l[?25h.

[?25l[?25hWait[?25l[?25h,[?25l[?25h no[?25l[?25h.[?25l[?25h Actually[?25l[?25h,[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h at[?25l[?25h time[?25l[?25h n[?25l[?25h ([?25l[?25hwhere[?25l[?25h n[?25l[?25h is[?25l[?25h the[?25l[?25h sample[?25l[?25h index[?25l[?25h),[?25l[?25h the[?25l[?25h angle[?25l[?25h Î¸[?25l[?25h can[?25l[?25h be[?25l[?25h calculated[?25l[?25h as[?25l[?25h:
[?25l[?25hÎ¸[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h *[?25l[?25h f[?25l[?25h *[?25l[?25h n[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h generating[?25l[?25h samples[?25l[?25h continuously[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h use[?25l[?25h a[?25l[?25h phase[?25l[?25h accumulator[?25l[?25h approach[?25l[?25h where[?25l[?25h we[?25l[?25h increment[?25l[?25h by[?25l[?25h `[?25l[?25h2[?25l[?25hÏ€[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h`[?25l[?25h each[?25l[?25h sample[?25l[?25h.

[?25l[?25hSo[?25l[?25h,[?25l[?25h define[?25l[?25h:
[?25l[?25hdelta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h)[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h

[?25l[?25hThen[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h:
[?25l[?25hcurrent[?25l[?25h_[?25l[?25hphase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h
[?25l[?25hif[?25l[?25h current[?25l[?25h_[?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h,[?25l[?25h subtract[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h to[?25l[?25h keep[?25l[?25h it[?25l[?25h within[?25l[?25h one[?25l[?25h cycle[?25l[?25h ([?25l[?25hbut[?25l[?25h since[?25l[?25h sine[?25l[?25h is[?25l[?25h periodic[?25l[?25h,[?25l[?25h this[?25l[?25h might[?25l[?25h not[?25l[?25h be[?25l[?25h necessary[?25l[?25h if[?25l[?25h using[?25l[?25h floating[?25l[?25h point[?25l[?25h)

[?25l[?25hThen[?25l[?25h the[?25l[?25h amplitude[?25l[?25h at[?25l[?25h that[?25l[?25h time[?25l[?25h is[?25l[?25h sin[?25l[?25h(current[?25l[?25h_[?25l[?25hphase[?25l[?25h),[?25l[?25h scaled[?25l[?25h appropriately[?25l[?25h.

[?25l[?25hBut[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h map[?25l[?25h this[?25l[?25h to[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h.[?25l[?25h The[?25l[?25h range[?25l[?25h of[?25l[?25h sin[?25l[?25h is[?25l[?25h [-[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h],[?25l[?25h so[?25l[?25h we[?25l[?25h can[?25l[?25h multiply[?25l[?25h by[?25l[?25h ([?25l[?25h2[?25l[?25h^[?25l[?25h2[?25l[?25h3[?25l[?25h -[?25l[?25h [?25l[?25h1[?25l[?25h)[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h to[?25l[?25h get[?25l[?25h the[?25l[?25h full[?25l[?25h range[?25l[?25h of[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h8[?25l[?25h to[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h).

[?25l[?25hWait[?25l[?25h,[?25l[?25h actually[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h signed[?25l[?25h is[?25l[?25h from[?25l[?25h -[?25l[?25h2[?25l[?25h^[?25l[?25h2[?25l[?25h3[?25l[?25h to[?25l[?25h +[?25l[?25h2[?25l[?25h^[?25l[?25h2[?25l[?25h3[?25l[?25h-[?25l[?25h1[?25l[?25h,[?25l[?25h so[?25l[?25h max[?25l[?25h positive[?25l[?25h is[?25l[?25h ([?25l[?25h2[?25l[?25h^[?25l[?25h2[?25l[?25h3[?25l[?25h)-[?25l[?25h1[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h,[?25l[?25h and[?25l[?25h min[?25l[?25h is[?25l[?25h -[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h8[?25l[?25h.

[?25l[?25hSo[?25l[?25h the[?25l[?25h formula[?25l[?25h would[?25l[?25h be[?25l[?25h:
[?25l[?25hsample[?25l[?25h =[?25l[?25h sin[?25l[?25h(current[?25l[?25h_[?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h

[?25l[?25hBut[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h cast[?25l[?25h this[?25l[?25h to[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h integer[?25l[?25h.[?25l[?25h In[?25l[?25h C[?25l[?25h/C[?25l[?25h++,[?25l[?25h int[?25l[?25h is[?25l[?25h typically[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h or[?25l[?25h [?25l[?25h3[?25l[?25h2[?25l[?25h bits[?25l[?25h,[?25l[?25h but[?25l[?25h we[?25l[?25h can[?25l[?25h use[?25l[?25h long[?25l[?25h ([?25l[?25hoften[?25l[?25h [?25l[?25h3[?25l[?25h2[?25l[?25h bits[?25l[?25h)[?25l[?25h and[?25l[?25h mask[?25l[?25h to[?25l[?25h get[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h.

[?25l[?25hAlternatively[?25l[?25h,[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h sending[?25l[?25h bytes[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h send[?25l[?25h three[?25l[?25h bytes[?25l[?25h for[?25l[?25h each[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h sample[?25l[?25h ([?25l[?25hM[?25l[?25hSB[?25l[?25h first[?25l[?25h).

[?25l[?25hBut[?25l[?25h before[?25l[?25h that[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h ensure[?25l[?25h the[?25l[?25h sine[?25l[?25h value[?25l[?25h is[?25l[?25h properly[?25l[?25h scaled[?25l[?25h.[?25l[?25h The[?25l[?25h sine[?25l[?25h function[?25l[?25h returns[?25l[?25h a[?25l[?25h float[?25l[?25h between[?25l[?25h -[?25l[?25h1[?25l[?25h and[?25l[?25h [?25l[?25h1[?25l[?25h.[?25l[?25h Mult[?25l[?25hip[?25l[?25hlying[?25l[?25h by[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h gives[?25l[?25h us[?25l[?25h the[?25l[?25h full[?25l[?25h range[?25l[?25h of[?25l[?25h positive[?25l[?25h values[?25l[?25h,[?25l[?25h but[?25l[?25h negative[?25l[?25h values[?25l[?25h will[?25l[?25h be[?25l[?25h correct[?25l[?25h since[?25l[?25h -[?25l[?25h1[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h =[?25l[?25h -[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h,[?25l[?25h which[?25l[?25h is[?25l[?25h within[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h range[?25l[?25h.

[?25l[?25hBut[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h convert[?25l[?25h this[?25l[?25h float[?25l[?25h to[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h.[?25l[?25h In[?25l[?25h C[?25l[?25h/C[?25l[?25h++,[?25l[?25h we[?25l[?25h can[?25l[?25h do[?25l[?25h something[?25l[?25h like[?25l[?25h:
[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h_value[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h);

[?25l[?25hBut[?25l[?25h since[?25l[?25h sin[?25l[?25h_value[?25l[?25h is[?25l[?25h between[?25l[?25h -[?25l[?25h1[?25l[?25h and[?25l[?25h [?25l[?25h1[?25l[?25h,[?25l[?25h the[?25l[?25h result[?25l[?25h will[?25l[?25h be[?25l[?25h between[?25l[?25h -[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h and[?25l[?25h +[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h,[?25l[?25h which[?25l[?25h fits[?25l[?25h in[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h.

[?25l[?25hNow[?25l[?25h,[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmission[?25l[?25h on[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h:
[?25l[?25hWe[?25l[?25h can[?25l[?25h use[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h by[?25l[?25h setting[?25l[?25h up[?25l[?25h the[?25l[?25h appropriate[?25l[?25h pins[?25l[?25h and[?25l[?25h sending[?25l[?25h the[?25l[?25h samples[?25l[?25h as[?25l[?25h bytes[?25l[?25h ([?25l[?25hfor[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h send[?25l[?25h [?25l[?25h3[?25l[?25h bytes[?25l[?25h per[?25l[?25h sample[?25l[?25h).

[?25l[?25hBut[?25l[?25h first[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h define[?25l[?25h the[?25l[?25h pins[?25l[?25h.[?25l[?25h Common[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h pin[?25l[?25h assignments[?25l[?25h might[?25l[?25h be[?25l[?25h:
[?25l[?25h-[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h:[?25l[?25h GPIO[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h
[?25l[?25h-[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h:[?25l[?25h GPIO[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h
[?25l[?25h-[?25l[?25h DATA[?25l[?25h:[?25l[?25h GPIO[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h

[?25l[?25hBut[?25l[?25h these[?25l[?25h are[?25l[?25h just[?25l[?25h examples[?25l[?25h;[?25l[?25h the[?25l[?25h actual[?25l[?25h pins[?25l[?25h depend[?25l[?25h on[?25l[?25h the[?25l[?25h hardware[?25l[?25h.[?25l[?25h The[?25l[?25h problem[?25l[?25h states[?25l[?25h that[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h must[?25l[?25h be[?25l[?25h given[?25l[?25h as[?25l[?25h #[?25l[?25hdefine[?25l[?25h statements[?25l[?25h,[?25l[?25h so[?25l[?25h we[?25l[?25h'll[?25l[?25h define[?25l[?25h them[?25l[?25h at[?25l[?25h the[?25l[?25h top[?25l[?25h.

[?25l[?25h###[?25l[?25h Example[?25l[?25h Code[?25l[?25h Structure[?25l[?25h:
[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h  [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h  [?25l[?25h //[?25l[?25h Data[?25l[?25h Line[?25l[?25h

[?25l[?25h#include[?25l[?25h [?25l[?25h<Ar[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h [?25l[?25h<driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>[?25l[?25h [?25l[?25h //[?25l[?25h For[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h //[?25l[?25h Initialize[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h or[?25l[?25h LEFT[?25l[?25h/R[?25l[?25hIGHT[?25l[?25h if[?25l[?25h needed[?25l[?25h
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Install[?25l[?25h and[?25l[?25h start[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {[?25l[?25h [?25l[?25h //[?25l[?25h Continuous[?25l[?25h generation[?25l[?25h
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h W[?25l[?25hrap[?25l[?25h around[?25l[?25h

[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Round[?25l[?25h to[?25l[?25h nearest[?25l[?25h integer[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Send[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h sample[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hint[?25l[?25h_sample[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25hBut[?25l[?25h wait[?25l[?25h,[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h expects[?25l[?25h data[?25l[?25h to[?25l[?25h be[?25l[?25h written[?25l[?25h as[?25l[?25h bytes[?25l[?25h.[?25l[?25h A[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h integer[?25l[?25h is[?25l[?25h [?25l[?25h3[?25l[?25h bytes[?25l[?25h.[?25l[?25h We[?25l[?25h need[?25l[?25h to[?25l[?25h send[?25l[?25h the[?25l[?25h bytes[?25l[?25h in[?25l[?25h the[?25l[?25h correct[?25l[?25h order[?25l[?25h ([?25l[?25hM[?25l[?25hSB[?25l[?25h first[?25l[?25h or[?25l[?25h L[?25l[?25hSB[?25l[?25h first[?25l[?25h depends[?25l[?25h on[?25l[?25h DAC[?25l[?25h).[?25l[?25h For[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h typically[?25l[?25h M[?25l[?25hSB[?25l[?25h is[?25l[?25h transmitted[?25l[?25h first[?25l[?25h.

[?25l[?25hSo[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h break[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h sample[?25l[?25h into[?25l[?25h three[?25l[?25h bytes[?25l[?25h,[?25l[?25h big[?25l[?25h-end[?25l[?25hian[?25l[?25h ([?25l[?25hM[?25l[?25hSB[?25l[?25h first[?25l[?25h):
[?25l[?25hbyte[?25l[?25h0[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25hbyte[?25l[?25h1[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25hbyte[?25l[?25h2[?25l[?25h =[?25l[?25h int[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;

[?25l[?25hBut[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h takes[?25l[?25h a[?25l[?25h buffer[?25l[?25h of[?25l[?25h bytes[?25l[?25h.[?25l[?25h So[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h create[?25l[?25h a[?25l[?25h buffer[?25l[?25h with[?25l[?25h these[?25l[?25h three[?25l[?25h bytes[?25l[?25h and[?25l[?25h write[?25l[?25h them[?25l[?25h.

[?25l[?25hAlternatively[?25l[?25h,[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h writing[?25l[?25h one[?25l[?25h sample[?25l[?25h at[?25l[?25h a[?25l[?25h time[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h create[?25l[?25h an[?25l[?25h array[?25l[?25h with[?25l[?25h the[?25l[?25h three[?25l[?25h bytes[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25hsample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25hsample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25hsample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h int[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;

[?25l[?25hsize[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);
[?25l[?25h```

[?25l[?25hBut[?25l[?25h this[?25l[?25h would[?25l[?25h be[?25l[?25h inefficient[?25l[?25h because[?25l[?25h we[?25l[?25h're[?25l[?25h writing[?25l[?25h one[?25l[?25h sample[?25l[?25h at[?25l[?25h a[?25l[?25h time[?25l[?25h.[?25l[?25h It[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h buffer[?25l[?25h multiple[?25l[?25h samples[?25l[?25h and[?25l[?25h write[?25l[?25h them[?25l[?25h in[?25l[?25h chunks[?25l[?25h.

[?25l[?25hHowever[?25l[?25h,[?25l[?25h for[?25l[?25h simplicity[?25l[?25h in[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h proceed[?25l[?25h with[?25l[?25h writing[?25l[?25h one[?25l[?25h sample[?25l[?25h at[?25l[?25h a[?25l[?25h time[?25l[?25h.

[?25l[?25hAlso[?25l[?25h,[?25l[?25h note[?25l[?25h that[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h is[?25l[?25h blocking[?25l[?25h,[?25l[?25h so[?25l[?25h this[?25l[?25h will[?25l[?25h halt[?25l[?25h execution[?25l[?25h while[?25l[?25h sending[?25l[?25h the[?25l[?25h data[?25l[?25h.[?25l[?25h For[?25l[?25h continuous[?25l[?25h audio[?25l[?25h,[?25l[?25h this[?25l[?25h might[?25l[?25h be[?25l[?25h acceptable[?25l[?25h if[?25l[?25h the[?25l[?25h delays[?25l[?25h are[?25l[?25h small[?25l[?25h,[?25l[?25h but[?25l[?25h better[?25l[?25h would[?25l[?25h be[?25l[?25h to[?25l[?25h use[?25l[?25h DMA[?25l[?25h or[?25l[?25h interrupts[?25l[?25h to[?25l[?25h keep[?25l[?25h the[?25l[?25h stream[?25l[?25h flowing[?25l[?25h without[?25l[?25h blocking[?25l[?25h the[?25l[?25h CPU[?25l[?25h.

[?25l[?25hBut[?25l[?25h for[?25l[?25h simplicity[?25l[?25h in[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h proceed[?25l[?25h with[?25l[?25h this[?25l[?25h approach[?25l[?25h.

[?25l[?25h###[?25l[?25h Pin[?25l[?25h Def[?25l[?25hinitions[?25l[?25h:
[?25l[?25hThe[?25l[?25h problem[?25l[?25h states[?25l[?25h that[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h must[?25l[?25h be[?25l[?25h given[?25l[?25h as[?25l[?25h #[?25l[?25hdefine[?25l[?25h statements[?25l[?25h.[?25l[?25h Let[?25l[?25h's[?25l[?25h define[?25l[?25h them[?25l[?25h at[?25l[?25h the[?25l[?25h top[?25l[?25h of[?25l[?25h the[?25l[?25h sketch[?25l[?25h.[?25l[?25h The[?25l[?25h exact[?25l[?25h pin[?25l[?25h numbers[?25l[?25h will[?25l[?25h depend[?25l[?25h on[?25l[?25h the[?25l[?25h hardware[?25l[?25h,[?25l[?25h but[?25l[?25h common[?25l[?25h choices[?25l[?25h might[?25l[?25h be[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h
[?25l[?25h```

[?25l[?25hBut[?25l[?25h since[?25l[?25h these[?25l[?25h are[?25l[?25h arbitrary[?25l[?25h and[?25l[?25h depend[?25l[?25h on[?25l[?25h the[?25l[?25h specific[?25l[?25h hardware[?25l[?25h setup[?25l[?25h,[?25l[?25h perhaps[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h leave[?25l[?25h them[?25l[?25h as[?25l[?25h variables[?25l[?25h that[?25l[?25h can[?25l[?25h be[?25l[?25h configured[?25l[?25h by[?25l[?25h the[?25l[?25h user[?25l[?25h.

[?25l[?25hHowever[?25l[?25h,[?25l[?25h since[?25l[?25h the[?25l[?25h problem[?25l[?25h says[?25l[?25h "[?25l[?25hthe[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h must[?25l[?25h be[?25l[?25h given[?25l[?25h as[?25l[?25h #[?25l[?25hdefine[?25l[?25h statements[?25l[?25h",[?25l[?25h we[?25l[?25h'll[?25l[?25h define[?25l[?25h them[?25l[?25h at[?25l[?25h the[?25l[?25h top[?25l[?25h of[?25l[?25h the[?25l[?25h code[?25l[?25h with[?25l[?25h placeholder[?25l[?25h values[?25l[?25h that[?25l[?25h can[?25l[?25h be[?25l[?25h adjusted[?25l[?25h based[?25l[?25h on[?25l[?25h the[?25l[?25h actual[?25l[?25h hardware[?25l[?25h.

[?25l[?25h###[?25l[?25h Final[?25l[?25h Code[?25l[?25h Outline[?25l[?25h:
[?25l[?25hHere[?25l[?25h's[?25l[?25h how[?25l[?25h the[?25l[?25h complete[?25l[?25h sketch[?25l[?25h might[?25l[?25h look[?25l[?25h ([?25l[?25hfor[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h):

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h  [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h  [?25l[?25h //[?25l[?25h Data[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h

[?25l[?25h#include[?25l[?25h [?25l[?25h<Ar[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h [?25l[?25h<driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>[?25l[?25h [?25l[?25h //[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h //[?25l[?25h Configure[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h or[?25l[?25h RIGHT[?25l[?25h_LEFT[?25l[?25h if[?25l[?25h stereo[?25l[?25h
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h pins[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Install[?25l[?25h and[?25l[?25h start[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);

[?25l[?25h [?25l[?25h Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h1[?25l[?25h1[?25l[?25h5[?25l[?25h2[?25l[?25h0[?25l[?25h0[?25l[?25h);
[?25l[?25h [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h Generator[?25l[?25h Started[?25l[?25h");
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {[?25l[?25h [?25l[?25h //[?25l[?25h Continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h generation[?25l[?25h
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Keep[?25l[?25h phase[?25l[?25h within[?25l[?25h [[?25l[?25h0[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h)

[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Round[?25l[?25h to[?25l[?25h nearest[?25l[?25h integer[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Split[?25l[?25h into[?25l[?25h bytes[?25l[?25h ([?25l[?25hbig[?25l[?25h-end[?25l[?25hian[?25l[?25h)
[?25l[?25h   [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)([?25l[?25hint[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Send[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Small[?25l[?25h delay[?25l[?25h if[?25l[?25h necessary[?25l[?25h to[?25l[?25h maintain[?25l[?25h sample[?25l[?25h rate[?25l[?25h,
[?25l[?25h   [?25l[?25h //[?25l[?25h but[?25l[?25h relying[?25l[?25h on[?25l[?25h the[?25l[?25h sample[?25l[?25h rate[?25l[?25h setting[?25l[?25h in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h config[?25l[?25h should[?25l[?25h handle[?25l[?25h timing[?25l[?25h.
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25hBut[?25l[?25h wait[?25l[?25h,[?25l[?25h there[?25l[?25h's[?25l[?25h an[?25l[?25h issue[?25l[?25h here[?25l[?25h.[?25l[?25h The[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h is[?25l[?25h blocking[?25l[?25h and[?25l[?25h waits[?25l[?25h until[?25l[?25h all[?25l[?25h data[?25l[?25h is[?25l[?25h sent[?25l[?25h.[?25l[?25h If[?25l[?25h we[?25l[?25h're[?25l[?25h sending[?25l[?25h samples[?25l[?25h continuously[?25l[?25h in[?25l[?25h a[?25l[?25h loop[?25l[?25h with[?25l[?25h no[?25l[?25h delay[?25l[?25h,[?25l[?25h it[?25l[?25h might[?25l[?25h not[?25l[?25h respect[?25l[?25h the[?25l[?25h exact[?25l[?25h sample[?25l[?25h rate[?25l[?25h because[?25l[?25h the[?25l[?25h time[?25l[?25h taken[?25l[?25h to[?25l[?25h compute[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h and[?25l[?25h send[?25l[?25h the[?25l[?25h data[?25l[?25h could[?25l[?25h vary[?25l[?25h.

[?25l[?25hA[?25l[?25h better[?25l[?25h approach[?25l[?25h would[?25l[?25h be[?25l[?25h to[?25l[?25h use[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h's[?25l[?25h DMA[?25l[?25h capabilities[?25l[?25h and[?25l[?25h fill[?25l[?25h buffers[?25l[?25h in[?25l[?25h the[?25l[?25h background[?25l[?25h without[?25l[?25h blocking[?25l[?25h the[?25l[?25h CPU[?25l[?25h.[?25l[?25h However[?25l[?25h,[?25l[?25h for[?25l[?25h simplicity[?25l[?25h in[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h assume[?25l[?25h that[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h configuration[?25l[?25h with[?25l[?25h the[?25l[?25h correct[?25l[?25h sample[?25l[?25h rate[?25l[?25h will[?25l[?25h handle[?25l[?25h the[?25l[?25h timing[?25l[?25h correctly[?25l[?25h when[?25l[?25h we[?25l[?25h continuously[?25l[?25h feed[?25l[?25h it[?25l[?25h samples[?25l[?25h at[?25l[?25h the[?25l[?25h right[?25l[?25h rate[?25l[?25h.

[?25l[?25hAlternatively[?25l[?25h,[?25l[?25h we[?25l[?25h could[?25l[?25h calculate[?25l[?25h the[?25l[?25h time[?25l[?25h between[?25l[?25h samples[?25l[?25h based[?25l[?25h on[?25l[?25h the[?25l[?25h sample[?25l[?25h rate[?25l[?25h to[?25l[?25h add[?25l[?25h a[?25l[?25h delay[?25l[?25h,[?25l[?25h but[?25l[?25h since[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h is[?25l[?25h clock[?25l[?25hed[?25l[?25h by[?25l[?25h the[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h signals[?25l[?25h configured[?25l[?25h in[?25l[?25h the[?25l[?25h setup[?25l[?25h,[?25l[?25h as[?25l[?25h long[?25l[?25h as[?25l[?25h we[?25l[?25h're[?25l[?25h providing[?25l[?25h samples[?25l[?25h faster[?25l[?25h than[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h can[?25l[?25h send[?25l[?25h them[?25l[?25h ([?25l[?25hor[?25l[?25h exactly[?25l[?25h at[?25l[?25h the[?25l[?25h right[?25l[?25h rate[?25l[?25h),[?25l[?25h it[?25l[?25h should[?25l[?25h work[?25l[?25h.[?25l[?25h But[?25l[?25h if[?25l[?25h we[?25l[?25h're[?25l[?25h slower[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h get[?25l[?25h gl[?25l[?25hitch[?25l[?25hes[?25l[?25h.

[?25l[?25hIn[?25l[?25h reality[?25l[?25h,[?25l[?25h with[?25l[?25h DMA[?25l[?25h on[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h,[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h would[?25l[?25h pull[?25l[?25h data[?25l[?25h from[?25l[?25h memory[?25l[?25h without[?25l[?25h CPU[?25l[?25h intervention[?25l[?25h after[?25l[?25h initial[?25l[?25h setup[?25l[?25h,[?25l[?25h but[?25l[?25h that[?25l[?25h's[?25l[?25h more[?25l[?25h advanced[?25l[?25h.

[?25l[?25hFor[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h assume[?25l[?25h that[?25l[?25h sending[?25l[?25h samples[?25l[?25h as[?25l[?25h fast[?25l[?25h as[?25l[?25h possible[?25l[?25h ([?25l[?25hwith[?25l[?25h minimal[?25l[?25h computation[?25l[?25h delay[?25l[?25h)[?25l[?25h will[?25l[?25h approximately[?25l[?25h match[?25l[?25h the[?25l[?25h desired[?25l[?25h sample[?25l[?25h rate[?25l[?25h,[?25l[?25h given[?25l[?25h that[?25l[?25h we[?25l[?25h've[?25l[?25h set[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h configuration[?25l[?25h correctly[?25l[?25h.[?25l[?25h In[?25l[?25h practice[?25l[?25h,[?25l[?25h you[?25l[?25h'd[?25l[?25h want[?25l[?25h to[?25l[?25h buffer[?25l[?25h multiple[?25l[?25h samples[?25l[?25h and[?25l[?25h manage[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DMA[?25l[?25h buffers[?25l[?25h properly[?25l[?25h for[?25l[?25h smooth[?25l[?25h audio[?25l[?25h output[?25l[?25h.

[?25l[?25hBut[?25l[?25h for[?25l[?25h a[?25l[?25h simple[?25l[?25h demonstration[?25l[?25h,[?25l[?25h this[?25l[?25h might[?25l[?25h suffice[?25l[?25h.

[?25l[?25h###[?25l[?25h Alternative[?25l[?25h Approach[?25l[?25h Without[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h-S[?25l[?25hpecific[?25l[?25h Code[?25l[?25h:
[?25l[?25hIf[?25l[?25h we[?25l[?25h're[?25l[?25h not[?25l[?25h using[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h with[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h ([?25l[?25hlike[?25l[?25h AV[?25l[?25hR[?25l[?25h-based[?25l[?25h Ar[?25l[?25hdu[?25l[?25hinos[?25l[?25h),[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h implement[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h manually[?25l[?25h by[?25l[?25h togg[?25l[?25hling[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h at[?25l[?25h the[?25l[?25h correct[?25l[?25h times[?25l[?25h.[?25l[?25h This[?25l[?25h would[?25l[?25h involve[?25l[?25h:

[?25l[?25h1[?25l[?25h.[?25l[?25h Setting[?25l[?25h up[?25l[?25h tim[?25l[?25hers[?25l[?25h to[?25l[?25h generate[?25l[?25h the[?25l[?25h bit[?25l[?25h clock[?25l[?25h and[?25l[?25h word[?25l[?25h select[?25l[?25h signals[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Man[?25l[?25hually[?25l[?25h shifting[?25l[?25h out[?25l[?25h the[?25l[?25h data[?25l[?25h bits[?25l[?25h on[?25l[?25h the[?25l[?25h DATA[?25l[?25h line[?25l[?25h in[?25l[?25h sync[?25l[?25h with[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h.

[?25l[?25hThis[?25l[?25h is[?25l[?25h more[?25l[?25h complex[?25l[?25h and[?25l[?25h platform[?25l[?25h-dependent[?25l[?25h,[?25l[?25h so[?25l[?25h for[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h stick[?25l[?25h with[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h-specific[?25l[?25h code[?25l[?25h since[?25l[?25h it[?25l[?25h's[?25l[?25h more[?25l[?25h straightforward[?25l[?25h to[?25l[?25h implement[?25l[?25h.

[?25l[?25hHowever[?25l[?25h,[?25l[?25h the[?25l[?25h problem[?25l[?25h says[?25l[?25h "[?25l[?25hAr[?25l[?25hduino[?25l[?25h project[?25l[?25h",[?25l[?25h not[?25l[?25h specifying[?25l[?25h the[?25l[?25h board[?25l[?25h,[?25l[?25h but[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h varies[?25l[?25h across[?25l[?25h Arduino[?25l[?25h-com[?25l[?25hpatible[?25l[?25h boards[?25l[?25h.[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h has[?25l[?25h good[?25l[?25h built[?25l[?25h-in[?25l[?25h support[?25l[?25h,[?25l[?25h so[?25l[?25h that[?25l[?25h's[?25l[?25h why[?25l[?25h I[?25l[?25h'm[?25l[?25h proceeding[?25l[?25h with[?25l[?25h that[?25l[?25h assumption[?25l[?25h.

[?25l[?25hIf[?25l[?25h we[?25l[?25h were[?25l[?25h targeting[?25l[?25h a[?25l[?25h different[?25l[?25h platform[?25l[?25h without[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h implement[?25l[?25h a[?25l[?25h software[?25l[?25h-based[?25l[?25h approach[?25l[?25h or[?25l[?25h use[?25l[?25h a[?25l[?25h library[?25l[?25h for[?25l[?25h the[?25l[?25h specific[?25l[?25h DAC[?25l[?25h ([?25l[?25hlike[?25l[?25h Ada[?25l[?25hfruit[?25l[?25h's[?25l[?25h library[?25l[?25h for[?25l[?25h certain[?25l[?25h DAC[?25l[?25hs[?25l[?25h).

[?25l[?25hBut[?25l[?25h since[?25l[?25h the[?25l[?25h problem[?25l[?25h specifies[?25l[?25h an[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h and[?25l[?25h doesn[?25l[?25h't[?25l[?25h specify[?25l[?25h the[?25l[?25h Arduino[?25l[?25h model[?25l[?25h,[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h is[?25l[?25h a[?25l[?25h reasonable[?25l[?25h choice[?25l[?25h.

[?25l[?25h###[?25l[?25h Final[?25l[?25hizing[?25l[?25h the[?25l[?25h Code[?25l[?25h:
[?25l[?25hHere[?25l[?25h's[?25l[?25h the[?25l[?25h complete[?25l[?25h sketch[?25l[?25h with[?25l[?25h some[?25l[?25h improvements[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h  [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h  [?25l[?25h //[?25l[?25h Data[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h

[?25l[?25h#include[?25l[?25h [?25l[?25h<Ar[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h [?25l[?25h<driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>[?25l[?25h [?25l[?25h //[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h //[?25l[?25h Configure[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h Mono[?25l[?25h output[?25l[?25h
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h pins[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Install[?25l[?25h and[?25l[?25h start[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h
[?25l[?25h [?25l[?25h esp[?25l[?25h_err[?25l[?25h_t[?25l[?25h err[?25l[?25h =[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h if[?25l[?25h ([?25l[?25herr[?25l[?25h !=[?25l[?25h ESP[?25l[?25h_OK[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h install[?25l[?25h failed[?25l[?25h");
[?25l[?25h   [?25l[?25h return[?25l[?25h;
[?25l[?25h [?25l[?25h }
[?25l[?25h [?25l[?25h err[?25l[?25h =[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);
[?25l[?25h [?25l[?25h if[?25l[?25h ([?25l[?25herr[?25l[?25h !=[?25l[?25h ESP[?25l[?25h_OK[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h set[?25l[?25h pin[?25l[?25h failed[?25l[?25h");
[?25l[?25h   [?25l[?25h return[?25l[?25h;
[?25l[?25h [?25l[?25h }

[?25l[?25h [?25l[?25h Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h1[?25l[?25h1[?25l[?25h5[?25l[?25h2[?25l[?25h0[?25l[?25h0[?25l[?25h);
[?25l[?25h [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hStarting[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h...");
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {[?25l[?25h [?25l[?25h //[?25l[?25h Continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h generation[?25l[?25h
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Keep[?25l[?25h phase[?25l[?25h within[?25l[?25h [[?25l[?25h0[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25hÏ€[?25l[?25h)

[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Round[?25l[?25h to[?25l[?25h nearest[?25l[?25h integer[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Split[?25l[?25h into[?25l[?25h bytes[?25l[?25h ([?25l[?25hbig[?25l[?25h-end[?25l[?25hian[?25l[?25h)
[?25l[?25h   [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h sample[?25l[?25h_bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)([?25l[?25hint[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Send[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h sample[?25l[?25h_bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Small[?25l[?25h delay[?25l[?25h to[?25l[?25h approximate[?25l[?25h sample[?25l[?25h rate[?25l[?25h ([?25l[?25hnot[?25l[?25h strictly[?25l[?25h necessary[?25l[?25h with[?25l[?25h DMA[?25l[?25h)
[?25l[?25h   [?25l[?25h delay[?25l[?25hMicro[?25l[?25hseconds[?25l[?25h([?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25hBut[?25l[?25h even[?25l[?25h better[?25l[?25h would[?25l[?25h be[?25l[?25h to[?25l[?25h pre[?25l[?25h-com[?25l[?25hpute[?25l[?25h a[?25l[?25h buffer[?25l[?25h of[?25l[?25h samples[?25l[?25h and[?25l[?25h send[?25l[?25h them[?25l[?25h in[?25l[?25h chunks[?25l[?25h.[?25l[?25h Here[?25l[?25h's[?25l[?25h an[?25l[?25h improved[?25l[?25h version[?25l[?25h using[?25l[?25h a[?25l[?25h circular[?25l[?25h buffer[?25l[?25h approach[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h  [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hR[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h ([?25l[?25htyp[?25l[?25ho[?25l[?25h,[?25l[?25h should[?25l[?25h be[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h)
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h  [?25l[?25h //[?25l[?25h Data[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h

[?25l[?25h#include[?25l[?25h [?25l[?25h<Ar[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h [?25l[?25h<driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_LENGTH[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h6[?25l[?25h;[?25l[?25h  [?25l[?25h //[?25l[?25h Number[?25l[?25h of[?25l[?25h samples[?25l[?25h to[?25l[?25h buffer[?25l[?25h

[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h sample[?25l[?25h_buffer[?25l[?25h[[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_LENGTH[?25l[?25h];
[?25l[?25hvolatile[?25l[?25h int[?25l[?25h buffer[?25l[?25h_index[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hR[?25l[?25h_PIN[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h Fixed[?25l[?25h typo[?25l[?25h here[?25l[?25h:[?25l[?25h should[?25l[?25h be[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);

[?25l[?25h [?25l[?25h //[?25l[?25h Fill[?25l[?25h the[?25l[?25h buffer[?25l[?25h with[?25l[?25h some[?25l[?25h initial[?25l[?25h samples[?25l[?25h to[?25l[?25h avoid[?25l[?25h silence[?25l[?25h at[?25l[?25h start[?25l[?25h
[?25l[?25h [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< B[?25l[?25hUFFER[?25l[?25h_LENGTH[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h   [?25l[?25h sample[?25l[?25h_buffer[?25l[?25h[i[?25l[?25h][?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Initialize[?25l[?25h with[?25l[?25h zeros[?25l[?25h
[?25l[?25h [?25l[?25h }

[?25l[?25h [?25l[?25h Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h1[?25l[?25h1[?25l[?25h5[?25l[?25h2[?25l[?25h0[?25l[?25h0[?25l[?25h);
[?25l[?25h [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h Generator[?25l[?25h Started[?25l[?25h");
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h generate[?25l[?25h_samples[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h static[?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< B[?25l[?25hUFFER[?25l[?25h_LENGTH[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;

[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;
[?25l[?25h   [?25l[?25h sample[?25l[?25h_buffer[?25l[?25h[i[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h send[?25l[?25h_samples[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< B[?25l[?25hUFFER[?25l[?25h_LENGTH[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h   [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h sample[?25l[?25h =[?25l[?25h sample[?25l[?25h_buffer[?25l[?25h[i[?25l[?25h];
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hsample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hsample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h;

[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h generate[?25l[?25h_samples[?25l[?25h();
[?25l[?25h [?25l[?25h send[?25l[?25h_samples[?25l[?25h();
[?25l[?25h}
[?25l[?25h```

[?25l[?25hBut[?25l[?25h this[?25l[?25h still[?25l[?25h isn[?25l[?25h't[?25l[?25h optimal[?25l[?25h because[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h is[?25l[?25h blocking[?25l[?25h.[?25l[?25h A[?25l[?25h better[?25l[?25h approach[?25l[?25h would[?25l[?25h be[?25l[?25h to[?25l[?25h set[?25l[?25h up[?25l[?25h DMA[?25l[?25h and[?25l[?25h let[?25l[?25h the[?25l[?25h hardware[?25l[?25h handle[?25l[?25h the[?25l[?25h transmission[?25l[?25h while[?25l[?25h we[?25l[?25h ref[?25l[?25hill[?25l[?25h the[?25l[?25h buffer[?25l[?25h in[?25l[?25h the[?25l[?25h background[?25l[?25h.

[?25l[?25hHowever[?25l[?25h,[?25l[?25h for[?25l[?25h simplicity[?25l[?25h,[?25l[?25h and[?25l[?25h since[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h's[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h handles[?25l[?25h the[?25l[?25h timing[?25l[?25h with[?25l[?25h the[?25l[?25h configured[?25l[?25h sample[?25l[?25h rate[?25l[?25h when[?25l[?25h data[?25l[?25h is[?25l[?25h continuously[?25l[?25h fed[?25l[?25h ([?25l[?25has[?25l[?25h long[?25l[?25h as[?25l[?25h we[?25l[?25h don[?25l[?25h't[?25l[?25h fall[?25l[?25h behind[?25l[?25h),[?25l[?25h this[?25l[?25h might[?25l[?25h work[?25l[?25h accept[?25l[?25hably[?25l[?25h for[?25l[?25h a[?25l[?25h demonstration[?25l[?25h.

[?25l[?25hBut[?25l[?25h to[?25l[?25h make[?25l[?25h it[?25l[?25h more[?25l[?25h robust[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h modify[?25l[?25h the[?25l[?25h loop[?25l[?25h to[?25l[?25h generate[?25l[?25h and[?25l[?25h send[?25l[?25h samples[?25l[?25h in[?25l[?25h batches[?25l[?25h with[?25l[?25h a[?25l[?25h small[?25l[?25h delay[?25l[?25h to[?25l[?25h approximate[?25l[?25h the[?25l[?25h correct[?25l[?25h rate[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h const[?25l[?25h int[?25l[?25h batch[?25l[?25h_size[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Number[?25l[?25h of[?25l[?25h samples[?25l[?25h to[?25l[?25h process[?25l[?25h at[?25l[?25h once[?25l[?25h
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< batch[?25l[?25h_size[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h     [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h     [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;

[?25l[?25h     [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;
[?25l[?25h     [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);

[?25l[?25h     [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h     [?25l[?25h bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h     [?25l[?25h bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h     [?25l[?25h bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)([?25l[?25hint[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);

[?25l[?25h     [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h     [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);
[?25l[?25h   [?25l[?25h }
[?25l[?25h   [?25l[?25h delay[?25l[?25hMicro[?25l[?25hseconds[?25l[?25h(([?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h)[?25l[?25h *[?25l[?25h batch[?25l[?25h_size[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25hThis[?25l[?25h sends[?25l[?25h `[?25l[?25hbatch[?25l[?25h_size[?25l[?25h`[?25l[?25h samples[?25l[?25h in[?25l[?25h a[?25l[?25h row[?25l[?25h before[?25l[?25h delaying[?25l[?25h to[?25l[?25h approximate[?25l[?25h the[?25l[?25h correct[?25l[?25h timing[?25l[?25h.[?25l[?25h Adjust[?25l[?25hing[?25l[?25h `[?25l[?25hbatch[?25l[?25h_size[?25l[?25h`[?25l[?25h can[?25l[?25h help[?25l[?25h balance[?25l[?25h between[?25l[?25h CPU[?25l[?25h load[?25l[?25h and[?25l[?25h audio[?25l[?25h smooth[?25l[?25hness[?25l[?25h.

[?25l[?25hBut[?25l[?25h even[?25l[?25h better[?25l[?25h would[?25l[?25h be[?25l[?25h to[?25l[?25h use[?25l[?25h interrupts[?25l[?25h or[?25l[?25h DMA[?25l[?25h to[?25l[?25h handle[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmission[?25l[?25h without[?25l[?25h blocking[?25l[?25h,[?25l[?25h but[?25l[?25h that[?25l[?25h's[?25l[?25h more[?25l[?25h complex[?25l[?25h and[?25l[?25h platform[?25l[?25h-specific[?25l[?25h.

[?25l[?25hFor[?25l[?25h this[?25l[?25h problem[?25l[?25h,[?25l[?25h since[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h general[?25l[?25h Arduino[?25l[?25h project[?25l[?25h with[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h,[?25l[?25h and[?25l[?25h given[?25l[?25h that[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h is[?25l[?25h a[?25l[?25h common[?25l[?25h platform[?25l[?25h for[?25l[?25h such[?25l[?25h tasks[?25l[?25h due[?25l[?25h to[?25l[?25h its[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h,[?25l[?25h here[?25l[?25h's[?25l[?25h a[?25l[?25h cleaner[?25l[?25h version[?25l[?25h focusing[?25l[?25h on[?25l[?25h the[?25l[?25h essential[?25l[?25h parts[?25l[?25h:

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h   [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h  [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h   [?25l[?25h //[?25l[?25h Data[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h

[?25l[?25h#include[?25l[?25h [?25l[?25h<Ar[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h [?25l[?25h<driver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h    [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);

[?25l[?25h [?25l[?25h Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h1[?25l[?25h1[?25l[?25h5[?25l[?25h2[?25l[?25h0[?25l[?25h0[?25l[?25h);
[?25l[?25h [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h S[?25l[?25hine[?25l[?25h Wave[?25l[?25h Generator[?25l[?25h Started[?25l[?25h");
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h W[?25l[?25hrap[?25l[?25h around[?25l[?25h

[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Round[?25l[?25h to[?25l[?25h nearest[?25l[?25h integer[?25l[?25h

[?25l[?25h   [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)([?25l[?25hint[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);

[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Small[?25l[?25h delay[?25l[?25h to[?25l[?25h maintain[?25l[?25h sample[?25l[?25h rate[?25l[?25h
[?25l[?25h   [?25l[?25h delay[?25l[?25hMicro[?25l[?25hseconds[?25l[?25h([?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25h###[?25l[?25h Notes[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h The[?25l[?25h `[?25l[?25hdelay[?25l[?25hMicro[?25l[?25hseconds[?25l[?25h`[?25l[?25h is[?25l[?25h an[?25l[?25h approximation[?25l[?25h;[?25l[?25h in[?25l[?25h practice[?25l[?25h,[?25l[?25h the[?25l[?25h time[?25l[?25h taken[?25l[?25h by[?25l[?25h `[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h`[?25l[?25h and[?25l[?25h computation[?25l[?25h may[?25l[?25h vary[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h For[?25l[?25h better[?25l[?25h performance[?25l[?25h,[?25l[?25h buffer[?25l[?25h multiple[?25l[?25h samples[?25l[?25h and[?25l[?25h send[?25l[?25h them[?25l[?25h in[?25l[?25h batches[?25l[?25h with[?25l[?25h proper[?25l[?25h timing[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h The[?25l[?25h actual[?25l[?25h pin[?25l[?25h definitions[?25l[?25h should[?25l[?25h be[?25l[?25h adjusted[?25l[?25h based[?25l[?25h on[?25l[?25h your[?25l[?25h specific[?25l[?25h hardware[?25l[?25h connections[?25l[?25h.

[?25l[?25h###[?25l[?25h Alternative[?25l[?25h for[?25l[?25h Non[?25l[?25h-[?25l[?25hESP[?25l[?25h3[?25l[?25h2[?25l[?25h Ar[?25l[?25hdu[?25l[?25hinos[?25l[?25h:
[?25l[?25hIf[?25l[?25h not[?25l[?25h using[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h,[?25l[?25h you[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h implement[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h manually[?25l[?25h by[?25l[?25h togg[?25l[?25hling[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h at[?25l[?25h the[?25l[?25h correct[?25l[?25h times[?25l[?25h or[?25l[?25h use[?25l[?25h a[?25l[?25h library[?25l[?25h specific[?25l[?25h to[?25l[?25h your[?25l[?25h DAC[?25l[?25h ([?25l[?25hlike[?25l[?25h Ada[?25l[?25hfruit[?25l[?25h's[?25l[?25h libraries[?25l[?25h for[?25l[?25h certain[?25l[?25h DAC[?25l[?25hs[?25l[?25h).[?25l[?25h The[?25l[?25h basic[?25l[?25h approach[?25l[?25h would[?25l[?25h involve[?25l[?25h:

[?25l[?25h1[?25l[?25h.[?25l[?25h Setting[?25l[?25h up[?25l[?25h tim[?25l[?25hers[?25l[?25h to[?25l[?25h generate[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h signals[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Using[?25l[?25h SPI[?25l[?25h-like[?25l[?25h operations[?25l[?25h to[?25l[?25h send[?25l[?25h data[?25l[?25h on[?25l[?25h the[?25l[?25h DATA[?25l[?25h line[?25l[?25h in[?25l[?25h sync[?25l[?25h with[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h.

[?25l[?25hHowever[?25l[?25h,[?25l[?25h this[?25l[?25h is[?25l[?25h significantly[?25l[?25h more[?25l[?25h complex[?25l[?25h and[?25l[?25h platform[?25l[?25h-dependent[?25l[?25h,[?25l[?25h so[?25l[?25h the[?25l[?25h above[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h-specific[?25l[?25h solution[?25l[?25h is[?25l[?25h provided[?25l[?25h as[?25l[?25h a[?25l[?25h practical[?25l[?25h example[?25l[?25h.

[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h...done thinking.

###[?25l[?25h Final[?25l[?25h Solution[?25l[?25h:

[?25l[?25hHere[?25l[?25h's[?25l[?25h an[?25l[?25h Arduino[?25l[?25h project[?25l[?25h that[?25l[?25h generates[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h)[?25l[?25h and[?25l[?25h sends[?25l[?25h it[?25l[?25h to[?25l[?25h an[?25l[?25h attached[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h using[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h.[?25l[?25h The[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h are[?25l[?25h defined[?25l[?25h as[?25l[?25h constants[?25l[?25h at[?25l[?25h the[?25l[?25h top[?25l[?25h of[?25l[?25h the[?25l[?25h sketch[?25l[?25h.

[?25l[?25h```[?25l[?25hcpp[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h   [?25l[?25h //[?25l[?25h Bit[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h ([?25l[?25had[?25l[?25hjust[?25l[?25h based[?25l[?25h on[?25l[?25h your[?25l[?25h hardware[?25l[?25h)
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h  [?25l[?25h //[?25l[?25h Left[?25l[?25h/[?25l[?25hRight[?25l[?25h Clock[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h ([?25l[?25had[?25l[?25hjust[?25l[?25h based[?25l[?25h on[?25l[?25h your[?25l[?25h hardware[?25l[?25h)
[?25l[?25h#define[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h2[?25l[?25h   [?25l[?25h //[?25l[?25h Data[?25l[?25h GPIO[?25l[?25h pin[?25l[?25h ([?25l[?25had[?25l[?25hjust[?25l[?25h based[?25l[?25h on[?25l[?25h your[?25l[?25h hardware[?25l[?25h)

[?25l[?25h#include[?25l[?25h <[?25l[?25hAr[?25l[?25hduino[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h <[?25l[?25hdriver[?25l[?25h/i[?25l[?25h2[?25l[?25hs[?25l[?25h.h[?25l[?25h>[?25l[?25h [?25l[?25h //[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h

[?25l[?25hconst[?25l[?25h float[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Middle[?25l[?25h C[?25l[?25h frequency[?25l[?25h in[?25l[?25h Hz[?25l[?25h
[?25l[?25hconst[?25l[?25h int[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h;[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h rate[?25l[?25h in[?25l[?25h Hz[?25l[?25h

[?25l[?25hvoid[?25l[?25h setup[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h //[?25l[?25h Configure[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h with[?25l[?25h the[?25l[?25h specified[?25l[?25h sample[?25l[?25h rate[?25l[?25h and[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h resolution[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hmode[?25l[?25h =[?25l[?25h ([?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_mode[?25l[?25h_t[?25l[?25h)([?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_M[?25l[?25hAST[?25l[?25hER[?25l[?25h |[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_MODE[?25l[?25h_TX[?25l[?25h),
[?25l[?25h   [?25l[?25h .[?25l[?25hsample[?25l[?25h_rate[?25l[?25h =[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hbits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_BIT[?25l[?25hS[?25l[?25h_PER[?25l[?25h_S[?25l[?25hAMPLE[?25l[?25h_[?25l[?25h2[?25l[?25h4[?25l[?25hBIT[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hchannel[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_CHANNEL[?25l[?25h_F[?25l[?25hMT[?25l[?25h_ON[?25l[?25hLY[?25l[?25h_RIGHT[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h Mono[?25l[?25h output[?25l[?25h
[?25l[?25h   [?25l[?25h .[?25l[?25hcommunication[?25l[?25h_format[?25l[?25h =[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h_COMM[?25l[?25h_FORMAT[?25l[?25h_ST[?25l[?25hAND[?25l[?25h_I[?25l[?25h2[?25l[?25hS[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hin[?25l[?25htr[?25l[?25h_alloc[?25l[?25h_flags[?25l[?25h =[?25l[?25h ESP[?25l[?25h_IN[?25l[?25hTR[?25l[?25h_FLAG[?25l[?25h_LEVEL[?25l[?25h1[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_count[?25l[?25h =[?25l[?25h [?25l[?25h8[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hd[?25l[?25hma[?25l[?25h_buf[?25l[?25h_len[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h2[?25l[?25h4[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25huse[?25l[?25h_ap[?25l[?25hll[?25l[?25h =[?25l[?25h false[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Configure[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h signals[?25l[?25h
[?25l[?25h [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_pin[?25l[?25h_config[?25l[?25h_t[?25l[?25h pin[?25l[?25h_config[?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h .[?25l[?25hb[?25l[?25hck[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hws[?25l[?25h_io[?25l[?25h_num[?25l[?25h =[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h   [?25l[?25h .[?25l[?25hdata[?25l[?25h_out[?25l[?25h_num[?25l[?25h =[?25l[?25h DATA[?25l[?25h_PIN[?25l[?25h
[?25l[?25h [?25l[?25h };

[?25l[?25h [?25l[?25h //[?25l[?25h Install[?25l[?25h and[?25l[?25h start[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h
[?25l[?25h [?25l[?25h esp[?25l[?25h_err[?25l[?25h_t[?25l[?25h err[?25l[?25h =[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_driver[?25l[?25h_install[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_config[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h,[?25l[?25h NULL[?25l[?25h);
[?25l[?25h [?25l[?25h if[?25l[?25h ([?25l[?25herr[?25l[?25h !=[?25l[?25h ESP[?25l[?25h_OK[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h driver[?25l[?25h install[?25l[?25h failed[?25l[?25h");
[?25l[?25h   [?25l[?25h return[?25l[?25h;
[?25l[?25h [?25l[?25h }
[?25l[?25h [?25l[?25h err[?25l[?25h =[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_set[?25l[?25h_pin[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h &[?25l[?25hpin[?25l[?25h_config[?25l[?25h);
[?25l[?25h [?25l[?25h if[?25l[?25h ([?25l[?25herr[?25l[?25h !=[?25l[?25h ESP[?25l[?25h_OK[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h set[?25l[?25h pin[?25l[?25h failed[?25l[?25h");
[?25l[?25h   [?25l[?25h return[?25l[?25h;
[?25l[?25h [?25l[?25h }

[?25l[?25h [?25l[?25h //[?25l[?25h Start[?25l[?25h serial[?25l[?25h communication[?25l[?25h for[?25l[?25h debugging[?25l[?25h
[?25l[?25h [?25l[?25h Serial[?25l[?25h.begin[?25l[?25h([?25l[?25h1[?25l[?25h1[?25l[?25h5[?25l[?25h2[?25l[?25h0[?25l[?25h0[?25l[?25h);
[?25l[?25h [?25l[?25h Serial[?25l[?25h.println[?25l[?25h("[?25l[?25hStarting[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h...");
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h loop[?25l[?25h()[?25l[?25h {
[?25l[?25h [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Current[?25l[?25h phase[?25l[?25h of[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h
[?25l[?25h [?25l[?25h const[?25l[?25h float[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h ([?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h *[?25l[?25h F[?25l[?25hRE[?25l[?25hQU[?25l[?25hEN[?25l[?25hCY[?25l[?25h)[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Phase[?25l[?25h increment[?25l[?25h per[?25l[?25h sample[?25l[?25h

[?25l[?25h [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {[?25l[?25h [?25l[?25h //[?25l[?25h Continu[?25l[?25hously[?25l[?25h generate[?25l[?25h and[?25l[?25h send[?25l[?25h samples[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h Calculate[?25l[?25h next[?25l[?25h phase[?25l[?25h and[?25l[?25h wrap[?25l[?25h around[?25l[?25h if[?25l[?25h necessary[?25l[?25h
[?25l[?25h   [?25l[?25h phase[?25l[?25h +=[?25l[?25h delta[?25l[?25h_[?25l[?25hphase[?25l[?25h;
[?25l[?25h   [?25l[?25h if[?25l[?25h ([?25l[?25hphase[?25l[?25h >[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h)[?25l[?25h phase[?25l[?25h -=[?25l[?25h [?25l[?25h2[?25l[?25h *[?25l[?25h PI[?25l[?25h;

[?25l[?25h   [?25l[?25h //[?25l[?25h Generate[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h sample[?25l[?25h for[?25l[?25h this[?25l[?25h phase[?25l[?25h
[?25l[?25h   [?25l[?25h float[?25l[?25h sample[?25l[?25h =[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h range[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h8[?25l[?25h to[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h)
[?25l[?25h   [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h int[?25l[?25h_sample[?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsample[?25l[?25h +[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h5[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Round[?25l[?25h to[?25l[?25h nearest[?25l[?25h integer[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Split[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h sample[?25l[?25h into[?25l[?25h three[?25l[?25h bytes[?25l[?25h ([?25l[?25hbig[?25l[?25h-end[?25l[?25hian[?25l[?25h)
[?25l[?25h   [?25l[?25h uint[?25l[?25h8[?25l[?25h_t[?25l[?25h bytes[?25l[?25h[[?25l[?25h3[?25l[?25h];
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h0[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h M[?25l[?25hSB[?25l[?25h byte[?25l[?25h
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h1[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)(([?25l[?25hint[?25l[?25h_sample[?25l[?25h >>[?25l[?25h [?25l[?25h8[?25l[?25h)[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);[?25l[?25h  [?25l[?25h //[?25l[?25h Middle[?25l[?25h byte[?25l[?25h
[?25l[?25h   [?25l[?25h bytes[?25l[?25h[[?25l[?25h2[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25huint[?25l[?25h8[?25l[?25h_t[?25l[?25h)([?25l[?25hint[?25l[?25h_sample[?25l[?25h &[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25hFF[?25l[?25h);[?25l[?25h         [?25l[?25h //[?25l[?25h L[?25l[?25hSB[?25l[?25h byte[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Send[?25l[?25h the[?25l[?25h sample[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h size[?25l[?25h_t[?25l[?25h bytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h;
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_write[?25l[?25h(I[?25l[?25h2[?25l[?25hS[?25l[?25h_NUM[?25l[?25h_[?25l[?25h0[?25l[?25h,[?25l[?25h bytes[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h,[?25l[?25h &[?25l[?25hbytes[?25l[?25h_w[?25l[?25hritten[?25l[?25h,[?25l[?25h port[?25l[?25hMAX[?25l[?25h_DE[?25l[?25hLAY[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Small[?25l[?25h delay[?25l[?25h to[?25l[?25h maintain[?25l[?25h the[?25l[?25h correct[?25l[?25h sample[?25l[?25h rate[?25l[?25h
[?25l[?25h   [?25l[?25h delay[?25l[?25hMicro[?25l[?25hseconds[?25l[?25h([?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h S[?25l[?25hAMPLE[?25l[?25h_RATE[?25l[?25h);
[?25l[?25h [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25h###[?25l[?25h Key[?25l[?25h Points[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h The[?25l[?25h sine[?25l[?25h wave[?25l[?25h is[?25l[?25h generated[?25l[?25h by[?25l[?25h calculating[?25l[?25h `[?25l[?25hsin[?25l[?25h([?25l[?25hphase[?25l[?25h)`[?25l[?25h where[?25l[?25h `[?25l[?25hphase[?25l[?25h`[?25l[?25h increments[?25l[?25h by[?25l[?25h `([?25l[?25h2[?25l[?25hÏ€[?25l[?25h *[?25l[?25h frequency[?25l[?25h)[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h`[?25l[?25h each[?25l[?25h sample[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Each[?25l[?25h sample[?25l[?25h is[?25l[?25h scaled[?25l[?25h to[?25l[?25h fit[?25l[?25h within[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h range[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h8[?25l[?25h to[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h).
[?25l[?25h3[?25l[?25h.[?25l[?25h The[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h is[?25l[?25h configured[?25l[?25h with[?25l[?25h the[?25l[?25h desired[?25l[?25h sample[?25l[?25h rate[?25l[?25h and[?25l[?25h bit[?25l[?25h depth[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h).
[?25l[?25h4[?25l[?25h.[?25l[?25h Each[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h sample[?25l[?25h is[?25l[?25h split[?25l[?25h into[?25l[?25h three[?25l[?25h bytes[?25l[?25h ([?25l[?25hbig[?25l[?25h-end[?25l[?25hian[?25l[?25h)[?25l[?25h before[?25l[?25h being[?25l[?25h sent[?25l[?25h via[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.
[?25l[?25h5[?25l[?25h.[?25l[?25h A[?25l[?25h small[?25l[?25h delay[?25l[?25h is[?25l[?25h added[?25l[?25h between[?25l[?25h samples[?25l[?25h to[?25l[?25h approximate[?25l[?25h the[?25l[?25h correct[?25l[?25h playback[?25l[?25h rate[?25l[?25h,[?25l[?25h though[?25l[?25h in[?25l[?25h practice[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripheral[?25l[?25h's[?25l[?25h clock[?25l[?25hing[?25l[?25h should[?25l[?25h handle[?25l[?25h timing[?25l[?25h once[?25l[?25h properly[?25l[?25h configured[?25l[?25h.

[?25l[?25h###[?25l[?25h Notes[?25l[?25h:
[?25l[?25h-[?25l[?25h Adjust[?25l[?25h `[?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h`,[?25l[?25h `[?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h`,[?25l[?25h and[?25l[?25h `[?25l[?25hDATA[?25l[?25h_PIN[?25l[?25h`[?25l[?25h to[?25l[?25h match[?25l[?25h your[?25l[?25h hardware[?25l[?25h connections[?25l[?25h.
[?25l[?25h-[?25l[?25h For[?25l[?25h better[?25l[?25h performance[?25l[?25h,[?25l[?25h consider[?25l[?25h buffering[?25l[?25h multiple[?25l[?25h samples[?25l[?25h and[?25l[?25h using[?25l[?25h DMA[?25l[?25h or[?25l[?25h interrupts[?25l[?25h for[?25l[?25h smo[?25l[?25hother[?25l[?25h audio[?25l[?25h output[?25l[?25h.
[?25l[?25h-[?25l[?25h This[?25l[?25h example[?25l[?25h assumes[?25l[?25h an[?25l[?25h ESP[?25l[?25h3[?25l[?25h2[?25l[?25h with[?25l[?25h its[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h.[?25l[?25h For[?25l[?25h other[?25l[?25h Arduino[?25l[?25h-com[?25l[?25hpatible[?25l[?25h boards[?25l[?25h without[?25l[?25h native[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h support[?25l[?25h,[?25l[?25h you[?25l[?25h would[?25l[?25h need[?25l[?25h to[?25l[?25h implement[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h manually[?25l[?25h or[?25l[?25h use[?25l[?25h a[?25l[?25h specific[?25l[?25h library[?25l[?25h for[?25l[?25h your[?25l[?25h DAC[?25l[?25h.

[?25l[?25hThis[?25l[?25h solution[?25l[?25h provides[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h)[?25l[?25h sent[?25l[?25h to[?25l[?25h an[?25l[?25h attached[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h via[?25l[?25h the[?25l[?25h specified[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h.

[?25l[?25h\[?25l[?25hbox[?25l[?25hed[?25l[?25h{[?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h}[?25l[?25h

[?25l[?25h0.26user 0.29system 3:04.57elapsed 0%CPU (0avgtext+0avgdata 36684maxresident)k
0inputs+304outputs (0major+4684minor)pagefaults 0swaps
