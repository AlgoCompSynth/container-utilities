[?2026h[?25l[1G‚†ã [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†π [K[?25h[?2026l[?2026h[?25l[1G‚†∏ [K[?25h[?2026l[?2026h[?25l[1G‚†º [K[?25h[?2026l[?2026h[?25l[1G‚†¥ [K[?25h[?2026l[?2026h[?25l[1G‚†¶ [K[?25h[?2026l[?2026h[?25l[1G‚†ß [K[?25h[?2026l[?2026h[?25l[1G‚†á [K[?25h[?2026l[?2026h[?25l[1G‚†è [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†π [K[?25h[?2026l[?2026h[?25l[1G‚†∏ [K[?25h[?2026l[?2026h[?25l[1G‚†º [K[?25h[?2026l[?2026h[?25l[1G‚†¥ [K[?25h[?2026l[?2026h[?25l[1G‚†¶ [K[?25h[?2026l[?2026h[?25l[1G‚†ß [K[?25h[?2026l[?2026h[?25l[1G‚†á [K[?25h[?2026l[?2026h[?25l[1G‚†è [K[?25h[?2026l[?2026h[?25l[1G‚†ã [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†π [K[?25h[?2026l[?2026h[?25l[1G‚†º [K[?25h[?2026l[?2026h[?25l[1G‚†º [K[?25h[?2026l[?2026h[?25l[1G‚†¥ [K[?25h[?2026l[?2026h[?25l[1G‚†¶ [K[?25h[?2026l[?2026h[?25l[1G‚†ß [K[?25h[?2026l[?2026h[?25l[1G‚†á [K[?25h[?2026l[?2026h[?25l[1G‚†è [K[?25h[?2026l[?2026h[?25l[1G‚†ã [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†π [K[?25h[?2026l[?2026h[?25l[1G‚†∏ [K[?25h[?2026l[?2026h[?25l[1G‚†º [K[?25h[?2026l[?2026h[?25l[1G‚†¥ [K[?25h[?2026l[?2026h[?25l[1G‚†¶ [K[?25h[?2026l[?2026h[?25l[1G‚†ß [K[?25h[?2026l[?2026h[?25l[1G‚†á [K[?25h[?2026l[?2026h[?25l[1G‚†è [K[?25h[?2026l[?2026h[?25l[1G‚†ã [K[?25h[?2026l[?2026h[?25l[1G‚†ô [K[?25h[?2026l[?2026h[?25l[1G‚†π [K[?25h[?2026l[?2026h[?25l[1G‚†∏ [K[?25h[?2026l[?25l[?2026h[?25l[1G[K[?25h[?2026l[2K[1G[?25h[?25l[?25h[?25l[?25h[?25l[?25hThinking...
Okay[?25l[?25h,[?25l[?25h so[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h create[?25l[?25h a[?25l[?25h Raspberry[?25l[?25h Pi[?25l[?25h Pico[?25l[?25h project[?25l[?25h in[?25l[?25h C[?25l[?25h/C[?25l[?25h++[?25l[?25h that[?25l[?25h generates[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25hwhich[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h)[?25l[?25h and[?25l[?25h sends[?25l[?25h it[?25l[?25h continuously[?25l[?25h to[?25l[?25h an[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h.[?25l[?25h The[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h has[?25l[?25h specific[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h data[?25l[?25h,[?25l[?25h clock[?25l[?25h,[?25l[?25h and[?25l[?25h frame[?25l[?25h sync[?25l[?25h,[?25l[?25h which[?25l[?25h should[?25l[?25h be[?25l[?25h defined[?25l[?25h as[?25l[?25h macros[?25l[?25h.[?25l[?25h Also[?25l[?25h,[?25l[?25h the[?25l[?25h data[?25l[?25h should[?25l[?25h be[?25l[?25h sent[?25l[?25h using[?25l[?25h P[?25l[?25hIO[?25l[?25h ([?25l[?25hP[?25l[?25hico[?25l[?25h's[?25l[?25h Programm[?25l[?25hable[?25l[?25h I[?25l[?25h/O[?25l[?25h)[?25l[?25h because[?25l[?25h that[?25l[?25h's[?25l[?25h more[?25l[?25h efficient[?25l[?25h than[?25l[?25h regular[?25l[?25h GPIO[?25l[?25h operations[?25l[?25h.

[?25l[?25hFirst[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h recall[?25l[?25h what[?25l[?25h middle[?25l[?25h C[?25l[?25h is[?25l[?25h in[?25l[?25h terms[?25l[?25h of[?25l[?25h frequency[?25l[?25h.[?25l[?25h Middle[?25l[?25h C[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h.[?25l[?25h That[?25l[?25h's[?25l[?25h the[?25l[?25h target[?25l[?25h frequency[?25l[?25h for[?25l[?25h our[?25l[?25h sine[?25l[?25h wave[?25l[?25h.

[?25l[?25hNext[?25l[?25h,[?25l[?25h I[?25l[?25h need[?25l[?25h to[?25l[?25h understand[?25l[?25h how[?25l[?25h to[?25l[?25h generate[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h digitally[?25l[?25h.[?25l[?25h A[?25l[?25h sine[?25l[?25h wave[?25l[?25h can[?25l[?25h be[?25l[?25h represented[?25l[?25h by[?25l[?25h the[?25l[?25h equation[?25l[?25h y[?25l[?25h(t[?25l[?25h)[?25l[?25h =[?25l[?25h A[?25l[?25h *[?25l[?25h sin[?25l[?25h([?25l[?25h2[?25l[?25hœÄ[?25l[?25hft[?25l[?25h +[?25l[?25h œÜ[?25l[?25h),[?25l[?25h where[?25l[?25h:
[?25l[?25h-[?25l[?25h A[?25l[?25h is[?25l[?25h amplitude[?25l[?25h,
[?25l[?25h-[?25l[?25h f[?25l[?25h is[?25l[?25h frequency[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h in[?25l[?25h this[?25l[?25h case[?25l[?25h),
[?25l[?25h-[?25l[?25h t[?25l[?25h is[?25l[?25h time[?25l[?25h,
[?25l[?25h-[?25l[?25h œÜ[?25l[?25h is[?25l[?25h phase[?25l[?25h shift[?25l[?25h.

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h dealing[?25l[?25h with[?25l[?25h digital[?25l[?25h audio[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h generate[?25l[?25h samples[?25l[?25h of[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h a[?25l[?25h certain[?25l[?25h sample[?25l[?25h rate[?25l[?25h.[?25l[?25h The[?25l[?25h Pico[?25l[?25h's[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h typically[?25l[?25h works[?25l[?25h with[?25l[?25h standard[?25l[?25h sample[?25l[?25h rates[?25l[?25h like[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h or[?25l[?25h [?25l[?25h4[?25l[?25h8[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h.[?25l[?25h Let[?25l[?25h's[?25l[?25h assume[?25l[?25h we[?25l[?25h're[?25l[?25h using[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h ([?25l[?25hCD[?25l[?25h quality[?25l[?25h).

[?25l[?25hThe[?25l[?25h period[?25l[?25h of[?25l[?25h one[?25l[?25h sine[?25l[?25h wave[?25l[?25h cycle[?25l[?25h is[?25l[?25h [?25l[?25h1[?25l[?25h/f[?25l[?25hrequency[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h/[?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h ‚âà[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h0[?25l[?25h3[?25l[?25h8[?25l[?25h2[?25l[?25h seconds[?25l[?25h,[?25l[?25h which[?25l[?25h is[?25l[?25h [?25l[?25h3[?25l[?25h8[?25l[?25h2[?25l[?25h0[?25l[?25h micro[?25l[?25hseconds[?25l[?25h per[?25l[?25h cycle[?25l[?25h.

[?25l[?25hAt[?25l[?25h a[?25l[?25h sample[?25l[?25h rate[?25l[?25h of[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h,[?25l[?25h the[?25l[?25h number[?25l[?25h of[?25l[?25h samples[?25l[?25h per[?25l[?25h cycle[?25l[?25h is[?25l[?25h:
[?25l[?25hs[?25l[?25hamples[?25l[?25h_per[?25l[?25h_c[?25l[?25hycle[?25l[?25h =[?25l[?25h sample[?25l[?25h_rate[?25l[?25h /[?25l[?25h frequency[?25l[?25h =[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h ‚âà[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h8[?25l[?25h.[?25l[?25h5[?25l[?25h7[?25l[?25h

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h can[?25l[?25h't[?25l[?25h have[?25l[?25h a[?25l[?25h fraction[?25l[?25h of[?25l[?25h a[?25l[?25h sample[?25l[?25h,[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h generate[?25l[?25h integer[?25l[?25h samples[?25l[?25h over[?25l[?25h time[?25l[?25h and[?25l[?25h wrap[?25l[?25h around[?25l[?25h.

[?25l[?25hFor[?25l[?25h generating[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h values[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h pre[?25l[?25hcompute[?25l[?25h the[?25l[?25h sine[?25l[?25h values[?25l[?25h for[?25l[?25h all[?25l[?25h possible[?25l[?25h phases[?25l[?25h ([?25l[?25hangles[?25l[?25h)[?25l[?25h and[?25l[?25h then[?25l[?25h use[?25l[?25h these[?25l[?25h values[?25l[?25h in[?25l[?25h sequence[?25l[?25h.[?25l[?25h Since[?25l[?25h floating[?25l[?25h-point[?25l[?25h operations[?25l[?25h are[?25l[?25h expensive[?25l[?25h on[?25l[?25h micro[?25l[?25hcontrollers[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h often[?25l[?25h better[?25l[?25h to[?25l[?25h use[?25l[?25h fixed[?25l[?25h-point[?25l[?25h arithmetic[?25l[?25h or[?25l[?25h look[?25l[?25h-up[?25l[?25h tables[?25l[?25h.

[?25l[?25hBut[?25l[?25h since[?25l[?25h this[?25l[?25h is[?25l[?25h a[?25l[?25h Pico[?25l[?25h with[?25l[?25h a[?25l[?25h decent[?25l[?25h amount[?25l[?25h of[?25l[?25h flash[?25l[?25h memory[?25l[?25h,[?25l[?25h we[?25l[?25h could[?25l[?25h store[?25l[?25h a[?25l[?25h table[?25l[?25h of[?25l[?25h sine[?25l[?25h values[?25l[?25h.[?25l[?25h However[?25l[?25h,[?25l[?25h generating[?25l[?25h them[?25l[?25h on[?25l[?25h the[?25l[?25h fly[?25l[?25h might[?25l[?25h be[?25l[?25h simpler[?25l[?25h for[?25l[?25h a[?25l[?25h single[?25l[?25h frequency[?25l[?25h.[?25l[?25h Alternatively[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h compute[?25l[?25h the[?25l[?25h sine[?25l[?25h value[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h using[?25l[?25h the[?25l[?25h current[?25l[?25h phase[?25l[?25h and[?25l[?25h increment[?25l[?25h the[?25l[?25h phase[?25l[?25h by[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h per[?25l[?25h sample[?25l[?25h.

[?25l[?25hBut[?25l[?25h let[?25l[?25h's[?25l[?25h think[?25l[?25h about[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h first[?25l[?25h.[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h is[?25l[?25h a[?25l[?25h serial[?25l[?25h protocol[?25l[?25h that[?25l[?25h typically[?25l[?25h has[?25l[?25h:
[?25l[?25h-[?25l[?25h A[?25l[?25h bit[?25l[?25h clock[?25l[?25h ([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h)[?25l[?25h which[?25l[?25h determines[?25l[?25h the[?25l[?25h data[?25l[?25h rate[?25l[?25h.
[?25l[?25h-[?25l[?25h A[?25l[?25h word[?25l[?25h select[?25l[?25h or[?25l[?25h frame[?25l[?25h sync[?25l[?25h signal[?25l[?25h ([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h)[?25l[?25h which[?25l[?25h indicates[?25l[?25h whether[?25l[?25h the[?25l[?25h current[?25l[?25h data[?25l[?25h is[?25l[?25h for[?25l[?25h the[?25l[?25h left[?25l[?25h or[?25l[?25h right[?25l[?25h channel[?25l[?25h ([?25l[?25hthough[?25l[?25h we[?25l[?25h're[?25l[?25h only[?25l[?25h doing[?25l[?25h mono[?25l[?25h here[?25l[?25h,[?25l[?25h so[?25l[?25h this[?25l[?25h might[?25l[?25h just[?25l[?25h be[?25l[?25h a[?25l[?25h synchron[?25l[?25hizing[?25l[?25h signal[?25l[?25h).
[?25l[?25h-[?25l[?25h The[?25l[?25h serial[?25l[?25h data[?25l[?25h line[?25l[?25h ([?25l[?25hSD[?25l[?25h)[?25l[?25h which[?25l[?25h carries[?25l[?25h the[?25l[?25h actual[?25l[?25h audio[?25l[?25h data[?25l[?25h.

[?25l[?25hThe[?25l[?25h Pico[?25l[?25h has[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h peripher[?25l[?25hals[?25l[?25h that[?25l[?25h can[?25l[?25h be[?25l[?25h configured[?25l[?25h through[?25l[?25h its[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machines[?25l[?25h.[?25l[?25h We[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h set[?25l[?25h up[?25l[?25h a[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h that[?25l[?25h handles[?25l[?25h the[?25l[?25h protocol[?25l[?25h for[?25l[?25h us[?25l[?25h.

[?25l[?25hNow[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h think[?25l[?25h about[?25l[?25h the[?25l[?25h code[?25l[?25h structure[?25l[?25h:

[?25l[?25h1[?25l[?25h.[?25l[?25h Define[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h using[?25l[?25h #[?25l[?25hdefine[?25l[?25h statements[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Set[?25l[?25h up[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h to[?25l[?25h handle[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h Generate[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h at[?25l[?25h the[?25l[?25h correct[?25l[?25h frequency[?25l[?25h and[?25l[?25h feed[?25l[?25h them[?25l[?25h into[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h.

[?25l[?25hFirst[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h define[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h.[?25l[?25h Common[?25l[?25h choices[?25l[?25h might[?25l[?25h be[?25l[?25h:
[?25l[?25h-[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h:[?25l[?25h GPIO[?25l[?25h [?25l[?25h2[?25l[?25h
[?25l[?25h-[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h ([?25l[?25hframe[?25l[?25h sync[?25l[?25h):[?25l[?25h GPIO[?25l[?25h [?25l[?25h3[?25l[?25h
[?25l[?25h-[?25l[?25h SD[?25l[?25h ([?25l[?25hdata[?25l[?25h):[?25l[?25h GPIO[?25l[?25h [?25l[?25h4[?25l[?25h

[?25l[?25hBut[?25l[?25h these[?25l[?25h are[?25l[?25h just[?25l[?25h examples[?25l[?25h;[?25l[?25h the[?25l[?25h actual[?25l[?25h pins[?25l[?25h would[?25l[?25h depend[?25l[?25h on[?25l[?25h the[?25l[?25h DAC[?25l[?25h being[?25l[?25h used[?25l[?25h and[?25l[?25h its[?25l[?25h datas[?25l[?25hheet[?25l[?25h.

[?25l[?25hNext[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h set[?25l[?25h up[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h to[?25l[?25h handle[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h The[?25l[?25h Pico[?25l[?25h's[?25l[?25h P[?25l[?25hIO[?25l[?25h is[?25l[?25h highly[?25l[?25h configurable[?25l[?25h,[?25l[?25h but[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h typically[?25l[?25h:
[?25l[?25h-[?25l[?25h Configure[?25l[?25h a[?25l[?25h state[?25l[?25h machine[?25l[?25h to[?25l[?25h output[?25l[?25h data[?25l[?25h in[?25l[?25h sync[?25l[?25h with[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h.
[?25l[?25h-[?25l[?25h Toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h at[?25l[?25h the[?25l[?25h start[?25l[?25h of[?25l[?25h each[?25l[?25h sample[?25l[?25h ([?25l[?25hfor[?25l[?25h mono[?25l[?25h,[?25l[?25h this[?25l[?25h could[?25l[?25h just[?25l[?25h be[?25l[?25h togg[?25l[?25hled[?25l[?25h every[?25l[?25h sample[?25l[?25h period[?25l[?25h).
[?25l[?25h-[?25l[?25h Output[?25l[?25h the[?25l[?25h serial[?25l[?25h data[?25l[?25h on[?25l[?25h SD[?25l[?25h.

[?25l[?25hFor[?25l[?25h generating[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h do[?25l[?25h something[?25l[?25h like[?25l[?25h this[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Calculate[?25l[?25h the[?25l[?25h phase[?25l[?25h increment[?25l[?25h:[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h
[?25l[?25h  [?25l[?25h -[?25l[?25h For[?25l[?25h middle[?25l[?25h C[?25l[?25h:[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h /[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h ‚âà[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h3[?25l[?25h6[?25l[?25h8[?25l[?25h radi[?25l[?25hans[?25l[?25h per[?25l[?25h sample[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Initialize[?25l[?25h phase[?25l[?25h to[?25l[?25h [?25l[?25h0[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h For[?25l[?25h each[?25l[?25h sample[?25l[?25h:
[?25l[?25h  [?25l[?25h a[?25l[?25h.[?25l[?25h Compute[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)
[?25l[?25h  [?25l[?25h b[?25l[?25h.[?25l[?25h Mult[?25l[?25hiply[?25l[?25h by[?25l[?25h amplitude[?25l[?25h ([?25l[?25hlet[?25l[?25h's[?25l[?25h say[?25l[?25h we[?25l[?25h're[?25l[?25h using[?25l[?25h the[?25l[?25h full[?25l[?25h range[?25l[?25h,[?25l[?25h so[?25l[?25h amplitude[?25l[?25h is[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25h7[?25l[?25hFFF[?25l[?25h for[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h-bit[?25l[?25h audio[?25l[?25h,[?25l[?25h but[?25l[?25h since[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h DAC[?25l[?25h,[?25l[?25h maybe[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25h7[?25l[?25hFFFF[?25l[?25hF[?25l[?25h?[?25l[?25h Wait[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h would[?25l[?25h be[?25l[?25h [?25l[?25h0[?25l[?25hx[?25l[?25h7[?25l[?25hFFFF[?25l[?25hF[?25l[?25h if[?25l[?25h signed[?25l[?25h,[?25l[?25h but[?25l[?25h typically[?25l[?25h audio[?25l[?25h is[?25l[?25h represented[?25l[?25h as[?25l[?25h two[?25l[?25h's[?25l[?25h complement[?25l[?25h.)
[?25l[?25h  [?25l[?25h c[?25l[?25h.[?25l[?25h Add[?25l[?25h offset[?25l[?25h to[?25l[?25h center[?25l[?25h the[?25l[?25h wave[?25l[?25h ([?25l[?25hfor[?25l[?25h unsigned[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h always[?25l[?25h positive[?25l[?25h;[?25l[?25h for[?25l[?25h signed[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h centered[?25l[?25h around[?25l[?25h zero[?25l[?25h)
[?25l[?25h  [?25l[?25h d[?25l[?25h.[?25l[?25h In[?25l[?25hcrement[?25l[?25h phase[?25l[?25h by[?25l[?25h phase[?25l[?25h_in[?25l[?25hcrement[?25l[?25h
[?25l[?25h  [?25l[?25h e[?25l[?25h.[?25l[?25h Output[?25l[?25h sample[?25l[?25h

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h're[?25l[?25h using[?25l[?25h P[?25l[?25hIO[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h need[?25l[?25h to[?25l[?25h pre[?25l[?25hcompute[?25l[?25h samples[?25l[?25h or[?25l[?25h have[?25l[?25h a[?25l[?25h way[?25l[?25h to[?25l[?25h generate[?25l[?25h them[?25l[?25h on[?25l[?25h the[?25l[?25h fly[?25l[?25h in[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h.[?25l[?25h However[?25l[?25h,[?25l[?25h P[?25l[?25hIO[?25l[?25h programs[?25l[?25h are[?25l[?25h limited[?25l[?25h in[?25l[?25h what[?25l[?25h they[?25l[?25h can[?25l[?25h do[?25l[?25h;[?25l[?25h typically[?25l[?25h,[?25l[?25h you[?25l[?25h'd[?25l[?25h prepare[?25l[?25h data[?25l[?25h in[?25l[?25h memory[?25l[?25h and[?25l[?25h have[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h output[?25l[?25h it[?25l[?25h.

[?25l[?25hSo[?25l[?25h perhaps[?25l[?25h a[?25l[?25h better[?25l[?25h approach[?25l[?25h is[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Pre[?25l[?25hcompute[?25l[?25h one[?25l[?25h cycle[?25l[?25h's[?25l[?25h worth[?25l[?25h of[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h ([?25l[?25hor[?25l[?25h more[?25l[?25h for[?25l[?25h smooth[?25l[?25hness[?25l[?25h)[?25l[?25h at[?25l[?25h the[?25l[?25h desired[?25l[?25h sample[?25l[?25h rate[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Use[?25l[?25h a[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h this[?25l[?25h data[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h handling[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h want[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h and[?25l[?25h the[?25l[?25h period[?25l[?25h isn[?25l[?25h't[?25l[?25h an[?25l[?25h integer[?25l[?25h number[?25l[?25h of[?25l[?25h samples[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h continuously[?25l[?25h generate[?25l[?25h new[?25l[?25h samples[?25l[?25h based[?25l[?25h on[?25l[?25h the[?25l[?25h current[?25l[?25h phase[?25l[?25h.

[?25l[?25hAlternatively[?25l[?25h,[?25l[?25h we[?25l[?25h could[?25l[?25h have[?25l[?25h a[?25l[?25h large[?25l[?25h buffer[?25l[?25h with[?25l[?25h multiple[?25l[?25h cycles[?25l[?25h pre[?25l[?25hcom[?25l[?25hputed[?25l[?25h ([?25l[?25hto[?25l[?25h avoid[?25l[?25h discontinu[?25l[?25hities[?25l[?25h at[?25l[?25h the[?25l[?25h end[?25l[?25h),[?25l[?25h but[?25l[?25h that[?25l[?25h might[?25l[?25h use[?25l[?25h too[?25l[?25h much[?25l[?25h memory[?25l[?25h for[?25l[?25h high[?25l[?25h sample[?25l[?25h rates[?25l[?25h or[?25l[?25h many[?25l[?25h cycles[?25l[?25h.

[?25l[?25hAnother[?25l[?25h approach[?25l[?25h is[?25l[?25h to[?25l[?25h compute[?25l[?25h each[?25l[?25h sample[?25l[?25h in[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h IS[?25l[?25hR[?25l[?25h,[?25l[?25h but[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machines[?25l[?25h themselves[?25l[?25h don[?25l[?25h't[?25l[?25h have[?25l[?25h much[?25l[?25h processing[?25l[?25h power[?25l[?25h;[?25l[?25h they[?25l[?25h're[?25l[?25h more[?25l[?25h for[?25l[?25h moving[?25l[?25h bits[?25l[?25h around[?25l[?25h.[?25l[?25h So[?25l[?25h likely[?25l[?25h we[?25l[?25h'd[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Have[?25l[?25h a[?25l[?25h main[?25l[?25h program[?25l[?25h loop[?25l[?25h that[?25l[?25h computes[?25l[?25h sine[?25l[?25h samples[?25l[?25h and[?25l[?25h puts[?25l[?25h them[?25l[?25h into[?25l[?25h a[?25l[?25h buffer[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h from[?25l[?25h this[?25l[?25h buffer[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h handling[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.

[?25l[?25hBut[?25l[?25h since[?25l[?25h we[?25l[?25h want[?25l[?25h continuous[?25l[?25h output[?25l[?25h,[?25l[?25h we[?25l[?25h'd[?25l[?25h need[?25l[?25h to[?25l[?25h manage[?25l[?25h the[?25l[?25h buffer[?25l[?25h carefully[?25l[?25h so[?25l[?25h that[?25l[?25h the[?25l[?25h DMA[?25l[?25h always[?25l[?25h has[?25l[?25h data[?25l[?25h to[?25l[?25h send[?25l[?25h.

[?25l[?25hLet[?25l[?25h me[?25l[?25h think[?25l[?25h about[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h setup[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h Typically[?25l[?25h,[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h:
[?25l[?25h-[?25l[?25h The[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h generated[?25l[?25h by[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h and[?25l[?25h is[?25l[?25h high[?25l[?25h when[?25l[?25h transmitting[?25l[?25h bits[?25l[?25h.
[?25l[?25h-[?25l[?25h The[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h ([?25l[?25hword[?25l[?25h select[?25l[?25h)[?25l[?25h is[?25l[?25h high[?25l[?25h for[?25l[?25h one[?25l[?25h sample[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h left[?25l[?25h channel[?25l[?25h in[?25l[?25h stereo[?25l[?25h),[?25l[?25h then[?25l[?25h low[?25l[?25h for[?25l[?25h the[?25l[?25h next[?25l[?25h ([?25l[?25hright[?25l[?25h channel[?25l[?25h).[?25l[?25h For[?25l[?25h mono[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h just[?25l[?25h toggle[?25l[?25h it[?25l[?25h every[?25l[?25h sample[?25l[?25h or[?25l[?25h keep[?25l[?25h it[?25l[?25h high[?25l[?25h if[?25l[?25h the[?25l[?25h DAC[?25l[?25h expects[?25l[?25h that[?25l[?25h.
[?25l[?25h-[?25l[?25h Data[?25l[?25h is[?25l[?25h clock[?25l[?25hed[?25l[?25h out[?25l[?25h on[?25l[?25h the[?25l[?25h rising[?25l[?25h edge[?25l[?25h of[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h when[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h high[?25l[?25h/[?25l[?25hlow[?25l[?25h depending[?25l[?25h on[?25l[?25h the[?25l[?25h DAC[?25l[?25h.

[?25l[?25hA[?25l[?25h basic[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h might[?25l[?25h look[?25l[?25h like[?25l[?25h this[?25l[?25h in[?25l[?25h P[?25l[?25hIO[?25l[?25h assembly[?25l[?25h:
[?25l[?25h```
[?25l[?25hinit[?25l[?25h:
[?25l[?25h   [?25l[?25h pull[?25l[?25h black[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h1[?25l[?25h     [?25l[?25h ;[?25l[?25h Wait[?25l[?25h for[?25l[?25h data[?25l[?25h
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h        [?25l[?25h ;[?25l[?25h Copy[?25l[?25h data[?25l[?25h to[?25l[?25h rx[?25l[?25h dat[?25l[?25hab[?25l[?25hits[?25l[?25h
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h3[?25l[?25h2[?25l[?25h         [?25l[?25h ;[?25l[?25h Bit[?25l[?25h counter[?25l[?25h ([?25l[?25hassuming[?25l[?25h [?25l[?25h3[?25l[?25h2[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h)
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h2[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h          [?25l[?25h ;[?25l[?25h Start[?25l[?25h with[?25l[?25h bit[?25l[?25h [?25l[?25h3[?25l[?25h1[?25l[?25h
[?25l[?25hside[?25l[?25h-[?25l[?25h0[?25l[?25h:
[?25l[?25h   [?25l[?25h out[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h        [?25l[?25h ;[?25l[?25h Set[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hassuming[?25l[?25h active[?25l[?25h high[?25l[?25h for[?25l[?25h first[?25l[?25h channel[?25l[?25h)
[?25l[?25h   [?25l[?25h j[?25l[?25hmp[?25l[?25h x[?25l[?25h--[?25l[?25h,[?25l[?25h side[?25l[?25h-[?25l[?25h1[?25l[?25h    [?25l[?25h ;[?25l[?25h Jump[?25l[?25h to[?25l[?25h side[?25l[?25h-[?25l[?25h1[?25l[?25h after[?25l[?25h clock[?25l[?25hing[?25l[?25h out[?25l[?25h a[?25l[?25h bit[?25l[?25h
[?25l[?25hside[?25l[?25h-[?25l[?25h1[?25l[?25h:
[?25l[?25h   [?25l[?25h in[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h         [?25l[?25h ;[?25l[?25h Read[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h ([?25l[?25hbut[?25l[?25h we[?25l[?25h might[?25l[?25h not[?25l[?25h need[?25l[?25h this[?25l[?25h if[?25l[?25h we[?25l[?25h're[?25l[?25h generating[?25l[?25h it[?25l[?25h)
[?25l[?25h   [?25l[?25h j[?25l[?25hmp[?25l[?25h x[?25l[?25h--[?25l[?25h,[?25l[?25h side[?25l[?25h-[?25l[?25h0[?25l[?25h    [?25l[?25h ;[?25l[?25h Toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h back[?25l[?25h to[?25l[?25h low[?25l[?25h
[?25l[?25h```

[?25l[?25hWait[?25l[?25h,[?25l[?25h perhaps[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h look[?25l[?25h at[?25l[?25h the[?25l[?25h Pico[?25l[?25h SDK[?25l[?25h documentation[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.[?25l[?25h Actually[?25l[?25h,[?25l[?25h the[?25l[?25h Pico[?25l[?25h has[?25l[?25h built[?25l[?25h-in[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h hardware[?25l[?25h blocks[?25l[?25h that[?25l[?25h can[?25l[?25h be[?25l[?25h accessed[?25l[?25h via[?25l[?25h the[?25l[?25h hardware[?25l[?25h_i[?25l[?25h2[?25l[?25hs[?25l[?25h module[?25l[?25h in[?25l[?25h the[?25l[?25h SDK[?25l[?25h,[?25l[?25h so[?25l[?25h we[?25l[?25h might[?25l[?25h not[?25l[?25h even[?25l[?25h need[?25l[?25h P[?25l[?25hIO[?25l[?25h unless[?25l[?25h the[?25l[?25h user[?25l[?25h specifically[?25l[?25h wants[?25l[?25h to[?25l[?25h use[?25l[?25h P[?25l[?25hIO[?25l[?25h.

[?25l[?25hBut[?25l[?25h the[?25l[?25h problem[?25l[?25h says[?25l[?25h "[?25l[?25hUse[?25l[?25h a[?25l[?25h P[?25l[?25hIO[?25l[?25h to[?25l[?25h send[?25l[?25h the[?25l[?25h data[?25l[?25h to[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h pins[?25l[?25h."[?25l[?25h So[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h implement[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h using[?25l[?25h P[?25l[?25hIO[?25l[?25h directly[?25l[?25h rather[?25l[?25h than[?25l[?25h the[?25l[?25h built[?25l[?25h-in[?25l[?25h hardware[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h block[?25l[?25h.

[?25l[?25hOkay[?25l[?25h,[?25l[?25h so[?25l[?25h we[?25l[?25h'll[?25l[?25h need[?25l[?25h to[?25l[?25h write[?25l[?25h a[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h that[?25l[?25h implements[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h.[?25l[?25h Let[?25l[?25h's[?25l[?25h outline[?25l[?25h what[?25l[?25h that[?25l[?25h would[?25l[?25h look[?25l[?25h like[?25l[?25h:

[?25l[?25hThe[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h for[?25l[?25h transmit[?25l[?25h ([?25l[?25hfrom[?25l[?25h Pico[?25l[?25h documentation[?25l[?25h or[?25l[?25h general[?25l[?25h knowledge[?25l[?25h):
[?25l[?25h1[?25l[?25h.[?25l[?25h The[?25l[?25h bit[?25l[?25h clock[?25l[?25h ([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h)[?25l[?25h is[?25l[?25h generated[?25l[?25h by[?25l[?25h the[?25l[?25h transmitter[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h The[?25l[?25h word[?25l[?25h select[?25l[?25h ([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h)[?25l[?25h indicates[?25l[?25h whether[?25l[?25h the[?25l[?25h current[?25l[?25h data[?25l[?25h is[?25l[?25h for[?25l[?25h the[?25l[?25h left[?25l[?25h or[?25l[?25h right[?25l[?25h channel[?25l[?25h ([?25l[?25hor[?25l[?25h in[?25l[?25h mono[?25l[?25h,[?25l[?25h could[?25l[?25h be[?25l[?25h used[?25l[?25h as[?25l[?25h a[?25l[?25h sample[?25l[?25h gate[?25l[?25h).
[?25l[?25h3[?25l[?25h.[?25l[?25h Data[?25l[?25h is[?25l[?25h shifted[?25l[?25h out[?25l[?25h on[?25l[?25h the[?25l[?25h serial[?25l[?25h data[?25l[?25h line[?25l[?25h ([?25l[?25hSD[?25l[?25h)[?25l[?25h with[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h.

[?25l[?25hFor[?25l[?25h mono[?25l[?25h output[?25l[?25h:
[?25l[?25h-[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h could[?25l[?25h toggle[?25l[?25h every[?25l[?25h sample[?25l[?25h,[?25l[?25h or[?25l[?25h stay[?25l[?25h high[?25l[?25h if[?25l[?25h the[?25l[?25h DAC[?25l[?25h expects[?25l[?25h that[?25l[?25h.
[?25l[?25h-[?25l[?25h For[?25l[?25h each[?25l[?25h bit[?25l[?25h in[?25l[?25h the[?25l[?25h sample[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h for[?25l[?25h our[?25l[?25h case[?25l[?25h),[?25l[?25h we[?25l[?25h'd[?25l[?25h clock[?25l[?25h it[?25l[?25h out[?25l[?25h on[?25l[?25h SD[?25l[?25h while[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h active[?25l[?25h.

[?25l[?25hA[?25l[?25h basic[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h might[?25l[?25h look[?25l[?25h like[?25l[?25h this[?25l[?25h ([?25l[?25hin[?25l[?25h pseudo[?25l[?25h-[?25l[?25hPIO[?25l[?25h assembly[?25l[?25h):

[?25l[?25h```
[?25l[?25hinit[?25l[?25h:
[?25l[?25h   [?25l[?25h set[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h <[?25l[?25h< B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h  [?25l[?25h ;[?25l[?25h Set[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h initially[?25l[?25h ([?25l[?25hassuming[?25l[?25h idle[?25l[?25h high[?25l[?25h)
[?25l[?25hside[?25l[?25h-[?25l[?25h0[?25l[?25h-set[?25l[?25hup[?25l[?25h:
[?25l[?25h   [?25l[?25h set[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h <[?25l[?25h< LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h ;[?25l[?25h Start[?25l[?25h with[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h             [?25l[?25h ;[?25l[?25h Load[?25l[?25h data[?25l[?25h to[?25l[?25h send[?25l[?25h
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h              [?25l[?25h ;[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h
[?25l[?25hside[?25l[?25h-[?25l[?25h0[?25l[?25h-bit[?25l[?25hloop[?25l[?25h:
[?25l[?25h   [?25l[?25h set[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h <[?25l[?25h< B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h ;[?25l[?25h Clock[?25l[?25h high[?25l[?25h ([?25l[?25hdata[?25l[?25h stabil[?25l[?25hizes[?25l[?25h on[?25l[?25h rising[?25l[?25h edge[?25l[?25h)
[?25l[?25h   [?25l[?25h out[?25l[?25hp[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h            [?25l[?25h ;[?25l[?25h Output[?25l[?25h a[?25l[?25h bit[?25l[?25h from[?25l[?25h os[?25l[?25hr[?25l[?25h
[?25l[?25h   [?25l[?25h j[?25l[?25hmp[?25l[?25h x[?25l[?25h--[?25l[?25h,[?25l[?25h side[?25l[?25h-[?25l[?25h0[?25l[?25h-bit[?25l[?25hloop[?25l[?25h
[?25l[?25hside[?25l[?25h-[?25l[?25h0[?25l[?25h-f[?25l[?25hinish[?25l[?25h:
[?25l[?25h   [?25l[?25h set[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h <[?25l[?25h< B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h  [?25l[?25h ;[?25l[?25h Clock[?25l[?25h low[?25l[?25h
[?25l[?25h   [?25l[?25h mov[?25l[?25h r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h              [?25l[?25h ;[?25l[?25h Reset[?25l[?25h bit[?25l[?25h counter[?25l[?25h ([?25l[?25hnot[?25l[?25h needed[?25l[?25h if[?25l[?25h we[?25l[?25h exit[?25l[?25h loop[?25l[?25h properly[?25l[?25h)
[?25l[?25hside[?25l[?25h-[?25l[?25h1[?25l[?25h-set[?25l[?25hup[?25l[?25h:
[?25l[?25h   [?25l[?25h set[?25l[?25h pins[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h <[?25l[?25h< LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h  [?25l[?25h ;[?25l[?25h Toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h ;[?25l[?25h Repeat[?25l[?25h the[?25l[?25h same[?25l[?25h as[?25l[?25h side[?25l[?25h-[?25l[?25h0[?25l[?25h for[?25l[?25h the[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h```

[?25l[?25hBut[?25l[?25h this[?25l[?25h is[?25l[?25h a[?25l[?25h simplified[?25l[?25h version[?25l[?25h.[?25l[?25h We[?25l[?25h might[?25l[?25h need[?25l[?25h to[?25l[?25h adjust[?25l[?25h based[?25l[?25h on[?25l[?25h the[?25l[?25h exact[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h mode[?25l[?25h expected[?25l[?25h by[?25l[?25h the[?25l[?25h DAC[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h whether[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h active[?25l[?25h high[?25l[?25h or[?25l[?25h low[?25l[?25h,[?25l[?25h which[?25l[?25h clock[?25l[?25h edge[?25l[?25h data[?25l[?25h is[?25l[?25h valid[?25l[?25h on[?25l[?25h,[?25l[?25h etc[?25l[?25h.).

[?25l[?25hFor[?25l[?25h generating[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h compute[?25l[?25h samples[?25l[?25h in[?25l[?25h the[?25l[?25h main[?25l[?25h program[?25l[?25h and[?25l[?25h send[?25l[?25h them[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h via[?25l[?25h a[?25l[?25h F[?25l[?25hIFO[?25l[?25h or[?25l[?25h DMA[?25l[?25h.[?25l[?25h But[?25l[?25h since[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machines[?25l[?25h don[?25l[?25h't[?25l[?25h have[?25l[?25h much[?25l[?25h memory[?25l[?25h,[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h prepare[?25l[?25h the[?25l[?25h samples[?25l[?25h in[?25l[?25h RAM[?25l[?25h and[?25l[?25h have[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h read[?25l[?25h from[?25l[?25h there[?25l[?25h via[?25l[?25h DMA[?25l[?25h.

[?25l[?25hHere[?25l[?25h's[?25l[?25h how[?25l[?25h the[?25l[?25h overall[?25l[?25h program[?25l[?25h might[?25l[?25h work[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Set[?25l[?25h up[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h with[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h program[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h Create[?25l[?25h a[?25l[?25h buffer[?25l[?25h for[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h ([?25l[?25hmaybe[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h samples[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h bytes[?25l[?25h =[?25l[?25h ~[?25l[?25h8[?25l[?25h8[?25l[?25hKB[?25l[?25h for[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h-bit[?25l[?25h,[?25l[?25h but[?25l[?25h we[?25l[?25h're[?25l[?25h doing[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h so[?25l[?25h [?25l[?25h3[?25l[?25h bytes[?25l[?25h per[?25l[?25h sample[?25l[?25h ‚Üí[?25l[?25h ~[?25l[?25h1[?25l[?25h3[?25l[?25h2[?25l[?25hKB[?25l[?25h).
[?25l[?25h  [?25l[?25h -[?25l[?25h But[?25l[?25h that[?25l[?25h's[?25l[?25h too[?25l[?25h big[?25l[?25h;[?25l[?25h maybe[?25l[?25h just[?25l[?25h store[?25l[?25h one[?25l[?25h cycle[?25l[?25h (~[?25l[?25h1[?25l[?25h6[?25l[?25h9[?25l[?25h samples[?25l[?25h at[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h)[?25l[?25h and[?25l[?25h loop[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h Or[?25l[?25h generate[?25l[?25h samples[?25l[?25h on[?25l[?25h the[?25l[?25h fly[?25l[?25h in[?25l[?25h the[?25l[?25h main[?25l[?25h loop[?25l[?25h and[?25l[?25h send[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h via[?25l[?25h F[?25l[?25hIFO[?25l[?25h or[?25l[?25h DMA[?25l[?25h.
[?25l[?25h4[?25l[?25h.[?25l[?25h Main[?25l[?25h loop[?25l[?25h:
[?25l[?25h  [?25l[?25h a[?25l[?25h.[?25l[?25h Keep[?25l[?25h track[?25l[?25h of[?25l[?25h current[?25l[?25h phase[?25l[?25h for[?25l[?25h sine[?25l[?25h wave[?25l[?25h.
[?25l[?25h  [?25l[?25h b[?25l[?25h.[?25l[?25h For[?25l[?25h each[?25l[?25h sample[?25l[?25h:
[?25l[?25h     [?25l[?25h i[?25l[?25h.[?25l[?25h Compute[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h),[?25l[?25h scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h range[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h to[?25l[?25h +[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h).
[?25l[?25h     [?25l[?25h ii[?25l[?25h.[?25l[?25h In[?25l[?25hcrement[?25l[?25h phase[?25l[?25h by[?25l[?25h ([?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h =[?25l[?25h ~[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h3[?25l[?25h6[?25l[?25h8[?25l[?25h per[?25l[?25h sample[?25l[?25h.
[?25l[?25h  [?25l[?25h c[?25l[?25h.[?25l[?25h Send[?25l[?25h this[?25l[?25h sample[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h via[?25l[?25h F[?25l[?25hIFO[?25l[?25h or[?25l[?25h DMA[?25l[?25h.

[?25l[?25hBut[?25l[?25h sending[?25l[?25h samples[?25l[?25h one[?25l[?25h at[?25l[?25h a[?25l[?25h time[?25l[?25h through[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h F[?25l[?25hIFO[?25l[?25h might[?25l[?25h not[?25l[?25h be[?25l[?25h efficient[?25l[?25h enough[?25l[?25h;[?25l[?25h we[?25l[?25h'd[?25l[?25h likely[?25l[?25h want[?25l[?25h to[?25l[?25h fill[?25l[?25h a[?25l[?25h buffer[?25l[?25h with[?25l[?25h multiple[?25l[?25h samples[?25l[?25h and[?25l[?25h use[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h them[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h.

[?25l[?25hGiven[?25l[?25h that[?25l[?25h,[?25l[?25h here[?25l[?25h's[?25l[?25h a[?25l[?25h higher[?25l[?25h-level[?25l[?25h plan[?25l[?25h:

[?25l[?25h1[?25l[?25h.[?25l[?25h Define[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Write[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h with[?25l[?25h this[?25l[?25h program[?25l[?25h.
[?25l[?25h4[?25l[?25h.[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h.
[?25l[?25h5[?25l[?25h.[?25l[?25h In[?25l[?25h main[?25l[?25h loop[?25l[?25h:
[?25l[?25h  [?25l[?25h a[?25l[?25h.[?25l[?25h Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h into[?25l[?25h a[?25l[?25h buffer[?25l[?25h ([?25l[?25hdouble[?25l[?25h-buffered[?25l[?25h for[?25l[?25h continuous[?25l[?25h play[?25l[?25h).
[?25l[?25h  [?25l[?25h b[?25l[?25h.[?25l[?25h Sw[?25l[?25hap[?25l[?25h buffers[?25l[?25h when[?25l[?25h one[?25l[?25h is[?25l[?25h complete[?25l[?25h.

[?25l[?25hNow[?25l[?25h,[?25l[?25h let[?25l[?25h's[?25l[?25h think[?25l[?25h about[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h generation[?25l[?25h more[?25l[?25h carefully[?25l[?25h.[?25l[?25h The[?25l[?25h phase[?25l[?25h increment[?25l[?25h per[?25l[?25h sample[?25l[?25h is[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h /[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h ‚âà[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25h3[?25l[?25h6[?25l[?25h8[?25l[?25h radi[?25l[?25hans[?25l[?25h per[?25l[?25h sample[?25l[?25h.

[?25l[?25hWe[?25l[?25h can[?25l[?25h represent[?25l[?25h the[?25l[?25h phase[?25l[?25h as[?25l[?25h a[?25l[?25h fixed[?25l[?25h-point[?25l[?25h number[?25l[?25h to[?25l[?25h avoid[?25l[?25h floating[?25l[?25h point[?25l[?25h operations[?25l[?25h on[?25l[?25h the[?25l[?25h Pico[?25l[?25h.[?25l[?25h For[?25l[?25h example[?25l[?25h,[?25l[?25h if[?25l[?25h we[?25l[?25h use[?25l[?25h [?25l[?25h3[?25l[?25h2[?25l[?25h bits[?25l[?25h total[?25l[?25h with[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h bits[?25l[?25h for[?25l[?25h the[?25l[?25h fractional[?25l[?25h part[?25l[?25h,[?25l[?25h then[?25l[?25h œÄ[?25l[?25h is[?25l[?25h about[?25l[?25h [?25l[?25h3[?25l[?25h.[?25l[?25h1[?25l[?25h4[?25l[?25h1[?25l[?25h5[?25l[?25h9[?25l[?25h2[?25l[?25h7[?25l[?25h *[?25l[?25h ([?25l[?25h2[?25l[?25h^[?25l[?25h1[?25l[?25h6[?25l[?25h)[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h0[?25l[?25h5[?25l[?25h4[?25l[?25h4[?25l[?25h3[?25l[?25h.[?25l[?25h But[?25l[?25h since[?25l[?25h sine[?25l[?25h is[?25l[?25h periodic[?25l[?25h every[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h,[?25l[?25h we[?25l[?25h can[?25l[?25h represent[?25l[?25h phase[?25l[?25h modulo[?25l[?25h [?25l[?25h2[?25l[?25hœÄ[?25l[?25h.

[?25l[?25hBut[?25l[?25h calculating[?25l[?25h sin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h accurately[?25l[?25h with[?25l[?25h fixed[?25l[?25h-point[?25l[?25h arithmetic[?25l[?25h might[?25l[?25h be[?25l[?25h tricky[?25l[?25h without[?25l[?25h a[?25l[?25h lookup[?25l[?25h table[?25l[?25h.[?25l[?25h Alternatively[?25l[?25h,[?25l[?25h we[?25l[?25h could[?25l[?25h pre[?25l[?25hcompute[?25l[?25h a[?25l[?25h large[?25l[?25h sine[?25l[?25h table[?25l[?25h and[?25l[?25h interpol[?25l[?25hate[?25l[?25h between[?25l[?25h entries[?25l[?25h.

[?25l[?25hGiven[?25l[?25h the[?25l[?25h complexity[?25l[?25h of[?25l[?25h doing[?25l[?25h this[?25l[?25h efficiently[?25l[?25h on[?25l[?25h the[?25l[?25h Pico[?25l[?25h,[?25l[?25h perhaps[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h stick[?25l[?25h with[?25l[?25h floating[?25l[?25h point[?25l[?25h for[?25l[?25h simplicity[?25l[?25h in[?25l[?25h this[?25l[?25h example[?25l[?25h,[?25l[?25h even[?25l[?25h though[?25l[?25h it[?25l[?25h's[?25l[?25h not[?25l[?25h optimal[?25l[?25h for[?25l[?25h performance[?25l[?25h.

[?25l[?25hSo[?25l[?25h here[?25l[?25h's[?25l[?25h how[?25l[?25h we[?25l[?25h can[?25l[?25h structure[?25l[?25h the[?25l[?25h code[?25l[?25h:

[?25l[?25h```[?25l[?25hc[?25l[?25h
[?25l[?25h#include[?25l[?25h [?25l[?25h<stdio[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h "[?25l[?25hp[?25l[?25hico[?25l[?25h/[?25l[?25hstdlib[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/p[?25l[?25hio[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/d[?25l[?25hma[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hmath[?25l[?25h.h[?25l[?25h"

[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h3[?25l[?25h
[?25l[?25h#define[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h  [?25l[?25h [?25l[?25h4[?25l[?25h

[?25l[?25h//[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h
[?25l[?25hconst[?25l[?25h uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h[][?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hassuming[?25l[?25h idle[?25l[?25h state[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h of[?25l[?25h a[?25l[?25h new[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),[?25l[?25h [?25l[?25h //[?25l[?25h Set[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h for[?25l[?25h this[?25l[?25h sample[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Load[?25l[?25h data[?25l[?25h into[?25l[?25h OS[?25l[?25hR[?25l[?25h and[?25l[?25h set[?25l[?25h bit[?25l[?25h counter[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h ([?25l[?25hfor[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h samples[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h),

[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_send[?25l[?25h_bits[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h high[?25l[?25h:[?25l[?25h data[?25l[?25h should[?25l[?25h be[?25l[?25h stable[?25l[?25h on[?25l[?25h rising[?25l[?25h edge[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_out[?25l[?25h(p[?25l[?25hins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h),[?25l[?25h  [?25l[?25h //[?25l[?25h Output[?25l[?25h a[?25l[?25h bit[?25l[?25h ([?25l[?25hfrom[?25l[?25h OS[?25l[?25hR[?25l[?25h)

[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h low[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h De[?25l[?25hcrement[?25l[?25h bit[?25l[?25h counter[?25l[?25h and[?25l[?25h loop[?25l[?25h if[?25l[?25h not[?25l[?25h zero[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_j[?25l[?25hmp[?25l[?25h(x[?25l[?25h--[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_send[?25l[?25h_bits[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Bit[?25l[?25h counter[?25l[?25h is[?25l[?25h zero[?25l[?25h,[?25l[?25h we[?25l[?25h're[?25l[?25h done[?25l[?25h with[?25l[?25h this[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),[?25l[?25h [?25l[?25h //[?25l[?25h Toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Loop[?25l[?25h back[?25l[?25h to[?25l[?25h start[?25l[?25h of[?25l[?25h sample[?25l[?25h processing[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_j[?25l[?25hmp[?25l[?25h(y[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_start[?25l[?25h_sample[?25l[?25h)
[?25l[?25h};

//[?25l[?25h Buffer[?25l[?25h for[?25l[?25h sine[?25l[?25h wave[?25l[?25h samples[?25l[?25h ([?25l[?25hdouble[?25l[?25h-buffered[?25l[?25h)
[?25l[?25h#define[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h [?25l[?25h //[?25l[?25h Rough[?25l[?25hly[?25l[?25h one[?25l[?25h cycle[?25l[?25h at[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h
[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h1[?25l[?25h[[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h];[?25l[?25h [?25l[?25h //[?25l[?25h Extra[?25l[?25h space[?25l[?25h to[?25l[?25h avoid[?25l[?25h wrap[?25l[?25h issues[?25l[?25h
[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h2[?25l[?25h[[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h];
[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hcurrent[?25l[?25h_buffer[?25l[?25h =[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h1[?25l[?25h;
[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hnext[?25l[?25h_buffer[?25l[?25h =[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h2[?25l[?25h;

//[?25l[?25h DMA[?25l[?25h setup[?25l[?25h for[?25l[?25h transferring[?25l[?25h samples[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25hd[?25l[?25hma[?25l[?25h_channel[?25l[?25h_config[?25l[?25h config[?25l[?25h =[?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_default[?25l[?25h_config[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25hconfig[?25l[?25h_set[?25l[?25h_d[?25l[?25hreq[?25l[?25h(config[?25l[?25h,[?25l[?25h D[?25l[?25hRE[?25l[?25hQ[?25l[?25h_[?25l[?25hPIO[?25l[?25h_TX[?25l[?25h0[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25hconfig[?25l[?25h_set[?25l[?25h_trans[?25l[?25hfer[?25l[?25h_data[?25l[?25h(config[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);[?25l[?25h //[?25l[?25h Not[?25l[?25h sure[?25l[?25h about[?25l[?25h this[?25l[?25h part[?25l[?25h

[?25l[?25hint[?25l[?25h main[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h GPIO[?25l[?25h
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25h   [?25l[?25h P[?25l[?25hIO[?25l[?25h p[?25l[?25hio[?25l[?25h =[?25l[?25h pico[?25l[?25h_default[?25l[?25h_p[?25l[?25hio[?25l[?25h0[?25l[?25h_base[?25l[?25h();
[?25l[?25h   [?25l[?25h uint[?25l[?25h offset[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_add[?25l[?25h_program[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h)/[?25l[?25hsizeof[?25l[?25h(uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h));
[?25l[?25h   [?25l[?25h uint[?25l[?25h sm[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_sm[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25h   [?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_state[?25l[?25h_m[?25l[?25hachine[?25l[?25h *[?25l[?25hsm[?25l[?25h_state[?25l[?25h =[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25hsm[?25l[?25h[[?25l[?25hsm[?25l[?25h];
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_init[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h offset[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h)/[?25l[?25hsizeof[?25l[?25h(uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h),
[?25l[?25h               [?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h_in[?25l[?25hstructions[?25l[?25h_start[?25l[?25h,[?25l[?25h [?25l[?25h0[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h DMA[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_config[?25l[?25h config[?25l[?25h =[?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_default[?25l[?25h_config[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_trans[?25l[?25hfer[?25l[?25h_data[?25l[?25h(config[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_d[?25l[?25hreq[?25l[?25h(config[?25l[?25h,[?25l[?25h D[?25l[?25hRE[?25l[?25hQ[?25l[?25h_[?25l[?25hPIO[?25l[?25h_TX[?25l[?25h0[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_[?25l[?25hconfigure[?25l[?25h(d[?25l[?25hma[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_channel[?25l[?25h(true[?25l[?25h),[?25l[?25h config[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h generating[?25l[?25h sine[?25l[?25h wave[?25l[?25h into[?25l[?25h first[?25l[?25h buffer[?25l[?25h
[?25l[?25h   [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h1[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h from[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h1[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h_[?25l[?25h1[?25l[?25h);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_write[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h DMA[?25l[?25h transfer[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_start[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);

[?25l[?25h   [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h       [?25l[?25h //[?25l[?25h Wait[?25l[?25h for[?25l[?25h DMA[?25l[?25h to[?25l[?25h complete[?25l[?25h a[?25l[?25h transfer[?25l[?25h
[?25l[?25h       [?25l[?25h if[?25l[?25h ([?25l[?25hd[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_status[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h)[?25l[?25h &[?25l[?25h D[?25l[?25hMA[?25l[?25h_CHANNEL[?25l[?25h_ST[?25l[?25hALL[?25l[?25hED[?25l[?25h)[?25l[?25h {
[?25l[?25h           [?25l[?25h //[?25l[?25h Sw[?25l[?25hap[?25l[?25h buffers[?25l[?25h and[?25l[?25h generate[?25l[?25h next[?25l[?25h cycle[?25l[?25h into[?25l[?25h the[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25htemp[?25l[?25h =[?25l[?25h current[?25l[?25h_buffer[?25l[?25h;
[?25l[?25h           [?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h next[?25l[?25h_buffer[?25l[?25h;
[?25l[?25h           [?25l[?25h next[?25l[?25h_buffer[?25l[?25h =[?25l[?25h temp[?25l[?25h;

[?25l[?25h           [?25l[?25h //[?25l[?25h Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h into[?25l[?25h the[?25l[?25h new[?25l[?25h '[?25l[?25hnext[?25l[?25h'[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(next[?25l[?25h_buffer[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h);

[?25l[?25h           [?25l[?25h //[?25l[?25h Rest[?25l[?25hart[?25l[?25h DMA[?25l[?25h from[?25l[?25h the[?25l[?25h current[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h current[?25l[?25h_buffer[?25l[?25h);
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);
[?25l[?25h       [?25l[?25h }
[?25l[?25h   [?25l[?25h }
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hbuffer[?25l[?25h,[?25l[?25h int[?25l[?25h length[?25l[?25h,[?25l[?25h float[?25l[?25h frequency[?25l[?25h,[?25l[?25h float[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< length[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h       [?25l[?25h //[?25l[?25h Calculate[?25l[?25h phase[?25l[?25h
[?25l[?25h       [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h *[?25l[?25h i[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h;
[?25l[?25h       [?25l[?25h //[?25l[?25h Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h sample[?25l[?25h
[?25l[?25h       [?25l[?25h buffer[?25l[?25h[i[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h fit[?25l[?25h in[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h to[?25l[?25h +[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h6[?25l[?25h)
[?25l[?25h   [?25l[?25h }
[?25l[?25h}
[?25l[?25h```

[?25l[?25hWait[?25l[?25h,[?25l[?25h this[?25l[?25h seems[?25l[?25h a[?25l[?25h bit[?25l[?25h messy[?25l[?25h.[?25l[?25h Maybe[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h structure[?25l[?25h the[?25l[?25h code[?25l[?25h more[?25l[?25h clearly[?25l[?25h with[?25l[?25h proper[?25l[?25h initialization[?25l[?25h and[?25l[?25h buffer[?25l[?25h management[?25l[?25h.

[?25l[?25hLet[?25l[?25h me[?25l[?25h try[?25l[?25h to[?25l[?25h outline[?25l[?25h a[?25l[?25h cleaner[?25l[?25h version[?25l[?25h:

[?25l[?25h```[?25l[?25hc[?25l[?25h
[?25l[?25h#include[?25l[?25h [?25l[?25h<stdio[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h "[?25l[?25hp[?25l[?25hico[?25l[?25h/[?25l[?25hstdlib[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/p[?25l[?25hio[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/d[?25l[?25hma[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hmath[?25l[?25h.h[?25l[?25h"

[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h3[?25l[?25h
[?25l[?25h#define[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h  [?25l[?25h [?25l[?25h4[?25l[?25h

[?25l[?25h//[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h samples[?25l[?25h)
[?25l[?25hconst[?25l[?25h uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[][?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h pins[?25l[?25h:[?25l[?25h set[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h initially[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h of[?25l[?25h new[?25l[?25h sample[?25l[?25h:[?25l[?25h set[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hfor[?25l[?25h first[?25l[?25h channel[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Load[?25l[?25h data[?25l[?25h into[?25l[?25h OS[?25l[?25hR[?25l[?25h and[?25l[?25h bit[?25l[?25h counter[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h),[?25l[?25h     [?25l[?25h //[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h

[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h high[?25l[?25h:[?25l[?25h set[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hdata[?25l[?25h is[?25l[?25h valid[?25l[?25h on[?25l[?25h rising[?25l[?25h edge[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Output[?25l[?25h a[?25l[?25h bit[?25l[?25h from[?25l[?25h OS[?25l[?25hR[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_out[?25l[?25h(p[?25l[?25hins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h low[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h De[?25l[?25hcrement[?25l[?25h bit[?25l[?25h counter[?25l[?25h and[?25l[?25h loop[?25l[?25h if[?25l[?25h not[?25l[?25h zero[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_j[?25l[?25hmp[?25l[?25h(x[?25l[?25h--[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h complete[?25l[?25h:[?25l[?25h toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Jump[?25l[?25h back[?25l[?25h to[?25l[?25h start[?25l[?25h of[?25l[?25h loop[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h wrap[?25l[?25h_[?25l[?25hos[?25l[?25h()
[?25l[?25h};

//[?25l[?25h Audio[?25l[?25h buffer[?25l[?25h size[?25l[?25h ([?25l[?25hone[?25l[?25h cycle[?25l[?25h at[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h for[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h tone[?25l[?25h)
//[?25l[?25h samples[?25l[?25h_per[?25l[?25h_c[?25l[?25hycle[?25l[?25h =[?25l[?25h sample[?25l[?25h_rate[?25l[?25h /[?25l[?25h frequency[?25l[?25h =[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h ‚âà[?25l[?25h [?25l[?25h1[?25l[?25h6[?25l[?25h8[?25l[?25h.[?25l[?25h5[?25l[?25h7[?25l[?25h
[?25l[?25h//[?25l[?25h So[?25l[?25h we[?25l[?25h'll[?25l[?25h allocate[?25l[?25h a[?25l[?25h bit[?25l[?25h extra[?25l[?25h to[?25l[?25h avoid[?25l[?25h wrapping[?25l[?25h issues[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h [?25l[?25h2[?25l[?25h5[?25l[?25h6[?25l[?25h

[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h[[?25l[?25h2[?25l[?25h][[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h];[?25l[?25h [?25l[?25h //[?25l[?25h Double[?25l[?25h buffered[?25l[?25h
[?25l[?25hvolatile[?25l[?25h int[?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h       [?25l[?25h //[?25l[?25h Index[?25l[?25h of[?25l[?25h currently[?25l[?25h playing[?25l[?25h buffer[?25l[?25h ([?25l[?25h0[?25l[?25h or[?25l[?25h [?25l[?25h1[?25l[?25h)
[?25l[?25hvolatile[?25l[?25h int[?25l[?25h d[?25l[?25hma[?25l[?25h_com[?25l[?25hpleted[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;

[?25l[?25hd[?25l[?25hma[?25l[?25h_channel[?25l[?25h_config[?25l[?25h d[?25l[?25hma[?25l[?25h_config[?25l[?25h;

//[?25l[?25h Function[?25l[?25h to[?25l[?25h generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h into[?25l[?25h a[?25l[?25h buffer[?25l[?25h
[?25l[?25hvoid[?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hbuffer[?25l[?25h,[?25l[?25h int[?25l[?25h length[?25l[?25h,[?25l[?25h float[?25l[?25h frequency[?25l[?25h,[?25l[?25h float[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< length[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h       [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h *[?25l[?25h i[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h;
[?25l[?25h       [?25l[?25h //[?25l[?25h Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h:[?25l[?25h amplitude[?25l[?25h scaled[?25l[?25h to[?25l[?25h fit[?25l[?25h in[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h
[?25l[?25h       [?25l[?25h buffer[?25l[?25h[i[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h -[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h to[?25l[?25h +[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h
[?25l[?25h   [?25l[?25h }
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h d[?25l[?25hma[?25l[?25h_handler[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_com[?25l[?25hpleted[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h;
[?25l[?25h}

[?25l[?25hint[?25l[?25h main[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h std[?25l[?25hio[?25l[?25h_init[?25l[?25h_all[?25l[?25h();
[?25l[?25h   [?25l[?25h printf[?25l[?25h("[?25l[?25hStarting[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h\n[?25l[?25h");

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h P[?25l[?25hIO[?25l[?25h p[?25l[?25hio[?25l[?25h =[?25l[?25h pico[?25l[?25h_default[?25l[?25h_p[?25l[?25hio[?25l[?25h0[?25l[?25h_base[?25l[?25h();
[?25l[?25h   [?25l[?25h uint[?25l[?25h offset[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_add[?25l[?25h_program[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h);
[?25l[?25h   [?25l[?25h uint[?25l[?25h sm[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_sm[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Configure[?25l[?25h DMA[?25l[?25h channel[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_config[?25l[?25h =[?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_default[?25l[?25h_config[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_trans[?25l[?25hfer[?25l[?25h_data[?25l[?25h(d[?25l[?25hma[?25l[?25h_config[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_d[?25l[?25hreq[?25l[?25h(d[?25l[?25hma[?25l[?25h_config[?25l[?25h,[?25l[?25h D[?25l[?25hRE[?25l[?25hQ[?25l[?25h_[?25l[?25hPIO[?25l[?25h_TX[?25l[?25h0[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_ch[?25l[?25hained[?25l[?25h_trans[?25l[?25hfers[?25l[?25h(d[?25l[?25hma[?25l[?25h_config[?25l[?25h,[?25l[?25h false[?25l[?25h);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_[?25l[?25hconfigure[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h d[?25l[?25hma[?25l[?25h_config[?25l[?25h,[?25l[?25h &[?25l[?25hd[?25l[?25hma[?25l[?25h_handler[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_init[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h offset[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[[?25l[?25h0[?25l[?25h],[?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h)/[?25l[?25hsizeof[?25l[?25h(uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h),
[?25l[?25h               [?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25hrx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h],[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h with[?25l[?25h first[?25l[?25h buffer[?25l[?25h filled[?25l[?25h with[?25l[?25h sine[?25l[?25h wave[?25l[?25h
[?25l[?25h   [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h from[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_write[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h DMA[?25l[?25h transfer[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_start[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_start[?25l[?25h(s[?25l[?25hm[?25l[?25h);

[?25l[?25h   [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h       [?25l[?25h if[?25l[?25h ([?25l[?25hd[?25l[?25hma[?25l[?25h_com[?25l[?25hpleted[?25l[?25h)[?25l[?25h {
[?25l[?25h           [?25l[?25h //[?25l[?25h Sw[?25l[?25hap[?25l[?25h buffers[?25l[?25h
[?25l[?25h           [?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h ([?25l[?25hcurrent[?25l[?25h_buffer[?25l[?25h +[?25l[?25h [?25l[?25h1[?25l[?25h)[?25l[?25h %[?25l[?25h [?25l[?25h2[?25l[?25h;
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_com[?25l[?25hpleted[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;

[?25l[?25h           [?25l[?25h //[?25l[?25h Generate[?25l[?25h next[?25l[?25h cycle[?25l[?25h into[?25l[?25h the[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h           [?25l[?25h //[?25l[?25h Rest[?25l[?25hart[?25l[?25h DMA[?25l[?25h from[?25l[?25h the[?25l[?25h new[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);
[?25l[?25h       [?25l[?25h }
[?25l[?25h   [?25l[?25h }

[?25l[?25h   [?25l[?25h return[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h}
[?25l[?25h```

[?25l[?25hBut[?25l[?25h wait[?25l[?25h,[?25l[?25h this[?25l[?25h is[?25l[?25h still[?25l[?25h missing[?25l[?25h some[?25l[?25h details[?25l[?25h.[?25l[?25h For[?25l[?25h example[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h The[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h might[?25l[?25h need[?25l[?25h adjustment[?25l[?25h to[?25l[?25h properly[?25l[?25h implement[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h ([?25l[?25he[?25l[?25h.g[?25l[?25h.,[?25l[?25h correct[?25l[?25h timing[?25l[?25h between[?25l[?25h bits[?25l[?25h and[?25l[?25h words[?25l[?25h).
[?25l[?25h2[?25l[?25h.[?25l[?25h The[?25l[?25h DMA[?25l[?25h setup[?25l[?25h needs[?25l[?25h proper[?25l[?25h handling[?25l[?25h of[?25l[?25h completion[?25l[?25h interrupts[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h We[?25l[?25h should[?25l[?25h ensure[?25l[?25h the[?25l[?25h sample[?25l[?25h rate[?25l[?25h is[?25l[?25h correct[?25l[?25h by[?25l[?25h configuring[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h appropriately[?25l[?25h.

[?25l[?25hAlso[?25l[?25h,[?25l[?25h for[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h ensure[?25l[?25h that[?25l[?25h the[?25l[?25h phase[?25l[?25h doesn[?25l[?25h't[?25l[?25h reset[?25l[?25h when[?25l[?25h wrapping[?25l[?25h around[?25l[?25h the[?25l[?25h buffer[?25l[?25h,[?25l[?25h which[?25l[?25h we[?25l[?25h're[?25l[?25h doing[?25l[?25h by[?25l[?25h calculating[?25l[?25h each[?25l[?25h sample[?25l[?25h based[?25l[?25h on[?25l[?25h its[?25l[?25h index[?25l[?25h rather[?25l[?25h than[?25l[?25h storing[?25l[?25h state[?25l[?25h between[?25l[?25h buffers[?25l[?25h.

[?25l[?25hLet[?25l[?25h me[?25l[?25h think[?25l[?25h about[?25l[?25h the[?25l[?25h timing[?25l[?25h.[?25l[?25h For[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h with[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h samples[?25l[?25h at[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h,[?25l[?25h the[?25l[?25h bit[?25l[?25h clock[?25l[?25h frequency[?25l[?25h should[?25l[?25h be[?25l[?25h:
[?25l[?25hbit[?25l[?25h_clock[?25l[?25h =[?25l[?25h sample[?25l[?25h_rate[?25l[?25h *[?25l[?25h bits[?25l[?25h_per[?25l[?25h_sample[?25l[?25h =[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h0[?25l[?25h0[?25l[?25h Hz[?25l[?25h

[?25l[?25hBut[?25l[?25h our[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h is[?25l[?25h just[?25l[?25h outputting[?25l[?25h bits[?25l[?25h in[?25l[?25h sequence[?25l[?25h;[?25l[?25h the[?25l[?25h timing[?25l[?25h of[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h determined[?25l[?25h by[?25l[?25h how[?25l[?25h quickly[?25l[?25h we[?25l[?25h output[?25l[?25h each[?25l[?25h bit[?25l[?25h.[?25l[?25h To[?25l[?25h get[?25l[?25h the[?25l[?25h correct[?25l[?25h bit[?25l[?25h clock[?25l[?25h frequency[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h ensure[?25l[?25h that[?25l[?25h each[?25l[?25h bit[?25l[?25h is[?25l[?25h output[?25l[?25h with[?25l[?25h the[?25l[?25h correct[?25l[?25h timing[?25l[?25h.

[?25l[?25hThe[?25l[?25h Pico[?25l[?25h's[?25l[?25h P[?25l[?25hIO[?25l[?25h runs[?25l[?25h at[?25l[?25h half[?25l[?25h the[?25l[?25h system[?25l[?25h clock[?25l[?25h speed[?25l[?25h ([?25l[?25hsince[?25l[?25h it[?25l[?25h's[?25l[?25h a[?25l[?25h dual[?25l[?25h-core[?25l[?25h design[?25l[?25h where[?25l[?25h one[?25l[?25h core[?25l[?25h is[?25l[?25h dedicated[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h).[?25l[?25h If[?25l[?25h the[?25l[?25h system[?25l[?25h clock[?25l[?25h is[?25l[?25h [?25l[?25h1[?25l[?25h2[?25l[?25h5[?25l[?25h MHz[?25l[?25h ([?25l[?25hdefault[?25l[?25h for[?25l[?25h many[?25l[?25h Pis[?25l[?25h),[?25l[?25h then[?25l[?25h P[?25l[?25hIO[?25l[?25h runs[?25l[?25h at[?25l[?25h ~[?25l[?25h6[?25l[?25h2[?25l[?25h.[?25l[?25h5[?25l[?25h MHz[?25l[?25h per[?25l[?25h cycle[?25l[?25h ([?25l[?25hthough[?25l[?25h actual[?25l[?25h clock[?25l[?25hing[?25l[?25h is[?25l[?25h more[?25l[?25h nu[?25l[?25hanced[?25l[?25h with[?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_cl[?25l[?25hk[?25l[?25hdiv[?25l[?25h).

[?25l[?25hWe[?25l[?25h can[?25l[?25h calculate[?25l[?25h the[?25l[?25h required[?25l[?25h delay[?25l[?25h between[?25l[?25h bits[?25l[?25h:
[?25l[?25hbit[?25l[?25h_period[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h /[?25l[?25h bit[?25l[?25h_clock[?25l[?25h_f[?25l[?25hrequency[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h /[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h0[?25l[?25h0[?25l[?25h ‚âà[?25l[?25h [?25l[?25h9[?25l[?25h.[?25l[?25h4[?25l[?25h3[?25l[?25he[?25l[?25h-[?25l[?25h7[?25l[?25h seconds[?25l[?25h per[?25l[?25h bit[?25l[?25h
[?25l[?25hIn[?25l[?25h P[?25l[?25hIO[?25l[?25h cycles[?25l[?25h,[?25l[?25h that[?25l[?25h would[?25l[?25h be[?25l[?25h approximately[?25l[?25h [?25l[?25h6[?25l[?25h2[?25l[?25h.[?25l[?25h5[?25l[?25h MHz[?25l[?25h *[?25l[?25h [?25l[?25h9[?25l[?25h.[?25l[?25h4[?25l[?25h3[?25l[?25he[?25l[?25h-[?25l[?25h7[?25l[?25h ‚âà[?25l[?25h [?25l[?25h5[?25l[?25h9[?25l[?25h clocks[?25l[?25h per[?25l[?25h bit[?25l[?25h.

[?25l[?25hBut[?25l[?25h this[?25l[?25h seems[?25l[?25h low[?25l[?25h;[?25l[?25h perhaps[?25l[?25h it[?25l[?25h's[?25l[?25h better[?25l[?25h to[?25l[?25h use[?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_con[?25l[?25hsecut[?25l[?25hive[?25l[?25h_p[?25l[?25hind[?25l[?25hirs[?25l[?25h()[?25l[?25h or[?25l[?25h other[?25l[?25h timing[?25l[?25h controls[?25l[?25h to[?25l[?25h ensure[?25l[?25h accurate[?25l[?25h bit[?25l[?25h spacing[?25l[?25h.

[?25l[?25hAlternatively[?25l[?25h,[?25l[?25h we[?25l[?25h might[?25l[?25h want[?25l[?25h to[?25l[?25h use[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h's[?25l[?25h programmable[?25l[?25h delay[?25l[?25h and[?25l[?25h output[?25l[?25h functionality[?25l[?25h to[?25l[?25h generate[?25l[?25h precise[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h signals[?25l[?25h along[?25l[?25h with[?25l[?25h the[?25l[?25h data[?25l[?25h bits[?25l[?25h.

[?25l[?25hGiven[?25l[?25h the[?25l[?25h complexity[?25l[?25h of[?25l[?25h getting[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h exactly[?25l[?25h right[?25l[?25h in[?25l[?25h P[?25l[?25hIO[?25l[?25h assembly[?25l[?25h ([?25l[?25hwhich[?25l[?25h is[?25l[?25h very[?25l[?25h low[?25l[?25h-level[?25l[?25h),[?25l[?25h and[?25l[?25h since[?25l[?25h this[?25l[?25h is[?25l[?25h just[?25l[?25h an[?25l[?25h example[?25l[?25h,[?25l[?25h perhaps[?25l[?25h it[?25l[?25h's[?25l[?25h acceptable[?25l[?25h to[?25l[?25h outline[?25l[?25h the[?25l[?25h approach[?25l[?25h rather[?25l[?25h than[?25l[?25h providing[?25l[?25h fully[?25l[?25h accurate[?25l[?25h timing[?25l[?25h code[?25l[?25h.

[?25l[?25hFor[?25l[?25h a[?25l[?25h complete[?25l[?25h solution[?25l[?25h,[?25l[?25h one[?25l[?25h would[?25l[?25h typically[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Refer[?25l[?25h to[?25l[?25h the[?25l[?25h specific[?25l[?25h DAC[?25l[?25h's[?25l[?25h datas[?25l[?25hheet[?25l[?25h for[?25l[?25h exact[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h requirements[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Implement[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h with[?25l[?25h proper[?25l[?25h timing[?25l[?25h for[?25l[?25h that[?25l[?25h protocol[?25l[?25h ([?25l[?25hpossibly[?25l[?25h using[?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_con[?25l[?25hsecut[?25l[?25hive[?25l[?25h_p[?25l[?25hind[?25l[?25hirs[?25l[?25h and[?25l[?25h other[?25l[?25h functions[?25l[?25h to[?25l[?25h ensure[?25l[?25h correct[?25l[?25h clock[?25l[?25hing[?25l[?25h).
[?25l[?25h3[?25l[?25h.[?25l[?25h Ensure[?25l[?25h the[?25l[?25h DMA[?25l[?25h is[?25l[?25h properly[?25l[?25h configured[?25l[?25h to[?25l[?25h continuously[?25l[?25h feed[?25l[?25h data[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h.

[?25l[?25hGiven[?25l[?25h that[?25l[?25h,[?25l[?25h here[?25l[?25h's[?25l[?25h a[?25l[?25h more[?25l[?25h complete[?25l[?25h code[?25l[?25h outline[?25l[?25h:

[?25l[?25h```[?25l[?25hc[?25l[?25h
[?25l[?25h#include[?25l[?25h [?25l[?25h<stdio[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h "[?25l[?25hp[?25l[?25hico[?25l[?25h/[?25l[?25hstdlib[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/p[?25l[?25hio[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/d[?25l[?25hma[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hmath[?25l[?25h.h[?25l[?25h"

//[?25l[?25h Define[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h3[?25l[?25h
[?25l[?25h#define[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h  [?25l[?25h [?25l[?25h4[?25l[?25h

[?25l[?25h//[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h ([?25l[?25hsim[?25l[?25hplified[?25l[?25h)
[?25l[?25hconst[?25l[?25h uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[][?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h initial[?25l[?25h state[?25l[?25h:[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h low[?25l[?25h,[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hassuming[?25l[?25h idle[?25l[?25h state[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Load[?25l[?25h data[?25l[?25h and[?25l[?25h bit[?25l[?25h counter[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h),[?25l[?25h     [?25l[?25h //[?25l[?25h Copy[?25l[?25h input[?25l[?25h data[?25l[?25h to[?25l[?25h OS[?25l[?25hR[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h),[?25l[?25h      [?25l[?25h //[?25l[?25h Bit[?25l[?25h counter[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h)

[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h for[?25l[?25h this[?25l[?25h sample[?25l[?25h ([?25l[?25hassuming[?25l[?25h first[?25l[?25h channel[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Output[?25l[?25h each[?25l[?25h bit[?25l[?25h
[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h high[?25l[?25h:[?25l[?25h data[?25l[?25h should[?25l[?25h be[?25l[?25h valid[?25l[?25h on[?25l[?25h rising[?25l[?25h edge[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_out[?25l[?25h(p[?25l[?25hins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h),[?25l[?25h     [?25l[?25h //[?25l[?25h Output[?25l[?25h a[?25l[?25h bit[?25l[?25h from[?25l[?25h OS[?25l[?25hR[?25l[?25h ([?25l[?25hp[?25l[?25hins[?25l[?25h.[?25l[?25h0[?25l[?25h =[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h)
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h low[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h De[?25l[?25hcrement[?25l[?25h and[?25l[?25h loop[?25l[?25h if[?25l[?25h more[?25l[?25h bits[?25l[?25h to[?25l[?25h send[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_j[?25l[?25hmp[?25l[?25h(x[?25l[?25h--[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h complete[?25l[?25h:[?25l[?25h toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Jump[?25l[?25h back[?25l[?25h to[?25l[?25h start[?25l[?25h of[?25l[?25h sample[?25l[?25h processing[?25l[?25h
[?25l[?25h   [?25l[?25h wrap[?25l[?25h_[?25l[?25hos[?25l[?25h()
[?25l[?25h};

//[?25l[?25h Audio[?25l[?25h buffer[?25l[?25h parameters[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h [?25l[?25h5[?25l[?25h1[?25l[?25h2[?25l[?25h [?25l[?25h //[?25l[?25h Should[?25l[?25h be[?25l[?25h a[?25l[?25h multiple[?25l[?25h of[?25l[?25h the[?25l[?25h number[?25l[?25h of[?25l[?25h samples[?25l[?25h per[?25l[?25h cycle[?25l[?25h

[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h[[?25l[?25h2[?25l[?25h][[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h];[?25l[?25h [?25l[?25h //[?25l[?25h Double[?25l[?25h buffered[?25l[?25h audio[?25l[?25h data[?25l[?25h
[?25l[?25hvolatile[?25l[?25h int[?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h      [?25l[?25h //[?25l[?25h Current[?25l[?25h buffer[?25l[?25h being[?25l[?25h played[?25l[?25h
[?25l[?25hvolatile[?25l[?25h bool[?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h false[?25l[?25h;

//[?25l[?25h DMA[?25l[?25h interrupt[?25l[?25h handler[?25l[?25h
[?25l[?25hvoid[?25l[?25h d[?25l[?25hma[?25l[?25h_handler[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h true[?25l[?25h;
[?25l[?25h}

[?25l[?25hvoid[?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hbuffer[?25l[?25h,[?25l[?25h int[?25l[?25h length[?25l[?25h,[?25l[?25h float[?25l[?25h frequency[?25l[?25h,[?25l[?25h float[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h [?25l[?25h< length[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h       [?25l[?25h //[?25l[?25h Calculate[?25l[?25h phase[?25l[?25h for[?25l[?25h this[?25l[?25h sample[?25l[?25h ([?25l[?25hcurrent[?25l[?25h buffer[?25l[?25h index[?25l[?25h +[?25l[?25h position[?25l[?25h in[?25l[?25h buffer[?25l[?25h)
[?25l[?25h       [?25l[?25h //[?25l[?25h This[?25l[?25h ensures[?25l[?25h continuous[?25l[?25h phase[?25l[?25h across[?25l[?25h buffer[?25l[?25h boundaries[?25l[?25h
[?25l[?25h       [?25l[?25h static[?25l[?25h float[?25l[?25h global[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;
[?25l[?25h       [?25l[?25h float[?25l[?25h local[?25l[?25h_[?25l[?25hphase[?25l[?25h_start[?25l[?25h =[?25l[?25h f[?25l[?25hmod[?25l[?25hf[?25l[?25h(global[?25l[?25h_[?25l[?25hphase[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h);
[?25l[?25h       [?25l[?25h float[?25l[?25h local[?25l[?25h_[?25l[?25hphase[?25l[?25h_end[?25l[?25h =[?25l[?25h local[?25l[?25h_[?25l[?25hphase[?25l[?25h_start[?25l[?25h +[?25l[?25h ([?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h *[?25l[?25h length[?25l[?25h;

[?25l[?25h       [?25l[?25h //[?25l[?25h Generate[?25l[?25h samples[?25l[?25h for[?25l[?25h this[?25l[?25h buffer[?25l[?25h
[?25l[?25h       [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h j[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h j[?25l[?25h [?25l[?25h< length[?25l[?25h;[?25l[?25h j[?25l[?25h++)[?25l[?25h {
[?25l[?25h           [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h local[?25l[?25h_[?25l[?25hphase[?25l[?25h_start[?25l[?25h +[?25l[?25h ([?25l[?25hj[?25l[?25h *[?25l[?25h ([?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h));
[?25l[?25h           [?25l[?25h buffer[?25l[?25h[j[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Scale[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h
[?25l[?25h       [?25l[?25h }

[?25l[?25h       [?25l[?25h //[?25l[?25h Update[?25l[?25h global[?25l[?25h phase[?25l[?25h for[?25l[?25h next[?25l[?25h time[?25l[?25h
[?25l[?25h       [?25l[?25h global[?25l[?25h_[?25l[?25hphase[?25l[?25h +=[?25l[?25h ([?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h *[?25l[?25h length[?25l[?25h;
[?25l[?25h   [?25l[?25h }
[?25l[?25h}

[?25l[?25hint[?25l[?25h main[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h std[?25l[?25hio[?25l[?25h_init[?25l[?25h_all[?25l[?25h();
[?25l[?25h   [?25l[?25h printf[?25l[?25h("[?25l[?25hStarting[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h\n[?25l[?25h");

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h P[?25l[?25hIO[?25l[?25h p[?25l[?25hio[?25l[?25h =[?25l[?25h pico[?25l[?25h_default[?25l[?25h_p[?25l[?25hio[?25l[?25h0[?25l[?25h_base[?25l[?25h();
[?25l[?25h   [?25l[?25h uint[?25l[?25h offset[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_add[?25l[?25h_program[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h);
[?25l[?25h   [?25l[?25h uint[?25l[?25h sm[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_sm[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Configure[?25l[?25h DMA[?25l[?25h channel[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_config[?25l[?25h config[?25l[?25h =[?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_default[?25l[?25h_config[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_trans[?25l[?25hfer[?25l[?25h_data[?25l[?25h(config[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_d[?25l[?25hreq[?25l[?25h(config[?25l[?25h,[?25l[?25h D[?25l[?25hRE[?25l[?25hQ[?25l[?25h_[?25l[?25hPIO[?25l[?25h_TX[?25l[?25h0[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_ch[?25l[?25hained[?25l[?25h_trans[?25l[?25hfers[?25l[?25h(config[?25l[?25h,[?25l[?25h false[?25l[?25h);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_[?25l[?25hconfigure[?25l[?25h(d[?25l[?25hma[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_channel[?25l[?25h(true[?25l[?25h),[?25l[?25h &[?25l[?25hconfig[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_init[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h offset[?25l[?25h,
[?25l[?25h               [?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25hrx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h],[?25l[?25h [?25l[?25h //[?25l[?25h Not[?25l[?25h used[?25l[?25h for[?25l[?25h transmit[?25l[?25h
[?25l[?25h               [?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[[?25l[?25h0[?25l[?25h],
[?25l[?25h               [?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h)/[?25l[?25hsizeof[?25l[?25h(uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h),
[?25l[?25h               [?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h base[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h clock[?25l[?25h division[?25l[?25h ([?25l[?25hthis[?25l[?25h needs[?25l[?25h to[?25l[?25h be[?25l[?25h calculated[?25l[?25h based[?25l[?25h on[?25l[?25h system[?25l[?25h clock[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_con[?25l[?25hsecut[?25l[?25hive[?25l[?25h_p[?25l[?25hind[?25l[?25hirs[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h <[?25l[?25h< SD[?25l[?25h_PIN[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_config[?25l[?25h c[?25l[?25h =[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[[?25l[?25h0[?25l[?25h];
[?25l[?25h   [?25l[?25h //[?25l[?25h Configure[?25l[?25h the[?25l[?25h clock[?25l[?25h division[?25l[?25h for[?25l[?25h desired[?25l[?25h bit[?25l[?25h rate[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h For[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h samples[?25l[?25h/sec[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h0[?25l[?25h0[?25l[?25h bits[?25l[?25h/sec[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h If[?25l[?25h system[?25l[?25h clock[?25l[?25h is[?25l[?25h [?25l[?25h1[?25l[?25h2[?25l[?25h5[?25l[?25h MHz[?25l[?25h,[?25l[?25h then[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h clocks[?25l[?25h_per[?25l[?25h_bit[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h2[?25l[?25h5[?25l[?25h,[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h,[?25l[?25h0[?25l[?25h0[?25l[?25h0[?25l[?25h /[?25l[?25h [?25l[?25h1[?25l[?25h0[?25l[?25h5[?25l[?25h8[?25l[?25h4[?25l[?25h0[?25l[?25h0[?25l[?25h ‚âà[?25l[?25h [?25l[?25h1[?25l[?25h1[?25l[?25h8[?25l[?25h.[?25l[?25h3[?25l[?25h6[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h So[?25l[?25h we[?25l[?25h'd[?25l[?25h set[?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_cl[?25l[?25hk[?25l[?25hdiv[?25l[?25h_int[?25l[?25h_str[?25l[?25hide[?25l[?25h(s[?25l[?25hm[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h1[?25l[?25h8[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h1[?25l[?25h9[?25l[?25h)[?25l[?25h to[?25l[?25h average[?25l[?25h out[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h But[?25l[?25h this[?25l[?25h is[?25l[?25h just[?25l[?25h an[?25l[?25h example[?25l[?25h;[?25l[?25h actual[?25l[?25h division[?25l[?25h would[?25l[?25h need[?25l[?25h precise[?25l[?25h calculation[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h with[?25l[?25h first[?25l[?25h buffer[?25l[?25h filled[?25l[?25h with[?25l[?25h sine[?25l[?25h wave[?25l[?25h
[?25l[?25h   [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h from[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_write[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h DMA[?25l[?25h transfer[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_start[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_start[?25l[?25h(s[?25l[?25hm[?25l[?25h);

[?25l[?25h   [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h       [?25l[?25h if[?25l[?25h ([?25l[?25hd[?25l[?25hma[?25l[?25h_done[?25l[?25h)[?25l[?25h {
[?25l[?25h           [?25l[?25h //[?25l[?25h Buffer[?25l[?25h played[?25l[?25h,[?25l[?25h switch[?25l[?25h to[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h ([?25l[?25hcurrent[?25l[?25h_buffer[?25l[?25h +[?25l[?25h [?25l[?25h1[?25l[?25h)[?25l[?25h %[?25l[?25h [?25l[?25h2[?25l[?25h;
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h false[?25l[?25h;

[?25l[?25h           [?25l[?25h //[?25l[?25h Generate[?25l[?25h next[?25l[?25h cycle[?25l[?25h into[?25l[?25h the[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h           [?25l[?25h //[?25l[?25h Rest[?25l[?25hart[?25l[?25h DMA[?25l[?25h from[?25l[?25h the[?25l[?25h new[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);
[?25l[?25h       [?25l[?25h }
[?25l[?25h   [?25l[?25h }

[?25l[?25h   [?25l[?25h return[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h}
[?25l[?25h```

[?25l[?25hNote[?25l[?25h that[?25l[?25h this[?25l[?25h code[?25l[?25h is[?25l[?25h still[?25l[?25h somewhat[?25l[?25h simplified[?25l[?25h and[?25l[?25h may[?25l[?25h need[?25l[?25h adjustments[?25l[?25h for[?25l[?25h:
[?25l[?25h1[?25l[?25h.[?25l[?25h Correct[?25l[?25h timing[?25l[?25h of[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h signals[?25l[?25h based[?25l[?25h on[?25l[?25h the[?25l[?25h DAC[?25l[?25h's[?25l[?25h requirements[?25l[?25h.
[?25l[?25h2[?25l[?25h.[?25l[?25h Proper[?25l[?25h handling[?25l[?25h of[?25l[?25h DMA[?25l[?25h interrupts[?25l[?25h to[?25l[?25h ensure[?25l[?25h smooth[?25l[?25h audio[?25l[?25h playback[?25l[?25h without[?25l[?25h gl[?25l[?25hitch[?25l[?25hes[?25l[?25h.
[?25l[?25h3[?25l[?25h.[?25l[?25h Acc[?25l[?25hurate[?25l[?25h calculation[?25l[?25h of[?25l[?25h P[?25l[?25hIO[?25l[?25h clock[?25l[?25h divisions[?25l[?25h to[?25l[?25h achieve[?25l[?25h exactly[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h samples[?25l[?25h/[?25l[?25hsecond[?25l[?25h with[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h.

[?25l[?25hFor[?25l[?25h a[?25l[?25h production[?25l[?25h application[?25l[?25h,[?25l[?25h you[?25l[?25h'd[?25l[?25h want[?25l[?25h to[?25l[?25h:
[?25l[?25h-[?25l[?25h Care[?25l[?25hfully[?25l[?25h calculate[?25l[?25h and[?25l[?25h test[?25l[?25h the[?25l[?25h timing[?25l[?25h for[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h.
[?25l[?25h-[?25l[?25h Ensure[?25l[?25h that[?25l[?25h buffers[?25l[?25h are[?25l[?25h large[?25l[?25h enough[?25l[?25h to[?25l[?25h prevent[?25l[?25h audio[?25l[?25h drop[?25l[?25houts[?25l[?25h during[?25l[?25h generation[?25l[?25h.
[?25l[?25h-[?25l[?25h Poss[?25l[?25hibly[?25l[?25h implement[?25l[?25h more[?25l[?25h sophisticated[?25l[?25h phase[?25l[?25h management[?25l[?25h across[?25l[?25h buffers[?25l[?25h.
[?25l[?25h-[?25l[?25h Add[?25l[?25h error[?25l[?25h handling[?25l[?25h and[?25l[?25h status[?25l[?25h monitoring[?25l[?25h.

[?25l[?25hBut[?25l[?25h this[?25l[?25h should[?25l[?25h give[?25l[?25h the[?25l[?25h basic[?25l[?25h structure[?25l[?25h of[?25l[?25h how[?25l[?25h to[?25l[?25h implement[?25l[?25h a[?25l[?25h continuous[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h using[?25l[?25h P[?25l[?25hIO[?25l[?25h and[?25l[?25h DMA[?25l[?25h on[?25l[?25h the[?25l[?25h Raspberry[?25l[?25h Pi[?25l[?25h Pico[?25l[?25h with[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h output[?25l[?25h.
[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h...done thinking.

###[?25l[?25h Solution[?25l[?25h

[?25l[?25hHere[?25l[?25h's[?25l[?25h a[?25l[?25h complete[?25l[?25h C[?25l[?25h program[?25l[?25h for[?25l[?25h the[?25l[?25h Raspberry[?25l[?25h Pi[?25l[?25h Pico[?25l[?25h that[?25l[?25h generates[?25l[?25h a[?25l[?25h continuous[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h)[?25l[?25h sine[?25l[?25h wave[?25l[?25h and[?25l[?25h sends[?25l[?25h it[?25l[?25h to[?25l[?25h an[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h DAC[?25l[?25h using[?25l[?25h P[?25l[?25hIO[?25l[?25h and[?25l[?25h DMA[?25l[?25h:

[?25l[?25h```[?25l[?25hc[?25l[?25h
[?25l[?25h#include[?25l[?25h <[?25l[?25hstdio[?25l[?25h.h[?25l[?25h>
[?25l[?25h#include[?25l[?25h "[?25l[?25hp[?25l[?25hico[?25l[?25h/[?25l[?25hstdlib[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/p[?25l[?25hio[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hhard[?25l[?25hware[?25l[?25h/d[?25l[?25hma[?25l[?25h.h[?25l[?25h"
[?25l[?25h#include[?25l[?25h "[?25l[?25hmath[?25l[?25h.h[?25l[?25h"

//[?25l[?25h Define[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h interface[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h2[?25l[?25h
[?25l[?25h#define[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h [?25l[?25h3[?25l[?25h
[?25l[?25h#define[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h  [?25l[?25h [?25l[?25h4[?25l[?25h

[?25l[?25h//[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h transmit[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h samples[?25l[?25h)
[?25l[?25hconst[?25l[?25h uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[][?25l[?25h =[?25l[?25h {
[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h:[?25l[?25h set[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h low[?25l[?25h,[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hid[?25l[?25hle[?25l[?25h state[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Main[?25l[?25h loop[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h
[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_sample[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h for[?25l[?25h this[?25l[?25h sample[?25l[?25h ([?25l[?25hassuming[?25l[?25h first[?25l[?25h channel[?25l[?25h in[?25l[?25h stereo[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Load[?25l[?25h data[?25l[?25h into[?25l[?25h OS[?25l[?25hR[?25l[?25h and[?25l[?25h bit[?25l[?25h counter[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h0[?25l[?25h,[?25l[?25h os[?25l[?25hr[?25l[?25h),[?25l[?25h     [?25l[?25h //[?25l[?25h Copy[?25l[?25h input[?25l[?25h data[?25l[?25h to[?25l[?25h output[?25l[?25h shift[?25l[?25h register[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_m[?25l[?25hov[?25l[?25h(r[?25l[?25h1[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h),[?25l[?25h      [?25l[?25h //[?25l[?25h Bit[?25l[?25h counter[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h per[?25l[?25h sample[?25l[?25h)

[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h:
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h high[?25l[?25h:[?25l[?25h set[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hdata[?25l[?25h is[?25l[?25h valid[?25l[?25h on[?25l[?25h rising[?25l[?25h edge[?25l[?25h)
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_set[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Output[?25l[?25h a[?25l[?25h bit[?25l[?25h from[?25l[?25h OS[?25l[?25hR[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_out[?25l[?25h(p[?25l[?25hins[?25l[?25h,[?25l[?25h [?25l[?25h1[?25l[?25h),
[?25l[?25h   [?25l[?25h //[?25l[?25h Clock[?25l[?25h low[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h De[?25l[?25hcrement[?25l[?25h and[?25l[?25h loop[?25l[?25h if[?25l[?25h more[?25l[?25h bits[?25l[?25h to[?25l[?25h send[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_j[?25l[?25hmp[?25l[?25h(x[?25l[?25h--[?25l[?25h,[?25l[?25h i[?25l[?25h2[?25l[?25hs[?25l[?25h_bit[?25l[?25h_loop[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Sample[?25l[?25h complete[?25l[?25h:[?25l[?25h toggle[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h for[?25l[?25h next[?25l[?25h sample[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_clear[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h),

[?25l[?25h   [?25l[?25h //[?25l[?25h Jump[?25l[?25h back[?25l[?25h to[?25l[?25h start[?25l[?25h of[?25l[?25h sample[?25l[?25h processing[?25l[?25h
[?25l[?25h   [?25l[?25h wrap[?25l[?25h_[?25l[?25hos[?25l[?25h()
[?25l[?25h};

//[?25l[?25h Audio[?25l[?25h buffer[?25l[?25h parameters[?25l[?25h
[?25l[?25h#define[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h [?25l[?25h5[?25l[?25h1[?25l[?25h2[?25l[?25h [?25l[?25h //[?25l[?25h Should[?25l[?25h be[?25l[?25h a[?25l[?25h multiple[?25l[?25h of[?25l[?25h samples[?25l[?25h per[?25l[?25h cycle[?25l[?25h

[?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h[[?25l[?25h2[?25l[?25h][[?25l[?25hB[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h];[?25l[?25h [?25l[?25h //[?25l[?25h Double[?25l[?25h buffered[?25l[?25h audio[?25l[?25h data[?25l[?25h
[?25l[?25hvolatile[?25l[?25h int[?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h      [?25l[?25h //[?25l[?25h Current[?25l[?25h buffer[?25l[?25h being[?25l[?25h played[?25l[?25h
[?25l[?25hvolatile[?25l[?25h bool[?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h false[?25l[?25h;

//[?25l[?25h DMA[?25l[?25h interrupt[?25l[?25h handler[?25l[?25h
[?25l[?25hvoid[?25l[?25h d[?25l[?25hma[?25l[?25h_handler[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h true[?25l[?25h;
[?25l[?25h}

//[?25l[?25h Generate[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h into[?25l[?25h the[?25l[?25h provided[?25l[?25h buffer[?25l[?25h
[?25l[?25hvoid[?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h *[?25l[?25hbuffer[?25l[?25h,[?25l[?25h int[?25l[?25h length[?25l[?25h,[?25l[?25h float[?25l[?25h frequency[?25l[?25h,[?25l[?25h float[?25l[?25h sample[?25l[?25h_rate[?25l[?25h)[?25l[?25h {
[?25l[?25h   [?25l[?25h static[?25l[?25h float[?25l[?25h global[?25l[?25h_[?25l[?25hphase[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h;[?25l[?25h [?25l[?25h //[?25l[?25h Main[?25l[?25htain[?25l[?25h phase[?25l[?25h between[?25l[?25h calls[?25l[?25h

[?25l[?25h   [?25l[?25h for[?25l[?25h ([?25l[?25hint[?25l[?25h i[?25l[?25h =[?25l[?25h [?25l[?25h0[?25l[?25h;[?25l[?25h i[?25l[?25h <[?25l[?25h length[?25l[?25h;[?25l[?25h i[?25l[?25h++)[?25l[?25h {
[?25l[?25h       [?25l[?25h //[?25l[?25h Calculate[?25l[?25h phase[?25l[?25h for[?25l[?25h this[?25l[?25h sample[?25l[?25h
[?25l[?25h       [?25l[?25h float[?25l[?25h phase[?25l[?25h =[?25l[?25h f[?25l[?25hmod[?25l[?25hf[?25l[?25h(global[?25l[?25h_[?25l[?25hphase[?25l[?25h +[?25l[?25h ([?25l[?25hi[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h);
[?25l[?25h       [?25l[?25h //[?25l[?25h Generate[?25l[?25h sine[?25l[?25h wave[?25l[?25h sample[?25l[?25h,[?25l[?25h scaled[?25l[?25h to[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h range[?25l[?25h (-[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h to[?25l[?25h +[?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h)
[?25l[?25h       [?25l[?25h buffer[?25l[?25h[i[?25l[?25h][?25l[?25h =[?25l[?25h ([?25l[?25hint[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h)([?25l[?25hsin[?25l[?25h([?25l[?25hphase[?25l[?25h)[?25l[?25h *[?25l[?25h [?25l[?25h8[?25l[?25h3[?25l[?25h8[?25l[?25h8[?25l[?25h6[?25l[?25h0[?25l[?25h7[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);
[?25l[?25h   [?25l[?25h }
[?25l[?25h   [?25l[?25h //[?25l[?25h Update[?25l[?25h global[?25l[?25h phase[?25l[?25h for[?25l[?25h next[?25l[?25h generation[?25l[?25h
[?25l[?25h   [?25l[?25h global[?25l[?25h_[?25l[?25hphase[?25l[?25h +=[?25l[?25h ([?25l[?25hlength[?25l[?25h *[?25l[?25h [?25l[?25h2[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h *[?25l[?25h M[?25l[?25h_PI[?25l[?25h *[?25l[?25h frequency[?25l[?25h /[?25l[?25h sample[?25l[?25h_rate[?25l[?25h);
[?25l[?25h}

[?25l[?25hint[?25l[?25h main[?25l[?25h()[?25l[?25h {
[?25l[?25h   [?25l[?25h std[?25l[?25hio[?25l[?25h_init[?25l[?25h_all[?25l[?25h();
[?25l[?25h   [?25l[?25h printf[?25l[?25h("[?25l[?25hStarting[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h sine[?25l[?25h wave[?25l[?25h generator[?25l[?25h\n[?25l[?25h");

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h([?25l[?25hLR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_init[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h);
[?25l[?25h   [?25l[?25h g[?25l[?25hpio[?25l[?25h_set[?25l[?25h_dir[?25l[?25h(S[?25l[?25hD[?25l[?25h_PIN[?25l[?25h,[?25l[?25h GPIO[?25l[?25h_OUT[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h
[?25l[?25h   [?25l[?25h P[?25l[?25hIO[?25l[?25h p[?25l[?25hio[?25l[?25h =[?25l[?25h pico[?25l[?25h_default[?25l[?25h_p[?25l[?25hio[?25l[?25h0[?25l[?25h_base[?25l[?25h();
[?25l[?25h   [?25l[?25h uint[?25l[?25h offset[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_add[?25l[?25h_program[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h);
[?25l[?25h   [?25l[?25h uint[?25l[?25h sm[?25l[?25h =[?25l[?25h p[?25l[?25hio[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_sm[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Configure[?25l[?25h DMA[?25l[?25h channel[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_config[?25l[?25h config[?25l[?25h =[?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_get[?25l[?25h_default[?25l[?25h_config[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_trans[?25l[?25hfer[?25l[?25h_data[?25l[?25h(config[?25l[?25h,[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_d[?25l[?25hreq[?25l[?25h(config[?25l[?25h,[?25l[?25h D[?25l[?25hRE[?25l[?25hQ[?25l[?25h_[?25l[?25hPIO[?25l[?25h_TX[?25l[?25h0[?25l[?25h,[?25l[?25h true[?25l[?25h);
[?25l[?25h   [?25l[?25h channel[?25l[?25h_config[?25l[?25h_set[?25l[?25h_ch[?25l[?25hained[?25l[?25h_trans[?25l[?25hfers[?25l[?25h(config[?25l[?25h,[?25l[?25h false[?25l[?25h);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_[?25l[?25hconfigure[?25l[?25h(d[?25l[?25hma[?25l[?25h_[?25l[?25hclaim[?25l[?25h_un[?25l[?25hused[?25l[?25h_channel[?25l[?25h(true[?25l[?25h),[?25l[?25h &[?25l[?25hconfig[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Initialize[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_init[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h offset[?25l[?25h,
[?25l[?25h               [?25l[?25h NULL[?25l[?25h,[?25l[?25h [?25l[?25h //[?25l[?25h Not[?25l[?25h used[?25l[?25h for[?25l[?25h transmit[?25l[?25h
[?25l[?25h               [?25l[?25h &[?25l[?25hi[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h[[?25l[?25h0[?25l[?25h],
[?25l[?25h               [?25l[?25h sizeof[?25l[?25h(i[?25l[?25h2[?25l[?25hs[?25l[?25h_program[?25l[?25h)/[?25l[?25hsizeof[?25l[?25h(uint[?25l[?25h1[?25l[?25h6[?25l[?25h_t[?25l[?25h),
[?25l[?25h               [?25l[?25h NULL[?25l[?25h);[?25l[?25h //[?25l[?25h No[?25l[?25h RX[?25l[?25h F[?25l[?25hIFO[?25l[?25h needed[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Configure[?25l[?25h P[?25l[?25hIO[?25l[?25h for[?25l[?25h proper[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h timing[?25l[?25h
[?25l[?25h   [?25l[?25h //[?25l[?25h For[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h samples[?25l[?25h/sec[?25l[?25h with[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h bits[?25l[?25h/sample[?25l[?25h ([?25l[?25htotal[?25l[?25h bit[?25l[?25h rate[?25l[?25h =[?25l[?25h [?25l[?25h1[?25l[?25h,[?25l[?25h0[?25l[?25h5[?25l[?25h8[?25l[?25h,[?25l[?25h4[?25l[?25h0[?25l[?25h0[?25l[?25h b[?25l[?25hps[?25l[?25h)
[?25l[?25h   [?25l[?25h //[?25l[?25h With[?25l[?25h system[?25l[?25h clock[?25l[?25h at[?25l[?25h ~[?25l[?25h1[?25l[?25h2[?25l[?25h5[?25l[?25h MHz[?25l[?25h,[?25l[?25h we[?25l[?25h need[?25l[?25h to[?25l[?25h divide[?25l[?25h this[?25l[?25h down[?25l[?25h appropriately[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_con[?25l[?25hsecut[?25l[?25hive[?25l[?25h_p[?25l[?25hind[?25l[?25hirs[?25l[?25h(p[?25l[?25hio[?25l[?25h,[?25l[?25h sm[?25l[?25h,[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h |[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h_PIN[?25l[?25h,[?25l[?25h SD[?25l[?25h_PIN[?25l[?25h,
[?25l[?25h                                [?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Configure[?25l[?25h output[?25l[?25h pins[?25l[?25h for[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h,[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h and[?25l[?25h SD[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h clock[?25l[?25h division[?25l[?25h.[?25l[?25h For[?25l[?25h example[?25l[?25h,[?25l[?25h to[?25l[?25h achieve[?25l[?25h ~[?25l[?25h1[?25l[?25h2[?25l[?25h5[?25l[?25h MHz[?25l[?25h /[?25l[?25h ([?25l[?25h2[?25l[?25h4[?25l[?25h *[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h)[?25l[?25h =[?25l[?25h ?
[?25l[?25h   [?25l[?25h //[?25l[?25h This[?25l[?25h calculation[?25l[?25h would[?25l[?25h need[?25l[?25h to[?25l[?25h be[?25l[?25h adjusted[?25l[?25h based[?25l[?25h on[?25l[?25h actual[?25l[?25h system[?25l[?25h clock[?25l[?25h
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_set[?25l[?25h_cl[?25l[?25hk[?25l[?25hdiv[?25l[?25h_int[?25l[?25h_str[?25l[?25hide[?25l[?25h(s[?25l[?25hm[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h7[?25l[?25h7[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h7[?25l[?25h8[?25l[?25h);[?25l[?25h [?25l[?25h //[?25l[?25h Appro[?25l[?25hxim[?25l[?25hate[?25l[?25h for[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h.[?25l[?25h1[?25l[?25h k[?25l[?25hHz[?25l[?25h

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h with[?25l[?25h first[?25l[?25h buffer[?25l[?25h filled[?25l[?25h with[?25l[?25h sine[?25l[?25h wave[?25l[?25h
[?25l[?25h   [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Set[?25l[?25h up[?25l[?25h DMA[?25l[?25h to[?25l[?25h transfer[?25l[?25h from[?25l[?25h audio[?25l[?25h_buffer[?25l[?25h to[?25l[?25h P[?25l[?25hIO[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_write[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25hpio[?25l[?25h->[?25l[?25htx[?25l[?25hf[?25l[?25h[[?25l[?25hsm[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);

[?25l[?25h   [?25l[?25h //[?25l[?25h Start[?25l[?25h DMA[?25l[?25h transfer[?25l[?25h and[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h
[?25l[?25h   [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_start[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h);
[?25l[?25h   [?25l[?25h p[?25l[?25hio[?25l[?25h_sm[?25l[?25h_start[?25l[?25h(s[?25l[?25hm[?25l[?25h);

[?25l[?25h   [?25l[?25h while[?25l[?25h ([?25l[?25htrue[?25l[?25h)[?25l[?25h {
[?25l[?25h       [?25l[?25h if[?25l[?25h ([?25l[?25hd[?25l[?25hma[?25l[?25h_done[?25l[?25h)[?25l[?25h {
[?25l[?25h           [?25l[?25h //[?25l[?25h Buffer[?25l[?25h played[?25l[?25h,[?25l[?25h switch[?25l[?25h to[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h current[?25l[?25h_buffer[?25l[?25h =[?25l[?25h ([?25l[?25hcurrent[?25l[?25h_buffer[?25l[?25h +[?25l[?25h [?25l[?25h1[?25l[?25h)[?25l[?25h %[?25l[?25h [?25l[?25h2[?25l[?25h;
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_done[?25l[?25h =[?25l[?25h false[?25l[?25h;

[?25l[?25h           [?25l[?25h //[?25l[?25h Generate[?25l[?25h next[?25l[?25h cycle[?25l[?25h into[?25l[?25h the[?25l[?25h other[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h generate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h(a[?25l[?25hudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h],[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h,[?25l[?25h [?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25hf[?25l[?25h,[?25l[?25h [?25l[?25h4[?25l[?25h4[?25l[?25h1[?25l[?25h0[?25l[?25h0[?25l[?25h.[?25l[?25h0[?25l[?25hf[?25l[?25h);

[?25l[?25h           [?25l[?25h //[?25l[?25h Rest[?25l[?25hart[?25l[?25h DMA[?25l[?25h from[?25l[?25h the[?25l[?25h new[?25l[?25h buffer[?25l[?25h
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_read[?25l[?25h_addr[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h &[?25l[?25haudio[?25l[?25h_buffer[?25l[?25h[current[?25l[?25h_buffer[?25l[?25h][[?25l[?25h0[?25l[?25h]);
[?25l[?25h           [?25l[?25h d[?25l[?25hma[?25l[?25h_channel[?25l[?25h_set[?25l[?25h_trans[?25l[?25h_count[?25l[?25h(D[?25l[?25hMA[?25l[?25h_CH[?25l[?25hAN[?25l[?25h,[?25l[?25h B[?25l[?25hUFFER[?25l[?25h_SIZE[?25l[?25h *[?25l[?25h sizeof[?25l[?25h(int[?25l[?25h3[?25l[?25h2[?25l[?25h_t[?25l[?25h),[?25l[?25h true[?25l[?25h);
[?25l[?25h       [?25l[?25h }
[?25l[?25h   [?25l[?25h }

[?25l[?25h   [?25l[?25h return[?25l[?25h [?25l[?25h0[?25l[?25h;
[?25l[?25h}
[?25l[?25h```

[?25l[?25h###[?25l[?25h Ex[?25l[?25hplanation[?25l[?25h

[?25l[?25h1[?25l[?25h.[?25l[?25h **[?25l[?25hI[?25l[?25h2[?25l[?25hS[?25l[?25h GPIO[?25l[?25h P[?25l[?25hins[?25l[?25h**:[?25l[?25h The[?25l[?25h code[?25l[?25h starts[?25l[?25h by[?25l[?25h defining[?25l[?25h the[?25l[?25h GPIO[?25l[?25h pins[?25l[?25h for[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h communication[?25l[?25h ([?25l[?25hBC[?25l[?25hL[?25l[?25hK[?25l[?25h,[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h,[?25l[?25h and[?25l[?25h SD[?25l[?25h).

[?25l[?25h2[?25l[?25h.[?25l[?25h **[?25l[?25hPIO[?25l[?25h Program[?25l[?25h**:[?25l[?25h A[?25l[?25h P[?25l[?25hIO[?25l[?25h program[?25l[?25h is[?25l[?25h defined[?25l[?25h to[?25l[?25h handle[?25l[?25h the[?25l[?25h I[?25l[?25h2[?25l[?25hS[?25l[?25h protocol[?25l[?25h:
[?25l[?25h  [?25l[?25h -[?25l[?25h It[?25l[?25h sets[?25l[?25h up[?25l[?25h the[?25l[?25h initial[?25l[?25h state[?25l[?25h of[?25l[?25h the[?25l[?25h control[?25l[?25h signals[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h For[?25l[?25h each[?25l[?25h sample[?25l[?25h,[?25l[?25h it[?25l[?25h sets[?25l[?25h the[?25l[?25h LR[?25l[?25hCL[?25l[?25hK[?25l[?25h high[?25l[?25h ([?25l[?25hindic[?25l[?25hating[?25l[?25h a[?25l[?25h new[?25l[?25h sample[?25l[?25h),[?25l[?25h then[?25l[?25h outputs[?25l[?25h each[?25l[?25h bit[?25l[?25h of[?25l[?25h the[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h audio[?25l[?25h data[?25l[?25h in[?25l[?25h sequence[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h The[?25l[?25h B[?25l[?25hCL[?25l[?25hK[?25l[?25h is[?25l[?25h togg[?25l[?25hled[?25l[?25h with[?25l[?25h each[?25l[?25h bit[?25l[?25h to[?25l[?25h provide[?25l[?25h the[?25l[?25h clock[?25l[?25h signal[?25l[?25h for[?25l[?25h the[?25l[?25h DAC[?25l[?25h.

[?25l[?25h3[?25l[?25h.[?25l[?25h **[?25l[?25hAudio[?25l[?25h Buffer[?25l[?25hing[?25l[?25h**:[?25l[?25h Two[?25l[?25h buffers[?25l[?25h are[?25l[?25h used[?25l[?25h ([?25l[?25hdouble[?25l[?25h buffering[?25l[?25h)[?25l[?25h to[?25l[?25h continuously[?25l[?25h generate[?25l[?25h and[?25l[?25h play[?25l[?25h back[?25l[?25h audio[?25l[?25h.[?25l[?25h While[?25l[?25h one[?25l[?25h buffer[?25l[?25h is[?25l[?25h being[?25l[?25h played[?25l[?25h,[?25l[?25h the[?25l[?25h other[?25l[?25h is[?25l[?25h being[?25l[?25h filled[?25l[?25h with[?25l[?25h new[?25l[?25h audio[?25l[?25h samples[?25l[?25h.

[?25l[?25h4[?25l[?25h.[?25l[?25h **[?25l[?25hS[?25l[?25hine[?25l[?25h Wave[?25l[?25h Generation[?25l[?25h**:[?25l[?25h The[?25l[?25h `[?25l[?25hgenerate[?25l[?25h_s[?25l[?25hine[?25l[?25h_w[?25l[?25have[?25l[?25h`[?25l[?25h function[?25l[?25h creates[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h the[?25l[?25h specified[?25l[?25h frequency[?25l[?25h by[?25l[?25h calculating[?25l[?25h the[?25l[?25h appropriate[?25l[?25h phase[?25l[?25h for[?25l[?25h each[?25l[?25h sample[?25l[?25h and[?25l[?25h converting[?25l[?25h it[?25l[?25h to[?25l[?25h a[?25l[?25h [?25l[?25h2[?25l[?25h4[?25l[?25h-bit[?25l[?25h signed[?25l[?25h integer[?25l[?25h value[?25l[?25h.

[?25l[?25h5[?25l[?25h.[?25l[?25h **[?25l[?25hMain[?25l[?25h Loop[?25l[?25h**:
[?25l[?25h  [?25l[?25h -[?25l[?25h The[?25l[?25h first[?25l[?25h buffer[?25l[?25h is[?25l[?25h filled[?25l[?25h with[?25l[?25h a[?25l[?25h sine[?25l[?25h wave[?25l[?25h at[?25l[?25h middle[?25l[?25h C[?25l[?25h ([?25l[?25h2[?25l[?25h6[?25l[?25h1[?25l[?25h.[?25l[?25h6[?25l[?25h3[?25l[?25h Hz[?25l[?25h).
[?25l[?25h  [?25l[?25h -[?25l[?25h DMA[?25l[?25h is[?25l[?25h set[?25l[?25h up[?25l[?25h to[?25l[?25h transfer[?25l[?25h this[?25l[?25h data[?25l[?25h to[?25l[?25h the[?25l[?25h P[?25l[?25hIO[?25l[?25h state[?25l[?25h machine[?25l[?25h.
[?25l[?25h  [?25l[?25h -[?25l[?25h When[?25l[?25h DMA[?25l[?25h completes[?25l[?25h transferring[?25l[?25h a[?25l[?25h buffer[?25l[?25h,[?25l[?25h it[?25l[?25h sw[?25l[?25haps[?25l[?25h to[?25l[?25h the[?25l[?25h other[?25l[?25h buffer[?25l[?25h and[?25l[?25h starts[?25l[?25h generating[?25l[?25h new[?25l[?25h samples[?25l[?25h for[?25l[?25h it[?25l[?25h.

[?25l[?25hThis[?25l[?25h implementation[?25l[?25h ensures[?25l[?25h continuous[?25l[?25h playback[?25l[?25h of[?25l[?25h the[?25l[?25h sine[?25l[?25h wave[?25l[?25h by[?25l[?25h efficiently[?25l[?25h managing[?25l[?25h audio[?25l[?25h buffers[?25l[?25h and[?25l[?25h lever[?25l[?25haging[?25l[?25h hardware[?25l[?25h acceleration[?25l[?25h ([?25l[?25hPIO[?25l[?25h and[?25l[?25h DMA[?25l[?25h)[?25l[?25h for[?25l[?25h precise[?25l[?25h timing[?25l[?25h.[?25l[?25h

[?25l[?25h0.27user 0.35system 3:22.73elapsed 0%CPU (0avgtext+0avgdata 36852maxresident)k
0inputs+344outputs (0major+4708minor)pagefaults 0swaps
