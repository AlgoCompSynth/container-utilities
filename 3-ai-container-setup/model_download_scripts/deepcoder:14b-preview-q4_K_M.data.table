<think>
Okay, I need to write an R program using data.table to accomplish the tasks described. Let's break down what needs to be done step by step.

First, I'll start by reading the two CSV files: 'offices.csv' and 'homes.csv'. Each of these has two text columns. For the offices file, the columns are 'employee_id' and 'work_address', and for the homes file, they're 'employee_id' and 'home_address'.

I remember that in data.table, you can read a CSV file using the fread function. So I'll create two data.tables: one for offices and another for homes. That part seems straightforward.

Next, I need to join these two tables on the 'employee_id' column. Since the requirement is to only include rows where the employee exists in both tables, this sounds like a right join or perhaps an inner join. Wait, noâ€”inner join would give exactly the intersection of keys present in both tables, which is what we want here because we only want rows that exist in both.

In data.table, joining is done using the merge function. I'll set the key columns using setkey for both tables to optimize the merging process. Alternatively, I can specify the 'by' parameter directly in the merge function without setting keys, but setting keys might be more efficient for larger datasets.

After merging, the resulting table will have all three columns: 'employee_id', 'work_address', and 'home_address'. Each row represents an employee who exists in both the offices and homes tables.

Finally, I need to write this merged data.table to a CSV file named 'result.csv'. Using fwrite should handle that efficiently.

I should also consider any potential issues. For example, if there are duplicate employee_ids in either table, but since the problem statement doesn't mention handling duplicates, I'll assume each employee_id appears once per file or that we don't need to worry about it for this task.

Putting it all together, the steps are:

1. Read 'offices.csv' into 'offices'.
2. Read 'homes.csv' into 'homes'.
3. Join them on 'employee_id' and keep only matching rows.
4. Write the result to 'result.csv'.

I think that covers everything required. Now I'll write the code accordingly, making sure to use data.table functions appropriately for efficiency.
</think>

Here is an R program using data.table to accomplish the tasks:

```R
# Load the data.table package
library(data.table)

# Read the offices.csv file into a data.table called 'offices'
offices <- fread("offices.csv", colClasses = c(employee_id = "character", work_address = "character"))

# Read the homes.csv file into a data.table called 'homes'
homes <- fread("homes.csv", colClasses = c(employee_id = "character", home_address = "character"))

# Join the offices and homes data.tables on employee_id
result <- merge(offices, homes, by = "employee_id")

# Write the result to result.csv
fwrite(result, file = "result.csv")
```

### Explanation:

1. **Reading Files**: The `fread` function is used to read the CSV files into data.tables (`offices` and `homes`). The `colClasses` parameter specifies that both columns are character (text) columns.

2. **Joining Tables**: The `merge` function joins the two tables based on the `employee_id` column. This performs an inner join, which means only rows where the employee_id exists in both tables will be included in the result.

3. **Writing Output**: The `fwrite` function writes the resulting data.table to a CSV file named "result.csv". The output includes all three columns: `employee_id`, `work_address`, and `home_address`.

This code efficiently handles the joining of two tables using data.table functions, ensuring that only matching employee_ids are included in the final result.

